{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u897f\u7535\u8ba1\u79d1\u5b66\u4e60\u6307\u5357","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"ComputerTheory/","title":"\u8ba1\u7b97\u673a\u7406\u8bba","text":""},{"location":"ComputerTheory/EmbeddedSystem/","title":"\u81ea\u4e3b\u53ef\u63a7\u5d4c\u5165\u5f0f\u7cfb\u7edf","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_1","title":"\u7b2c\u4e00\u8bb2 \u5d4c\u5165\u5f0f\u7cfb\u7edf\u6982\u8ff0","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_2","title":"\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e09\u8981\u7d20","text":"<ul> <li>\u5d4c\u5165\u6027\uff1a\u5d4c\u5165\u5230\u5bf9\u8c61\u4f53\u7cfb\u4e2d\uff0c\u6709\u5bf9\u8c61\u73af\u5883\u8981\u6c42</li> <li>\u4e13\u7528\u6027\uff1a\u8f6f\u3001\u786c\u4ef6\u6309\u5bf9\u8c61\u8981\u6c42\u88c1\u526a</li> <li>\u8ba1\u7b97\u673a\uff1a\u5b9e\u73b0\u5bf9\u8c61\u7684\u667a\u80fd\u5316\u529f\u80fd</li> </ul> <p>{% message color:info title:\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5b9a\u4e49 size:default%}</p> <ul> <li>\u6807\u51c6\u5b9a\u4e49\uff1a\u4ee5\u5e94\u7528\u4e3a\u4e2d\u5fc3\u3001\u4ee5\u8ba1\u7b97\u673a\u6280\u672f\u4e3a\u57fa\u7840\uff0c\u8f6f\u3001\u786c\u4ef6\u53ef\u88c1\u526a\uff0c\u9002\u5e94\u5e94\u7528\u7cfb\u7edf\u5bf9\u529f\u80fd\u3001\u53ef\u9760\u6027\u3001\u6210\u672c\u3001\u4f53\u79ef\u3001\u529f\u8017\u7b49\u4e25\u683c\u8981\u6c42\u7684\u4e13\u7528\u8ba1\u7b97\u673a\u7cfb\u7edf\u3002</li> <li>\u6838\u5fc3\u8981\u4e49\uff1a\u5d4c\u5165\u5230\u5bf9\u8c61\u4f53\u4e2d\u7684\u4e13\u7528\u8ba1\u7b97\u673a\u7cfb\u7edf {% endmessage %}</li> </ul> <p>{% message color:info size:default%} \u5d4c\u5165\u5f0f\u7cfb\u7edf\u7684\u6838\u5fc3\uff1a\u8ba1\u7b97\u6280\u672f\uff1b\u5d4c\u5165\u5f0f\u7cfb\u7edf\u7684\u7075\u9b42\uff1a\u8f6f\u4ef6\u6280\u672f {% endmessage %}</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_3","title":"\u5d4c\u5165\u5f0f\u7cfb\u7edf\u7684\u5206\u7c7b","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_4","title":"\u5d4c\u5165\u5f0f\u5904\u7406\u5668\u7684\u5206\u7c7b","text":"<p>\u5d4c\u5165\u5f0f\u7cfb\u7edf\u786c\u4ef6\u7684\u6838\u5fc3\u90e8\u4ef6\u662f\u5d4c\u5165\u5f0f\u5904\u7406\u5668\uff0c\u6309\u7167\u7528\u9014\u53ef\u4ee5\u4e3a\u5206\uff1a</p> <ul> <li>\u5d4c\u5165\u5f0f\u5fae\u63a7\u5236\u5668 (Micro Controller Unit, MCU): \u5355\u7247\u673a</li> <li>\u5d4c\u5165\u5f0f DSP (Digital Signal Processor, DSP)</li> <li>\u5d4c\u5165\u5f0f\u5fae\u5904\u7406\u5668 (Micro Processor Unit, MPU): ARM</li> <li>SOC(System on a Chip, SOC)</li> <li>SOPC(System on a Programmable Chip, SOPC)</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_5","title":"\u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u7684\u5206\u7c7b","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\uff1a\u8fde\u63a5\u8ba1\u7b97\u673a\u786c\u4ef6\u4e0e\u5e94\u7528\u7a0b\u5e8f\u7684\u7cfb\u7edf\u7a0b\u5e8f</p> <ul> <li>\u975e\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf: Linux</li> <li>\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf: RTOS (Real-Time Operating System, \u7a0b\u5e8f\u5bf9\u65f6\u95f4\u8981\u6c42\u5341\u5206\u4e25\u683c: \u8ba1\u7b97\u7684\u6b63\u786e\u6027\u4e0d\u4ec5\u53d6\u51b3\u4e8e\u7a0b\u5e8f\u7684\u903b\u8f91\u6b63\u786e\u6027\uff0c\u66f4\u53d6\u51b3\u4e8e\u7ed3\u679c\u4ea7\u751f\u7684\u65f6\u95f4)</li> </ul> <p></p>"},{"location":"ComputerTheory/EmbeddedSystem/#_6","title":"\u7b2c\u4e8c\u8bb2 \u5d4c\u5165\u5f0f\u7cfb\u7edf\u57fa\u7840","text":""},{"location":"ComputerTheory/EmbeddedSystem/#-","title":"\u4f53\u7cfb\u7ed3\u6784-\u5b58\u50a8\u5668\u7ec4\u7ec7","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_7","title":"\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784","text":"<ul> <li>\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7406\u8bba</li> <li>\u8ba1\u7b97\u673a\u7684\u6570\u5236\u91c7\u7528\u4e8c\u8fdb\u5236</li> <li>\u8ba1\u7b97\u673a\u6309\u7167\u7a0b\u5e8f\u987a\u5e8f\u6267\u884c</li> <li>\u8981\u70b9</li> <li>\u7a0b\u5e8f\u5b58\u50a8\u3001\u7a0b\u5e8f\u6267\u884c</li> <li>\u8f93\u5165\u3001\u5b58\u50a8\u3001\u8fd0\u7b97\u3001\u63a7\u5236\u548c\u8f93\u51fa</li> <li>\u7a0b\u5e8f\u6307\u4ee4\u5b58\u50a8\u5668\u548c\u6570\u636e\u5b58\u50a8\u5668\u5171\u7528\u540c\u4e00\u5b58\u50a8\u5668\uff0c\u7edf\u4e00\u7f16\u5740\uff1b\u7a0b\u5e8f\u6307\u4ee4\u548c\u6570\u636e\u7684\u5bbd\u5ea6\u76f8\u540c</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_8","title":"\u54c8\u4f5b\u4f53\u7cfb\u7ed3\u6784","text":"<ul> <li>\u7a0b\u5e8f\u6307\u4ee4\u5b58\u50a8\u5668\u548c\u6570\u636e\u5b58\u50a8\u5668\u4f7f\u7528\u4e24\u4e2a\u72ec\u7acb\u7684\u5b58\u50a8\u5668\uff0c\u5b9e\u73b0\u5e76\u884c\u5904\u7406\uff1b</li> <li>\u4f7f\u7528\u72ec\u7acb\u7684\u4e24\u6761\u603b\u7ebf\uff0c\u7528\u4e8eCPU\u4e0e\u4e24\u4e2a\u5b58\u50a8\u5668\u8fdb\u884c\u901a\u4fe1</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_9","title":"\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>CPU \u5b57\u957f: \u5fae\u5904\u7406\u5668\u4e00\u6b21\u6267\u884c\u5904\u7406\u7684\u6570\u636e\u5bbd\u5ea6</li> <li>\u6307\u4ee4\u96c6: CPU \u6240\u80fd\u6267\u884c\u7684\u6240\u6709\u6307\u4ee4\u7684\u96c6\u5408</li> <li>\u590d\u6742\u6307\u4ee4\u96c6(CISC, Complex Instruction Set Computer)</li> <li>\u5177\u6709\u5927\u91cf\u6307\u4ee4\u548c\u5bfb\u5740\u65b9\u5f0f</li> <li>\u5927\u591a\u6570\u7a0b\u5e8f\u53ea\u4f7f\u7528\u5c11\u91cf\u7684\u6307\u4ee4\u5c31\u80fd\u591f\u8fd0\u884c</li> <li>\u7cbe\u7b80\u6307\u4ee4\u96c6(RISC, Reduced Instruction Set Computer)</li> <li>\u53ea\u5305\u542b\u6700\u6709\u7528\u7684\u6307\u4ee4</li> <li>\u6570\u636e\u901a\u9053\u5feb\u901f\u6267\u884c\u6bcf\u4e00\u6761\u6307\u4ee4</li> <li>\u7279\u70b9\u5bf9\u6bd4</li> <li>RISC\u6307\u4ee4\u683c\u5f0f\u548c\u957f\u5ea6\u56fa\u5b9a\uff0c\u6307\u4ee4\u7c7b\u578b\u5c11\uff0c\u529f\u80fd\u7b80\u5355\uff0c\u5bfb\u5740\u65b9\u5f0f\u5c11\uff0c\u91c7\u7528\u89c4\u5219\u7684\u786c\u5e03\u7ebf\u903b\u8f91(\u7ec4\u5408\u903b\u8f91\u578b)</li> <li>CISC\u4f7f\u7528\u5fae\u7801ROM\u8fdb\u884c\u6307\u4ee4\u8bd1\u7801(\u5b58\u50a8\u903b\u8f91\u578b)</li> <li>RICS\u5927\u591a\u6570\u6307\u4ee4\u5355\u5468\u671f\u8fd0\u884c\uff0c\u5206\u5f00\u7684Load/Store\u7ed3\u6784\u7684\u5b58\u53d6\u6307\u4ee4\uff0c\u56fa\u5b9a\u6307\u4ee4\u683c\u5f0f</li> <li>CISC\u5f3a\u8c03\u786c\u4ef6\u7684\u590d\u6742\u6027\uff0cRISC\u6ce8\u91cd\u7f16\u8bd1\u5668\u7684\u590d\u6742\u6027</li> <li>\u6570\u636e\u901a\u9053\u5bf9\u6bd4(RISC\u7684\u4efb\u4f55\u8fd0\u7b97\u53ea\u80fd\u5728REG\u4e0a\u6267\u884c\uff0cALU\u7684\u6570\u636e\u6765\u6e90\u53ea\u80fd\u662fREG\uff0c\u63d0\u9ad8\u6267\u884c\u6548\u7387\uff0c\u5bf9\u6bd4CISC\u6709\u6570\u91cf\u7ea7\u4e0a\u7684\u6539\u5584)   </li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_10","title":"\u591a\u4efb\u52a1\u7a0b\u5e8f\u7ed3\u6784","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_11","title":"\u524d\u540e\u53f0\u7a0b\u5e8f\u7ed3\u6784","text":"<ul> <li>\u524d\u53f0</li> <li>\u4e2d\u65ad\u5b9e\u73b0</li> <li>\u5904\u7406\u5bf9\u65f6\u95f4\u8981\u6c42\u4e25\u683c\u4e8b\u4ef6\u3001\u7a81\u53d1\u4e8b\u4ef6</li> <li>\u540e\u53f0</li> <li>\u8f6e\u8be2\u591a\u4efb\u52a1\u5b9e\u73b0</li> <li>\u5904\u7406\u5bf9\u65f6\u95f4\u8981\u6c42\u4e0d\u4e25\u683c\u4e8b\u4ef6</li> </ul> <p>\u6ce8\uff1a\u524d\u540e\u53f0\u662f\u4e24\u79cd\u670d\u52a1\u6a21\u5f0f\uff0c\u524d\u53f0\u5bf9\u63a5\u65f6\u95f4\u4e25\u683c\u4e8b\u4ef6\uff0c\u901a\u8fc7\u4e2d\u65ad\u65b9\u5f0f\u8fdb\u884c\u54cd\u5e94\uff1b\u540e\u53f0\u5bf9\u63a5\u65f6\u95f4\u4e0d\u4e25\u683c\u4e8b\u4ef6\uff0c\u5206\u914d\u65f6\u95f4\u7247\u8f6e\u8be2\u5904\u7406\u6bcf\u4e2a\u4efb\u52a1</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_12","title":"\u4e8b\u4ef6\u89e6\u53d1\u7ed3\u6784","text":"<ul> <li>\u72b6\u6001\u673a\uff1a\u5b9e\u9645\u4e0a\u662f\u6709\u9650\u72b6\u6001\u673a\uff0c\u7c7b\u6bd4\u9a6c\u5c14\u53ef\u592b\u51b3\u7b56</li> <li>\u4e8b\u4ef6\u67e5\u8be2\uff1a(\u5728\u72b6\u6001\u4e2d\u5224\u65ad\u4e8b\u4ef6)\u4e3b\u4f53\u662f\u67d0\u4e00\u7279\u5b9a\u72b6\u6001\uff0c\u51b3\u7b56\u662f\u91c7\u53d6\u7684\u4e0d\u540c\u4e8b\u4ef6\uff0c\u7ed3\u679c\u662f\u6267\u884c\u4e0d\u540c\u529f\u80fd\uff0c\u8fc1\u79fb\u5230\u65b0\u72b6\u6001</li> <li>\u4e8b\u4ef6\u89e6\u53d1\uff1a(\u5728\u4e8b\u4ef6\u4e2d\u5224\u65ad\u72b6\u6001)\u4e3b\u4f53\u662f\u67d0\u4e00\u7279\u5b9a\u4e8b\u4ef6\uff0c\u51b3\u7b56\u662f\u6267\u884c\u7684\u4e0d\u540c\u52a8\u4f5c\uff0c\u4f9d\u636e\u662f\u5f53\u524d\u7684\u72b6\u6001\uff0c\u7ed3\u679c\u662f\u6267\u884c\u4e0d\u540c\u529f\u80fd\uff0c\u8fc1\u79fb\u5230\u65b0\u72b6\u6001</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_13","title":"\u64cd\u4f5c\u7cfb\u7edf","text":"<ul> <li>\u5b9e\u73b0\u591a\u4efb\u52a1\u8fd0\u884c\uff0c\u8fdb\u7a0b\u8c03\u5ea6</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#arm","title":"\u7b2c\u4e09\u8bb2 ARM \u57fa\u672c\u7f16\u7a0b\u6a21\u578b","text":"<p>ARM=Advanced RISC Machines</p>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_1","title":"ARM\u5904\u7406\u5668\u7279\u70b9","text":"<ul> <li>Load/Store \u4f53\u7cfb\u7ed3\u6784</li> <li>16\u4f4d/32\u4f4d\u53cc\u6307\u4ee4\u96c6</li> <li>3\u5730\u5740\u6307\u4ee4\u683c\u5f0f</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#thumb","title":"Thumb \u6280\u672f","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_14","title":"\u5f00\u53d1\u80cc\u666f","text":"<ul> <li>RISC\u4ee3\u7801\u5bc6\u5ea6\u4f4e\uff0c\u9700\u8981\u6bd4\u8f83\u5927\u7684\u5b58\u50a8\u5668\u7a7a\u95f4(RISC\u6307\u4ee4\u7b80\u5355\uff0c\u5b8c\u6210\u540c\u4e00\u4e2a\u529f\u80fd\u9700\u8981\u591a\u6761\u6307\u4ee4\uff0c\u56e0\u6b64\u9700\u8981\u66f4\u5927\u7684\u5b58\u50a8\u5668\u7a7a\u95f4)</li> <li>\u9700\u898132\u4f4dRISC\u5904\u7406\u5668\u7684\u6027\u80fd\u548c16\u4f4dCISC\u5904\u7406\u5668\u7684\u4ee3\u7801\u5bc6\u5ea6(32\u4f4dRISC\u7684\u6027\u80fd, 16\u4f4dCISC\u7684\u4ee3\u7801\u5bc6\u5ea6)</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#thumb_1","title":"Thumb \u6982\u8ff0","text":"<ul> <li>\u6280\u672f\u6982\u8ff0</li> <li>16\u4f4d\u7684\u6307\u4ee4\u957f\u5ea6</li> <li>32\u4f4d\u7684\u6267\u884c\u6548\u7387</li> <li>\u62e5\u67092\u5957\u72ec\u7acb\u7684\u6307\u4ee4\u96c6</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_2","title":"ARM\u5904\u7406\u5668\u5de5\u4f5c\u72b6\u6001","text":""},{"location":"ComputerTheory/EmbeddedSystem/#armarm","title":"ARM\u72b6\u6001(ARM\u6307\u4ee4\u96c6)","text":"<ul> <li>\u6267\u884c32\u4f4d\u7684\u5b57\u5bf9\u9f50\u7684ARM\u6307\u4ee4</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#thumbthumb","title":"Thumb\u72b6\u6001(Thumb\u6307\u4ee4\u96c6)","text":"<ul> <li>\u6267\u884c16\u4f4d\u7684\u3001\u534a\u5b57\u5bf9\u9f50\u7684Thumb\u6307\u4ee4</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_15","title":"\u72b6\u6001\u5207\u6362","text":"<ul> <li>\u4e24\u4e2a\u6307\u4ee4\u96c6\u5747\u6709\u5207\u6362\u5904\u7406\u5668\u72b6\u6001\u7684\u6307\u4ee4</li> <li>\u5f00\u59cb\u6267\u884c\u4ee3\u7801\u65f6\u5904\u4e8eARM\u72b6\u6001\uff1b\u5f02\u5e38\u5904\u7406\u65f6\u4e5f\u5904\u4e8eARM\u72b6\u6001\uff1b\u5f02\u5e38\u5904\u7406\u8fd4\u56de\u65f6\uff0c\u53ef\u4ee5\u8fd4\u56de\u5230Thumb\u72b6\u6001</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_16","title":"\u8fd0\u884c\u6a21\u5f0f","text":"<ul> <li>\u7279\u6743\u6a21\u5f0f\uff1a\u9664\u4e86\u7528\u6237\u6a21\u5f0f\u5916\u7684\u5176\u4ed6\u6a21\u5f0f</li> <li>\u5f02\u5e38\u6a21\u5f0f\uff1a\u9664\u4e86\u7528\u6237\u6a21\u5f0f\u3001\u7cfb\u7edf\u6a21\u5f0f\u5916\u7684\u5176\u4ed6\u6a21\u5f0f</li> <li>\u529f\u80fd\u8bf4\u660e {% message color:info size:default%} \u7cfb\u7edf\u6a21\u5f0f\u8fd0\u884c\u7279\u6743\u64cd\u4f5c\u7cfb\u7edf\u4efb\u52a1(\u4e0e\u7528\u6237\u6a21\u5f0f\u6709\u5b8c\u5168\u76f8\u540c\u7684\u5bc4\u5b58\u5668\u7ec4) \u5f02\u5e38\u6a21\u5f0f\u4e3b\u8981\u5904\u7406\u4e2d\u65ad\u548c\u5f02\u5e38 {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_17","title":"\u5bc4\u5b58\u5668\u7ec4\u7ec7","text":"<p>ARM\u670937\u4e2a32\u4f4d\u957f\u7684\u5bc4\u5b58\u5668\uff1a + 1\u4e2aPC(Program Counter), 30\u4e2a\u901a\u7528\u5bc4\u5b58\u5668, 1\u4e2aCPSR(Current Program Status Register), 1\u4e2aSPSR(Saved Program Status Register) + 31\u4e2a\u901a\u752832\u4f4d\u5bc4\u5b58\u5668\uff0c6\u4e2a\u72b6\u6001\u5bc4\u5b58\u5668 </p> <ul> <li>\u5bc4\u5b58\u5668\u529f\u80fd\u8bf4\u660e</li> <li>R0$\\sim$R13: \u4fdd\u5b58\u6570\u636e/\u5730\u5740\u503c\u7684\u901a\u7528\u5bc4\u5b58\u5668\uff0c\u65e0\u7279\u6b8a\u7528\u9014</li> <li>R0$\\sim$R7: \u672a\u5206\u7ec4\u5bc4\u5b58\u5668\uff0c\u662f\u6240\u6709\u5904\u7406\u5668\u6a21\u5f0f\u5bf9\u5e94\u7684\u901a\u7528\u5bc4\u5b58\u5668\uff0c\u65e0\u7279\u6b8a\u5904\u7406\u6a21\u5f0f</li> <li>R8$\\sim$R12: \u4e00\u4e2a\u5206\u7ec4\u7528\u4e8e\u9664FIQ\u6a21\u5f0f\u4e4b\u5916\u7684\u6240\u6709\u5bc4\u5b58\u5668\u6a21\u5f0f\uff0c\u53e6\u4e00\u7ec4\u7528\u4e8eFIQ\u6a21\u5f0f\uff0c\u76ee\u7684\uff1a\u53d1\u751fFIQ\u4e2d\u65ad\u65f6\uff0c\u53ef\u4ee5\u52a0\u901fFIQ\u7684\u5904\u7406\u901f\u5ea6\uff0c\u89e3\u91ca\uff1a\u4e13\u95e8\u4e3aFIQ\u4e2d\u65ad\u4fdd\u7559\u4e00\u7ec4\u7279\u5b9a\u5bc4\u5b58\u5668\uff0c\u80fd\u591f\u4fdd\u8bc1\u5728\u53d1\u751fFIQ\u4e2d\u65ad\u65f6\uff0c\u6ca1\u6709\u5176\u4ed6\u6a21\u5f0f\u5360\u7528\u8fd9\u4e00\u5206\u7ec4\u7684\u5bc4\u5b58\u5668(\u6570\u636e\u5360\u7528\uff0c\u5904\u7406\u5668\u53ea\u80fd\u5904\u4e8e\u4e00\u4e2a\u6a21\u5f0f)\uff0c\u53ef\u4ee5\u4f7f\u5f97\u4e2d\u65ad\u5904\u7406\u66f4\u52a0\u8fc5\u901f\uff0c\u56e0\u6b64\u4e5f\u79f0\u4e3a\u5feb\u4e2d\u65ad\u6a21\u5f0f</li> <li>R13$\\sim$R14: \u67096\u4e2a\u5206\u7ec4\u7684\u5bc4\u5b58\u5668\uff0c\u4e00\u4e2a\u7528\u4e8e\u7528\u6237\u4e0e\u7cfb\u7edf\u6a21\u5f0f\uff0c\u5176\u4f595\u4e2a\u5206\u522b\u7528\u4e8e5\u4e2d\u5f02\u5e38\u6a21\u5f0f\uff0c\u89e3\u91ca\uff1a\u5bc4\u5b58\u5668\u8bbe\u7f6e\u4e5f\u540c\u7406\uff0c\u5f02\u5e38\u6a21\u5f0f\u4e0b\uff0c\u6bcf\u5f53\u53d1\u751f\u7279\u5b9a\u5f02\u5e38\u65f6\uff0c\u5904\u7406\u5668\u9700\u8981\u8fdb\u884c\u5f02\u5e38\u5904\u7406\uff0c\u9700\u8981\u4fdd\u8bc1\u5b58\u5728\u76f8\u5e94\u7684\u5bc4\u5b58\u5668\u80fd\u591f\u4e3a\u4e4b\u63d0\u4f9b\u670d\u52a1\uff0c\u800c\u4e0d\u81f3\u4e8e\u88ab\u5176\u4ed6\u6a21\u5f0f\u6240\u5360\u7528</li> <li>R13: \u5806\u6808\u6307\u9488\u5bc4\u5b58\u5668\uff0c\u5e38\u4f5c\u4e3a\u5806\u6808\u6307\u9488(SP)<ul> <li>\u4e0d\u4e25\u8c28\u89e3\u91ca: \u7528\u6237\u548c\u7cfb\u7edf\u6a21\u5f0f\u5171\u7528\u540c\u4e00R13\uff0c\u5b58\u653e\u7a0b\u5e8f\u7684\u6307\u4ee4\u4ee3\u7801\u4ee5\u53ca\u5176\u4ed6\u6570\u636e\uff1b\u5f02\u5e38\u6a21\u5f0f\u5177\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u7269\u7406\u5bc4\u5b58\u5668R13\uff1a\u5f53\u7a0b\u5e8f\u8fdb\u5165\u4e0d\u540c\u7684\u5f02\u5e38\u6a21\u5f0f\u65f6\uff0c\u53ef\u4ee5\u5c06\u9700\u8981\u4fdd\u62a4\u7684\u5bc4\u5b58\u5668\u653e\u5165\u5bf9\u5e94\u7684R13\u6240\u6307\u5411\u7684\u5806\u6808\u4e2d\uff0c\u5f53\u7a0b\u5e8f\u4ece\u5f02\u5e38\u6a21\u5f0f\u8fd4\u56de\u65f6\uff0c\u5219\u4ece\u5bf9\u5e94\u7684\u5806\u6808\u4e2d\u6062\u590d\uff0c</li> <li>\u521d\u59cb\u5316\u8981\u6c42\uff1a\u9700\u8981\u521d\u59cb\u5316\u6bcf\u79cd\u6a21\u5f0f\u4e0b\u7684R13</li> </ul> </li> <li>R14: \u94fe\u63a5\u5bc4\u5b58\u5668(LR)\uff0c\u6a21\u5f0f\u672c\u8eab\u7684R14\u7528\u4e8e\u4fdd\u5b58\u5b50\u7a0b\u5e8f\u8fd4\u56de\u5730\u5740\uff1b\u8fdb\u5165\u5f02\u5e38\u6a21\u5f0f\u65f6\u5bf9\u5e94\u7684R14\u7528\u4e8e\u4fdd\u5b58\u5f02\u5e38\u8fd4\u56de\u5730\u5740<ul> <li>\u5b50\u7a0b\u5e8f\u8c03\u7528\u8fd4\u56de\uff1a\u8c03\u7528\u5b50\u7a0b\u5e8f\u65f6\uff0c\u6307\u4ee4\u5148\u5c06\u4e0b\u4e00\u6761\u6307\u4ee4\u7684PC\u503c\u62f7\u8d1d\u5230R14\uff0c\u6267\u884c\u5b8c\u5b50\u7a0b\u5e8f\u540e\uff0c\u518d\u5c06R14\u7684\u503c\u62f7\u8d1d\u5230PC\uff0c\u4ece\u800c\u5b9e\u73b0\u5b50\u7a0b\u5e8f\u7684\u8fd4\u56de</li> <li>\u5f02\u5e38\u5904\u7406\u7684\u8fd4\u56de</li> </ul> </li> <li>R15: \u7a0b\u5e8f\u8ba1\u6570\u5668(PC)\uff0c\u6307\u5411\u6b63\u5728\u53d6\u6307\u7684\u5730\u5740<ul> <li>ARM\u72b6\u6001\u4e0b\uff0c\u4f4d[1:0]\u4e3a0\uff0c\u4f4d[31:2]\u4fdd\u5b58PC</li> <li>Thumb\u72b6\u6001\u4e0b\uff0c\u4f4d[0]\u4e3a0\uff0c\u4f4d[31:1]\u4fdd\u5b58PC</li> <li>ARM\u4f53\u7cfb\u7ed3\u6784\u91c7\u7528\u591a\u7ea7\u6d41\u6c34\u7ebf\u6280\u672f\uff0c\u4f7f\u5f97PC\u503c\u4e3a\u5f53\u524d\u6307\u4ee4\u7684\u5730\u5740\u503c\u52a08\u4e2a\u5b57\u8282</li> </ul> </li> <li>CPSR\u3001SPSR: \u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668\uff0c\u7a0b\u5e8f\u72b6\u6001\u4fdd\u5b58\u5bc4\u5b58\u5668\uff0cSPSR\u4ec5\u5728\u5f02\u5e38\u6a21\u5f0f\u4e0b\u80fd\u591f\u88ab\u8bbf\u95ee: \u8fdb\u5165\u5f02\u5e38\u6a21\u5f0f\u65f6\uff0cSPSR\u4fdd\u5b58CPSR\u7684\u503c\uff0c\u5f02\u5e38\u8fd4\u56de\u65f6\uff0c\u901a\u8fc7SPSR\u7684\u503c\u6062\u590dCPSR\u7684\u503c</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#thumb_2","title":"Thumb \u72b6\u6001\u4e0b\u7684\u5bc4\u5b58\u5668","text":"<p>\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u7684\u5bc4\u5b58\u5668: 8\u4e2a\u901a\u7528\u5bc4\u5b58\u5668R0$\\sim$R7\uff0c\u7a0b\u5e8f\u8ba1\u6570\u5668(PC)\uff0c\u5806\u6808\u6307\u9488(SP)\uff0c\u94fe\u63a5\u5bc4\u5b58\u5668(LR)\uff0c\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668(CPSR)\uff0c\u7a0b\u5e8f\u72b6\u6001\u4fdd\u5b58\u5bc4\u5b58\u5668(SPSR) </p>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_3","title":"\u7b2c\u56db\u8bb2 ARM \u6307\u4ee4\u7cfb\u7edf","text":""},{"location":"ComputerTheory/EmbeddedSystem/#loadstore","title":"Load/Store \u7ed3\u6784","text":"<ul> <li>\u6240\u6709\u64cd\u4f5c\u6570\u90fd\u5b58\u50a8\u5728\u901a\u7528\u5bc4\u5b58\u5668\u4e2d</li> <li>\u56fe\u89e3: MEM $\\rightarrow$ REG $\\rightarrow$ ALU $\\rightarrow$ MEM</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_4","title":"ARM \u6307\u4ee4","text":"<ul> <li>\u6307\u4ee4\u5206\u7c7b\uff1a\u6570\u636e\u5904\u7406\u6307\u4ee4\uff0cLoad/Store \u6307\u4ee4\uff0c\u8df3\u8f6c\u6307\u4ee4\uff0cCPSR\u5904\u7406\u6307\u4ee4\uff0c\u5f02\u5e38\u4ea7\u751f\u6307\u4ee4\uff0c\u534f\u5904\u7406\u5668\u6307\u4ee4;</li> <li>\u7279\u6b8a\u6307\u4ee4\uff1aCPSR \u5904\u7406\u6307\u4ee4</li> <li>ARM \u72b6\u6001\u4e0b\uff0c\u6307\u4ee4\u6839\u636e CPSR \u4e2d\u6761\u4ef6\u7801\u72b6\u6001\u548c\u6307\u4ee4\u6761\u4ef6\u57df\u6761\u4ef6\u6267\u884c</li> <li>\u5d4c\u5165\u5f0f\u5fae\u5904\u7406\u5668\u6307\u4ee4\u96c6\uff1a\u5f3a\u8c03\u6307\u4ee4\u7684\u7075\u6d3b\u6027\uff0c\u5bf9\u79f0\u6027\uff0c\u7b80\u5355\u6027</li> </ul> <p>\u6307\u4ee4\u7f16\u7801\u8bf4\u660e:</p> <ul> <li>bit $12\\sim15$: 4 bits \u7f16\u7801\u8868\u793a $16$ \u4e2a\u901a\u7528\u5bc4\u5b58\u5668</li> <li>bit $28\\sim31$: \u6307\u4ee4\u6761\u4ef6\u7801\u5360\u636e\u6307\u4ee4\u7684\u9ad8 $4$ bits, \u5e76\u4e14\u6761\u4ef6\u7f16\u7801 \"1111\" \u4e3a\u7cfb\u7edf\u4fdd\u7559</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_5","title":"ARM \u5bfb\u5740\u65b9\u5f0f","text":"<p>{% message color:info size:default%}   \u7406\u89e3ARM\u4e09\u5730\u5740\u6307\u4ee4\u683c\u5f0f\u7684\u7279\u70b9   {% endmessage %} + \u7acb\u5373\u5bfb\u5740: \u64cd\u4f5c\u6570(\u7acb\u5373\u6570)\u5305\u542b\u5728\u6307\u4ee4\u7684 $32$ \u4f4d\u7f16\u7801\u4e2d   {% message color:info size:default%} + \u6307\u4ee4\u8bf4\u660e   + \u53ea\u6709\u7b2c\u4e8c\u6e90\u64cd\u4f5c\u6570\u53ef\u7528\u7acb\u5373\u6570   + \u7acb\u5373\u6570\u4ee5 \"#\" \u4e3a\u524d\u7f00\uff0c\"#\" \u540e\u52a0 \"0x\" \u6216 \"&amp;\" \u8868\u793a\u5341\u516d\u8fdb\u5236\uff0c\"0b\" \u8868\u793a\u4e8c\u8fdb\u5236\uff0c\"0d\" \u6216\u7f3a\u7701\u8868\u793a\u5341\u8fdb\u5236 + Example   + ADD R$0$, R$0$, #$1$   + AND R$3$, R$4$, #$0$xFF     {% endmessage %}</p> <p>{% message color:info title:\u7acb\u5373\u6570\u7684\u8868\u793a size:default%}</p> <ul> <li>\u6307\u4ee4\u4e2d\u7acb\u5373\u6570\u7f16\u7801\u6bd4\u7279\u4f4d: $12$\u4f4d</li> <li> <p>\u6269\u6563\u6570\u636e\u8868\u793a\u8303\u56f4: $12$ \u4f4d\u6570\u636e\u8868\u793a $32$ \u4f4d\u6570\u636e\u7a7a\u95f4</p> </li> <li> <p>\u7acb\u5373\u6570\u7ec4\u6210: $8$(\u5e38\u6570) $+$(\u5076\u6570\u79fb\u4f4d\u4e2a\u6570)$=12$</p> </li> <li>\u79fb\u4f4d\u65b9\u5f0f: \u5faa\u73af\u53f3\u79fb</li> <li>\u7279\u70b9: \u6240\u6709\u6709\u6548\u4f4d\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e $8$ \u4f4d\uff0c\u53f3\u79fb\u4f4d\u6570\u5fc5\u987b\u4e3a\u5076\u6570</li> <li>\u6269\u6563\u6570\u636e\u539f\u7406   {% endmessage %}</li> <li>\u5bc4\u5b58\u5668\u5bfb\u5740: \u64cd\u4f5c\u6570\u5728\u5bc4\u5b58\u5668\u4e2d\uff0c\u6307\u4ee4\u5730\u5740\u7801\u5b57\u6bb5\u7f16\u7801\u5bc4\u5b58\u5668\u7f16\u53f7   {% message color:info size:default%}</li> <li> <p>Example</p> </li> <li> <p>MOV R$1$, R$2$           ; R$1$ = (R$2$)</p> </li> <li>SUB R$0$, R$1$, R$2$     ; R$0$ = (R$1$) - (R$2$)     {% endmessage %}</li> <li>\u5bc4\u5b58\u5668\u79fb\u4f4d\u5bfb\u5740: ARM \u6307\u4ee4\u96c6\u7279\u6709\u5bfb\u5740\u65b9\u5f0f\uff0c\u4e3b\u8981\u4e3a\u4e86\u589e\u5f3a\u7cbe\u7b80\u6307\u4ee4\u7684\u6267\u884c\u6548\u7387   {% message color:info size:default%}</li> <li> <p>\u6307\u4ee4\u8bf4\u660e</p> </li> <li> <p>ARM \u79fb\u4f4d\u5bfb\u5740\u4e2d\uff0c\u5728\u53d6\u64cd\u4f5c\u6570\u9001\u5f80ALU\u8fc7\u7a0b\u4e2d\uff0c\u5c31\u5df2\u7ecf\u5728\u603b\u7ebf\u4e0a\u5b8c\u6210\u4e86\u79fb\u4f4d\u8fd0\u7b97\u64cd\u4f5c</p> </li> <li> <p>Example</p> </li> <li> <p>MOV R$0$, R$2$, LSL #3         ; R$0$ = (R$2$) &lt;&lt; 3</p> </li> <li>ANDS R$1$, R$2$, LSL R$3$      ; R$1$ = (R$1$) &amp; (R$2$) &lt;&lt; (R$3$)     {% endmessage %}</li> </ul> <p>{% message color:info title:\u79fb\u4f4d\u65b9\u5f0f size:default%}</p> <ul> <li>LSL(Logical Shift Left)</li> <li>LSR(Logical Shift Right)</li> <li>ASL(Arithmetic Shift Left)</li> <li>ASR(Arithmetic Shift Right)</li> <li>ROR(Rotate Right)</li> <li>RRX(Rotate Right Extended by 1 Place)</li> </ul> <p></p> <p>{% endmessage %}</p> <ul> <li>\u57fa\u5740\u5bfb\u5740: \u5b58\u50a8\u5668\u5730\u5740\u5728\u5bc4\u5b58\u5668\u4e2d   {% message color:info size:default%}</li> <li>\u6307\u4ee4\u8bf4\u660e   \u5bc4\u5b58\u5668\u4e2d\u5b58\u50a8\u7684\u662f\u5b58\u50a8\u5355\u5143\u7684\u5730\u5740</li> <li> <p>Example</p> </li> <li> <p>LDR R$0$, [R$1$]</p> </li> <li>STR R$0$, [R$1$]     {% endmessage %}</li> <li>\u53d8\u5740\u5bfb\u5740: \u57fa\u5740\u5bc4\u5b58\u5668+\u5730\u5740\u504f\u79fb\u91cf {% message color:info size:default%}</li> <li> <p>\u5730\u5740\u504f\u79fb\u91cf</p> </li> <li> <p>\u7acb\u5373\u6570</p> <ul> <li>\u63a7\u5236\u4f4d U=$1$\u65f6\u52a0\u504f\u79fb\u91cf\uff0cU=$0$\u65f6\u51cf\u504f\u79fb\u91cf</li> <li>\u504f\u79fb\u91cf\u5360 $12$ Bit(\u7acb\u5373\u6570)</li> </ul> </li> <li>Example:<ul> <li>LDR R$0$, [R$1$, #4]</li> <li>LDR R$0$, [R$1$, #-4]</li> </ul> </li> <li>\u5bc4\u5b58\u5668<ul> <li>\u63a7\u5236\u4f4d U=$1$\u65f6\u52a0\u7d22\u5f15\u5bc4\u5b58\u5668\u503c\uff0cU=$0$\u65f6\u51cf\u7d22\u5f15\u5bc4\u5b58\u5668\u503c</li> </ul> </li> <li>Example:<ul> <li>LDR R$0$, [R$1$, R$2$]</li> <li>LDR R$0$, [R$1$, -R$2$]</li> </ul> </li> <li>\u5bc4\u5b58\u5668\u53ca\u79fb\u4f4d\u5e38\u6570<ul> <li>\u5730\u5740\u504f\u79fb\u91cf\u7531\u5bc4\u5b58\u5668\u901a\u8fc7\u79fb\u4f4d\u5f97\u5230</li> </ul> </li> <li>Example:<ul> <li>LDR R$0$, [R$1$, R$2$, LSL #2] {% endmessage %}</li> </ul> </li> </ul> <p>{% message color:info title:\u53d8\u5740\u6a21\u5f0f size:default%} \u524d\u53d8\u5740\u6a21\u5f0f + LDR R$0$, [R$1$, #$4$]        ; R$0$ = Mem$32$[R$1$+$4$]</p> <p>\u81ea\u52a8\u53d8\u5740\u6a21\u5f0f(\u4e8b\u5148\u66f4\u65b0\u65b9\u5f0f)</p> <ul> <li>LDR R$0$, [R$1$, #$4$]!        ; R$0$ = Mem$32$[R$1$+$4$], R$1$ = R$1$ + $4$</li> </ul> <p>\u540e\u53d8\u5740\u6a21\u5f0f(\u4e8b\u540e\u66f4\u65b0\u65b9\u5f0f)</p> <ul> <li>LDR R$0$, [R$1$], #$4$        ; R$0$ = Mem$32$[R$1$], R$1$ = R$1$ + $4$ {% endmessage %} 3\u79cd\u5730\u5740\u504f\u79fb\u683c\u5f0f\u4e0e3\u79cd\u53d8\u5740\u6a21\u5f0f\uff0c\u53ef\u4ee5\u7ec4\u5408\u51fa9\u79cd\u7c7b\u578b\u7684\u53d8\u5740\u5bfb\u5740\u65b9\u5f0f\u3002</li> <li>\u76f8\u5bf9\u5bfb\u5740: \u57fa\u5740\u5bc4\u5b58\u5668\u662f\u7a0b\u5e8f\u8ba1\u6570\u5668 PC   {% message color:info size:default%}</li> <li>\u4e3b\u8981\u7528\u4e8e\u5206\u652f\u6307\u4ee4</li> <li>Example</li> </ul> <pre><code>    BL SUBR       ; jump to SUBR\nSUBR              ; entry of subprogram\n    ....\n    MOV PC, R14\n</code></pre> <p>{% endmessage %}</p> <ul> <li>\u5757\u62f7\u8d1d\u5bfb\u5740   {% message color:info size:default%}</li> <li>\u591a\u5bc4\u5b58\u5668\u4f20\u9001\u6307\u4ee4 LDM/STM \u7684\u5bfb\u5740\u65b9\u5f0f</li> <li>\u5bc4\u5b58\u5668\u7ec4\u53ef\u4ee5\u662f $16$ \u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u7684\u4efb\u610f\u5b50\u96c6</li> <li>\u5730\u5740\u589e\u957f\u987a\u5e8f: IA(Increment After), IB(Increment Before), DA(Decrement After), DB(Decrement Before)</li> <li>Example </li> </ul> <p>{% endmessage %}</p> <ul> <li>\u5806\u6808\u5bfb\u5740   {% message color:info size:default%}</li> <li>\u5806\u6808\u5f62\u5f0f</li> <li>\u6ee1\u9012\u589e(\u6307\u4ee4\uff1aLDMFA, STMFA)</li> <li>\u7a7a\u9012\u589e(\u6307\u4ee4\uff1aLDMEA, STMEA)</li> <li>\u6ee1\u9012\u51cf(\u6307\u4ee4\uff1aLDMFD, STMFD)</li> <li>\u7a7a\u9012\u51cf(\u6307\u4ee4\uff1aLDMFD, STMFD)     \u6ce8\uff1aFD(Full Decrement), ED(Empty Decrement), FA(Full Aggrandizement), EA(Empty AdvanceAggrandizement)</li> <li>Example</li> <li>ARM\u6307\u4ee4\u4e2d\u7684\u5806\u6808<ul> <li>STMFD SP!, {R$1$-R$7$, LR}</li> <li>LDMFD SP!, {R$1$-R$7$, LR}</li> </ul> </li> <li>Thumb\u6307\u4ee4\u4e2d\u7684\u5806\u6808<ul> <li>PUSH {R1-R7, LR}</li> <li>POP {R1-R7, PC} {% endmessage %}</li> </ul> </li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_6","title":"ARM \u6307\u4ee4\u96c6\u6982\u8ff0","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_18","title":"\u6570\u636e\u5904\u7406\u6307\u4ee4","text":"<ol> <li>\u4e3b\u8981\u5b8c\u6210\u5bc4\u5b58\u5668\u4e2d\u6570\u636e\u7684\u7b97\u672f\u548c\u903b\u8f91\u8fd0\u7b97\u64cd\u4f5c</li> <li>\u6570\u636e\u5bbd\u5ea6\uff1a\u6240\u6709\u64cd\u4f5c\u6570\u90fd\u662f $32$ \u4f4d\u5bbd\u5ea6</li> </ol>"},{"location":"ComputerTheory/EmbeddedSystem/#loadstore_1","title":"Load/Store \u6307\u4ee4","text":"<p>\u8be5\u7c7b\u6307\u4ee4\u7528\u4e8e\u5bc4\u5b58\u5668\u4e0e\u5185\u5b58\u4e2d\u6570\u636e\u4f20\u9001\uff0c\u56e0\u4e3aALU\u7684\u6570\u636e\u6765\u6e90\u53ea\u80fd\u662f\u5bc4\u5b58\u5668\uff0c\u5bc4\u5b58\u5668\u4e2d\u6570\u636e\u8981\u63d0\u524d\u4ece\u5185\u5b58\u4e2d\u83b7\u53d6\u3002 + \u5355\u5bc4\u5b58\u5668\u5b58\u53d6\u6307\u4ee4(LDR/STR)(Load Register/Store Register)   + \u52a0\u8f7d/\u5b58\u50a8\u5b57/\u534a\u5b57/\u5b57\u8282(32\u4f4d\u5bf9\u9f50/16\u4f4d\u5bf9\u9f50/8\u4f4d\u5bf9\u9f50) + \u591a\u5bc4\u5b58\u5668\u5b58\u53d6\u6307\u4ee4(LDM/STM)(Load Multiple Registers/Store Multiple Registers)   + \u5806\u6808\u64cd\u4f5c\u548c\u5757\u62f7\u8d1d + \u5b58\u50a8\u5668\u4e0e\u5bc4\u5b58\u5668\u4ea4\u6362\u6307\u4ee4SWP</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_19","title":"\u6742\u9879\u6307\u4ee4","text":""},{"location":"ComputerTheory/EmbeddedSystem/#arm_7","title":"\u7b2c\u4e94\u8bb2 ARM \u6307\u4ee4\u8be6\u7ec6\u4ecb\u7ecd","text":"<p>{% message color:info size:default%} \u4f53\u4f1a ARM \u6307\u4ee4\u4f53\u7cfb\u7684\u89c4\u6574\u6027 {% endmessage %}</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_20","title":"\u6570\u636e\u5904\u7406\u6307\u4ee4","text":""},{"location":"ComputerTheory/EmbeddedSystem/#2","title":"\u6570\u636e\u4f20\u9001\u6307\u4ee4(2\u6761)","text":"<ul> <li>MOV   {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: MOV{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u6e90\u64cd\u4f5c\u6570</li> <li>\u6e90\u64cd\u4f5c\u6570: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>S: \u5b58\u5728S\u65f6\u8868\u793a\u66f4\u65b0CPSR\u4e2d\u6761\u4ef6\u6807\u5fd7\u4f4d</li> <li> <p>Example</p> </li> <li> <p>MOV R0, #100</p> </li> <li>MOV R0, R1</li> <li>MOV R0, R1, LSL #2     {% endmessage %}</li> <li>MVN(Move Not) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: MVN{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u6e90\u64cd\u4f5c\u6570</li> <li>\u6e90\u64cd\u4f5c\u6570: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>\u6307\u4ee4\u8bf4\u660e: \u5c06\u6e90\u64cd\u4f5c\u6570\u6309\u4f4d\u53d6\u53cd\u4f20\u9001\u5230\u76ee\u7684\u5bc4\u5b58\u5668\uff0c\u5b9e\u73b0\u903b\u8f91\u975e</li> <li>S: \u5b58\u5728S\u65f6\u8868\u793a\u66f4\u65b0CPSR\u4e2d\u6761\u4ef6\u6807\u5fd7\u4f4d</li> <li>Example</li> <li>MVN R0, #0  ; \u5bc4\u5b58\u5668\u7f6e1\u64cd\u4f5c {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#6","title":"\u7b97\u672f\u8fd0\u7b97\u6307\u4ee4(6\u6761)","text":"<p>\u4e09\u5730\u5740\u6307\u4ee4\u683c\u5f0f</p> <ul> <li>ADD {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: ADD{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65701 + \u64cd\u4f5c\u65702</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example</li> <li>ADD R0, R1, R2</li> <li>ADD R0, R1, #100</li> <li> <p>ADD R0, R1, R2 LSL #1 {% endmessage %}</p> </li> <li> <p>ADC {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: ADC{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65701 + \u64cd\u4f5c\u65702 + CF</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example: 128\u4f4d\u6570\u52a0\u6cd5</li> <li>; 128Num1: R7-R4, 128Num2: R11-R8, 128Sum: R3-R0</li> <li>ADDS R0, R4, R8    ; \u52a0\u4f4e\u4f4d\u7684\u5b57</li> <li>ADCS R1, R5, R9    ; \u52a0\u7b2c\u4e8c\u4e2a\u5b57\uff0c\u5e26\u8fdb\u4f4d</li> <li>ADCS R2, R6, R10   ; \u52a0\u7b2c\u4e09\u4e2a\u5b57\uff0c\u5e26\u8fdb\u4f4d</li> <li> <p>ADC  R3, R7, R11   ; \u52a0\u9ad88\u4f4d\uff0c\u5e26\u8fdb\u4f4d {% endmessage %}</p> </li> <li> <p>SUB {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: SUB{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65701 - \u64cd\u4f5c\u65702</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example:</li> <li>SUB R0, R1, R2</li> <li>SUB R0, R1, #256</li> <li> <p>SUB R0, R1, R2 LSL #1 {% endmessage %}</p> </li> <li> <p>SBC {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: SBC{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65701 - \u64cd\u4f5c\u65702 - $\\overline{CF}$</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example: 64\u4f4d\u6570\u51cf\u6cd5</li> <li>; 64Num1: R1-R0, 64Num2: R3-R2, 64Sub: R1-R0</li> <li>SUBS R0, R0, R2    ; \u52a0\u4f4e\u4f4d\u7684\u5b57</li> <li>SBC R1, R1, R3    ; \u52a0\u7b2c\u4e8c\u4e2a\u5b57\uff0c\u5e26\u8fdb\u4f4d </li> </ul> <p>\u6ce8\u89e3: \u5047\u8bbeR3-R0\u4e3a4\u4f4d\u5bc4\u5b58\u5668\uff0c\u505a\u51cf\u6cd5: 46H-24H;  + 6H-4H = [6H]\u8865 + [-4H]\u8865 = 0110B + 1100B = 0010B $\\Rightarrow$ R0 = 2H with CF = 1 (\u6570\u636e\u6709\u6ea2\u51fa)  + 4H-2H-$\\overline{CF}$ = [4H]\u8865 + [-2H]\u8865 = 0100B + 1110B = 0010B $\\Rightarrow$ R1 = 2H with CF = 1 (\u6570\u636e\u6709\u6ea2\u51fa) {% endmessage %}</p> <ul> <li>RSB(Reverse Subtract) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: RSB{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65702 - \u64cd\u4f5c\u65701</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example:</li> <li>RSB R0, R1, R2</li> <li>RSB R0, R1, #256</li> <li> <p>RSB R0, R1, R2 LSL #1 {% endmessage %}</p> </li> <li> <p>RSC {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: RSC{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65702 - \u64cd\u4f5c\u65701 - CF</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example: 64\u4f4d\u6570\u51cf\u6cd5</li> <li>; 64Num1: R1-R0, 64Num2: 0, 64Sub: R3-R2</li> <li>RSBS R2, R0, #0</li> <li>RSC R3, R1, #0 {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#4","title":"\u903b\u8f91\u8fd0\u7b97\u6307\u4ee4(4\u6761)","text":"<ul> <li>AND {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: AND{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65701 &amp; \u64cd\u4f5c\u65702</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example: \u5c4f\u853d\u64cd\u4f5c\u65701\u7684\u67d0\u4e9b\u4f4d</li> <li> <p>AND R1, R1, #3 {% endmessage %}</p> </li> <li> <p>ORR {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: ORR{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65701 | \u64cd\u4f5c\u65702</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example: \u8bbe\u7f6e\u64cd\u4f5c\u65701\u7684\u67d0\u4e9b\u4f4d</li> <li> <p>ORR R0, R0, #3 {% endmessage %}</p> </li> <li> <p>EOR {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: EOR{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = \u64cd\u4f5c\u65701 ^ \u64cd\u4f5c\u65702</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example: \u53cd\u8f6c\u64cd\u4f5c\u65701\u7684\u67d0\u4e9b\u4f4d</li> <li> <p>EOR R0, R0, #3   ; \u4f4e\u4f4d\u53cd\u8f6c {% endmessage %}</p> </li> <li> <p>BIC {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: BIC{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u6e05\u9664\u64cd\u4f5c\u65701\u7684\u67d0\u4e9b\u4f4d\uff0c\u64cd\u4f5c\u65702\u4f5c\u4e3a\u64cd\u4f5c\u65701\u7684\u63a9\u7801\uff0c\u5982\u679c\u64cd\u4f5c\u65702\u7f6e\u4f4d\uff0c\u5219\u6e05\u9664\u64cd\u4f5c\u65701\u5bf9\u5e94\u4f4d</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u88ab\u79fb\u4f4d\u7684\u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example:</li> <li>BIC R0, R0, #3   ; \u6e05\u9664\u4f4e\u4e24\u4f4d {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#2_1","title":"\u6bd4\u8f83\u6307\u4ee4(2\u6761)","text":"<ul> <li>CMP {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: CMP{\u6761\u4ef6} \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u64cd\u4f5c\u65701-\u64cd\u4f5c\u65702=\u64cd\u4f5c\u65701+[-\u64cd\u4f5c\u65702]\u8865\u7801=\u64cd\u4f5c\u65701+[\u64cd\u4f5c\u65702]\u6c42\u8865\uff0c\u4e0d\u5b58\u50a8\u7ed3\u679c\uff0c\u53ea\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example:</li> <li>CMP R1, R0</li> <li> <p>CMP R1, #100 {% endmessage %}</p> </li> <li> <p>CMN {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: CMN{\u6761\u4ef6} \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u64cd\u4f5c\u65701-[\u64cd\u4f5c\u65702]\u6c42\u8865=\u64cd\u4f5c\u65701+[-[\u64cd\u4f5c\u65702]\u6c42\u8865]\u8865\u7801=\u64cd\u4f5c\u65701+[[\u64cd\u4f5c\u65702]\u6c42\u8865]\u6c42\u8865=\u64cd\u4f5c\u65701+\u64cd\u4f5c\u65702\uff0c\u4e0d\u5b58\u50a8\u7ed3\u679c\uff0c\u53ea\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example:</li> <li>CMN R1, R0</li> <li>CMN R1, #100 {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#2_2","title":"\u6d4b\u8bd5\u6307\u4ee4(2\u6761)","text":"<ul> <li>TST {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: TST{\u6761\u4ef6} \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u64cd\u4f5c\u65701 &amp; \u64cd\u4f5c\u65702\uff0c\u4e0d\u5b58\u50a8\u7ed3\u679c\uff0c\u53ea\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d(ZF); \u64cd\u4f5c\u65702\u4e00\u822c\u4f5c\u4e3a\u4f4d\u63a9\u7801</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example:</li> <li>TST R1, #1     ; \u6d4b\u8bd5\u6700\u4f4e\u4f4d\u662f\u5426\u4e3a1</li> <li> <p>TST R1, #0xffe {% endmessage %}</p> </li> <li> <p>TEQ {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: TEQ{\u6761\u4ef6} \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u64cd\u4f5c\u65701 ^ \u64cd\u4f5c\u65702\uff0c\u4e0d\u5b58\u50a8\u7ed3\u679c\uff0c\u53ea\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d(ZF); \u901a\u5e38\u7528\u4e8e\u6bd4\u8f83\u64cd\u4f5c\u65701\u548c\u64cd\u4f5c\u65702\u662f\u5426\u76f8\u7b49</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668\u3001\u7acb\u5373\u6570</li> <li>Example:</li> <li>TEQ R1, R2 {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#6_1","title":"\u4e58\u6cd5\u6307\u4ee4(6\u6761)","text":"<ul> <li>MUL(32\u4f4d\u6709\u7b26\u53f7\u6216\u65e0\u7b26\u53f7\u4e58\u6cd5) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: MUL{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = [\u64cd\u4f5c\u65701 * \u64cd\u4f5c\u65702][31...0]\uff0c\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668</li> <li>Example:</li> <li>MUL R0, R1, R2</li> <li> <p>MULS R0, R1, R2 {% endmessage %}</p> </li> <li> <p>MLA(32\u4f4d\u6709\u7b26\u53f7\u6216\u65e0\u7b26\u53f7\u4e58\u52a0\u6cd5, Mulliply Add) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: MLA{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702, \u64cd\u4f5c\u65703</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = [\u64cd\u4f5c\u65701 * \u64cd\u4f5c\u65702 + \u64cd\u4f5c\u65703][31...0]\uff0c\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: \u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: \u5bc4\u5b58\u5668</li> <li>Example:</li> <li>MLA R0, R1, R2, R3</li> <li> <p>MLAS R0, R1, R2, R3 {% endmessage %}</p> </li> <li> <p>SMULL(64\u4f4d\u6709\u7b26\u53f7\u6570\u4e58\u6cd5, Signed Mulliply Long) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: SMULL{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668Low, \u76ee\u7684\u5bc4\u5b58\u5668High, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = [\u64cd\u4f5c\u65701 * \u64cd\u4f5c\u65702][63...0]\uff0c\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>Example:</li> <li>SMULL R0, R1, R2, R3  ; R0(Low32) = (R2R3)(Low32), R1(High32) = (R2R3)(High32)</li> <li> <p>SMULLS R0, R1, R2, R3 {% endmessage %}</p> </li> <li> <p>SMLAL(64\u4f4d\u6709\u7b26\u53f7\u6570\u4e58\u52a0\u6cd5, Signed Mulliply ADD Long) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: SMLAL{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668Low, \u76ee\u7684\u5bc4\u5b58\u5668High, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = [\u64cd\u4f5c\u65701 * \u64cd\u4f5c\u65702 + \u76ee\u7684\u5bc4\u5b58\u5668][63...0]\uff0c\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>Example:</li> <li>SMLAL R0, R1, R2, R3  ; R0(Low32) = (R2R3)(Low32) + R0(Low32), R1(High32) = (R2R3)(High32) + R1(High32)</li> <li> <p>SMLALS R0, R1, R2, R3 {% endmessage %}</p> </li> <li> <p>UMULL(64\u4f4d\u65e0\u7b26\u53f7\u6570\u4e58\u6cd5, Unsigned Mulliply Long) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: UMULL{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668Low, \u76ee\u7684\u5bc4\u5b58\u5668High, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = [\u64cd\u4f5c\u65701 * \u64cd\u4f5c\u65702][63...0]\uff0c\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>Example:</li> <li>UMULL R0, R1, R2, R3  ; R0(Low32) = (R2R3)(Low32), R1(High32) = (R2R3)(High32)</li> <li> <p>UMULLS R0, R1, R2, R3 {% endmessage %}</p> </li> <li> <p>UMLAL(64\u4f4d\u65e0\u7b26\u53f7\u6570\u4e58\u52a0\u6cd5, Unsigned Mulliply ADD Long) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: UMLAL{\u6761\u4ef6}{S} \u76ee\u7684\u5bc4\u5b58\u5668Low, \u76ee\u7684\u5bc4\u5b58\u5668High, \u64cd\u4f5c\u65701, \u64cd\u4f5c\u65702</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = [\u64cd\u4f5c\u65701 * \u64cd\u4f5c\u65702 + \u76ee\u7684\u5bc4\u5b58\u5668][63...0]\uff0c\u5f71\u54cdCPSR\u4e2d\u6807\u5fd7\u4f4d</li> <li>\u64cd\u4f5c\u65701: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>\u64cd\u4f5c\u65702: 32\u4f4d\u5bc4\u5b58\u5668</li> <li>Example:</li> <li>UMLAL R0, R1, R2, R3  ; R0(Low32) = (R2R3)(Low32) + R0(Low32), R1(High32) = (R2R3)(High32) + R1(High32)</li> <li>UMLALS R0, R1, R2, R3 {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#loadstore_2","title":"Load/Store\u6307\u4ee4","text":"<p>ARM\u4e2d\u7528\u4e8e\u5728\u5bc4\u5b58\u5668\u548c\u5b58\u50a8\u5668\u4e4b\u95f4\u4f20\u9001\u6570\u636e\u7684\u6307\u4ee4</p>"},{"location":"ComputerTheory/EmbeddedSystem/#6_2","title":"\u5355\u5bc4\u5b58\u5668\u5b58\u53d6\u6307\u4ee4(6\u6761)","text":"<ul> <li>LDR(\u5b57\u6570\u636e\u52a0\u8f7d\u6307\u4ee4) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: LDR{\u6761\u4ef6} \u76ee\u7684\u5bc4\u5b58\u5668, &lt;\u5b58\u50a8\u5668\u5730\u5740&gt;</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668 = Mem[Address]\u2014\u201432\u4f4d\u5b57\u6570\u636e</li> <li>Example:</li> <li>LDR R0, [R1]  ;  R0 = Mem[R1]</li> <li>LDR R0, [R1, R2]    ; R0 = Mem[R1+R2]</li> <li>LDR R0, [R1, #4]    ; R0 = Mem[R1+4]</li> <li> <p>LDR R0, [R1, R2]!   ; R0 = Mem[R1+R2], R1 = R1 + R2 {% endmessage %}</p> </li> <li> <p>LDRB(\u5b57\u8282\u6570\u636e\u52a0\u8f7d\u6307\u4ee4) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: LDR{\u6761\u4ef6}B \u76ee\u7684\u5bc4\u5b58\u5668, &lt;\u5b58\u50a8\u5668\u5730\u5740&gt;</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668[7...0] = Mem[Address]\u2014\u20148\u4f4d\u5b57\u8282\u6570\u636e, \u76ee\u7684\u5bc4\u5b58\u5668[31...8] = 0</li> <li>Example:</li> <li>LDRB R0, [R1]       ;  R0 = Mem[R1]</li> <li> <p>LDRB R0, [R1, #8]   ; R0 = Mem[R1+8] {% endmessage %}</p> </li> <li> <p>LDRH(\u534a\u5b57\u6570\u636e\u52a0\u8f7d\u6307\u4ee4) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: LDR{\u6761\u4ef6}H \u76ee\u7684\u5bc4\u5b58\u5668, &lt;\u5b58\u50a8\u5668\u5730\u5740&gt;</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668[15...0] = Mem[Address]\u2014\u201416\u4f4d\u5b57\u8282\u6570\u636e, \u76ee\u7684\u5bc4\u5b58\u5668[31...16] = 0</li> <li>Example:</li> <li>LDRB R0, [R1]       ;  R0 = Mem[R1]</li> <li> <p>LDRB R0, [R1, #8]   ; R0 = Mem[R1+8] {% endmessage %}</p> </li> <li> <p>STR(\u5b57\u6570\u636e\u5b58\u50a8\u6307\u4ee4) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: STR{\u6761\u4ef6} \u6e90\u5bc4\u5b58\u5668, &lt;\u5b58\u50a8\u5668\u5730\u5740&gt;</li> <li>\u6307\u4ee4\u8bf4\u660e: Mem[Address] = \u6e90\u5bc4\u5b58\u5668\u2014\u201432\u4f4d\u5b57\u6570\u636e</li> <li>Example:</li> <li>STR R0, [R1], #8    ; Mem[R1] = R0, R1 = R1 + 8</li> <li>STR R0, [R1, #4]    ; Mem[R1+4] = R0</li> <li> <p>STR R0, [R1, R2]!   ; Mem[R1+R2] = R0, R1 = R1 + R2 {% endmessage %}</p> </li> <li> <p>STRB(\u5b57\u8282\u6570\u636e\u5b58\u50a8\u6307\u4ee4) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: STR{\u6761\u4ef6}B \u6e90\u5bc4\u5b58\u5668, &lt;\u5b58\u50a8\u5668\u5730\u5740&gt;</li> <li>\u6307\u4ee4\u8bf4\u660e: Mem[Address] = \u6e90\u5bc4\u5b58\u5668Low8\u2014\u20148\u4f4d\u5b57\u8282\u6570\u636e</li> <li>Example:</li> <li>STRB R0, [R1]        ; Mem[R1] = R0(Low8)</li> <li> <p>STRB R0, [R1, #8]    ; Mem[R1+8] = R0(Low8) {% endmessage %}</p> </li> <li> <p>STRH(\u534a\u5b57\u6570\u636e\u5b58\u50a8\u6307\u4ee4) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: STR{\u6761\u4ef6}H \u6e90\u5bc4\u5b58\u5668, &lt;\u5b58\u50a8\u5668\u5730\u5740&gt;</li> <li>\u6307\u4ee4\u8bf4\u660e: Mem[Address] = \u6e90\u5bc4\u5b58\u5668Low16\u2014\u201416\u4f4d\u534a\u5b57\u6570\u636e</li> <li>Example:</li> <li>STRH R0, [R1]        ; Mem[R1] = R0(Low16)</li> <li>STRH R0, [R1, #8]    ; Mem[R1+8] = R0(Low16) {% endmessage %} {% message color:info size:default%} Check Point: Load/Store\u6307\u4ee4\u7684\u57fa\u5740\u5bfb\u5740\u4e8e\u53d8\u5740\u53d8\u5740 {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#2_3","title":"\u591a\u5bc4\u5b58\u5668\u5b58\u53d6\u6307\u4ee4(2\u6761)","text":"<p>ARM\u4e2d\u652f\u6301\u7684\u6279\u91cf\u6570\u636e\u52a0\u8f7d/\u5b58\u50a8\u6307\u4ee4\u53ef\u4ee5\u4e00\u6b21\u5728\u4e00\u7247\u8fde\u7eed\u7684\u5b58\u50a8\u5668\u5355\u5143\u548c\u591a\u4e2a\u5bc4\u5b58\u5668\u4e4b\u95f4\u4f20\u9001\u6570\u636e\uff0c\u901a\u5e38\u7528\u4e8e\u5806\u6808\u64cd\u4f5c + STM(\u6279\u91cf\u6570\u636e\u5b58\u50a8\u6307\u4ee4) {% message color:info size:default%} + \u6307\u4ee4\u683c\u5f0f: STM{\u6761\u4ef6}{\u7c7b\u578b} \u57fa\u5740\u5bc4\u5b58\u5668{!}, \u5bc4\u5b58\u5668\u5217\u8868{^} + \u6307\u4ee4\u8bf4\u660e: \u591a\u4e2a\u5bc4\u5b58\u5668\u4e2d\u5b57\u6570\u636e\u4f20\u9001\u5230\u57fa\u5740\u5bc4\u5b58\u5668\u6307\u5411\u7684\u8fde\u7eed\u5b58\u50a8\u5668\u5355\u5143\u4e2d + \u7c7b\u578b\u2014\u2014\u5730\u5740\u589e\u957f\u987a\u5e8f: IA(Increment After), IB(Increment Before), DA(Decrement After), DB(Decrement Before)   </p> <ul> <li>Example:</li> <li> <p>STMFD R0!, {r1-r4} {% endmessage %}</p> </li> <li> <p>LDM(\u6279\u91cf\u6570\u636e\u52a0\u8f7d\u6307\u4ee4) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: LDM{\u6761\u4ef6}{\u7c7b\u578b} \u57fa\u5740\u5bc4\u5b58\u5668{!}, \u5bc4\u5b58\u5668\u5217\u8868{^}</li> <li>\u6307\u4ee4\u8bf4\u660e: \u57fa\u5740\u5bc4\u5b58\u5668\u6307\u5411\u7684\u8fde\u7eed\u5b58\u50a8\u5668\u5355\u5143\u4e2d\u5b57\u6570\u636e\u4f20\u9001\u5230\u591a\u4e2a\u5bc4\u5b58\u5668\u4e2d</li> <li>Example:</li> <li>LDMFD R0!, {r1-r4}      {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#2_4","title":"\u5b58\u50a8\u5668\u548c\u5bc4\u5b58\u5668\u4ea4\u6362\u6307\u4ee4(2\u6761)","text":"<p>\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u4fe1\u53f7\u91cf\u64cd\u4f5c\uff0c\u4fe1\u53f7\u91cf\u7528\u4e8e\u8fdb\u7a0b\u7684\u540c\u6b65\u4e0e\u4e92\u65a5</p> <ul> <li>SWP {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: SWP{\u6761\u4ef6} \u76ee\u7684\u5bc4\u5b58\u5668, \u6e90\u5bc4\u5b58\u56681, [\u6e90\u5bc4\u5b58\u56682]</li> <li>\u6307\u4ee4\u8bf4\u660e: \u76ee\u7684\u5bc4\u5b58\u5668=Mem[\u6e90\u5bc4\u5b58\u56682]\uff0cMem[\u6e90\u5bc4\u5b58\u56682] = \u6e90\u5bc4\u5b58\u56681 </li> <li>Example: \u5bc4\u5b58\u5668\u548c\u5b58\u50a8\u5668\u4ea4\u6362</li> <li>SWP R0, R0, [R2]  {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_21","title":"\u8df3\u8f6c\u6307\u4ee4","text":""},{"location":"ComputerTheory/EmbeddedSystem/#arm_8","title":"ARM\u7a0b\u5e8f\u8df3\u8f6c\u6982\u8ff0","text":"<ul> <li>PC\u5bc4\u5b58\u5668\u4e2d\u5199\u5165\u76ee\u6807\u5730\u5740\u503c</li> <li>\u5b9e\u73b04GB\u5730\u5740\u7a7a\u95f4\u7684\u4efb\u610f\u8df3\u8f6c</li> <li>\u8df3\u8f6c\u6307\u4ee4\u5b9e\u73b0</li> <li>\u5411\u524d\u6216\u5411\u540e32MB\u5730\u5740\u7a7a\u95f4\u8df3\u8f6c</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_9","title":"ARM\u7a0b\u5e8f\u8df3\u8f6c","text":"<ul> <li>B(Branch) \u5206\u652f\u8df3\u8f6c\u6307\u4ee4\uff0c\u6839\u636e\u6761\u4ef6\u8fdb\u884c\u5206\u652f\u8df3\u8f6c</li> <li>B{\u6761\u4ef6} \u76ee\u6807\u5730\u5740</li> <li>\u4e0d\u52a0\u6761\u4ef6\u65f6\uff0c\u8868\u793a\u65e0\u6761\u4ef6\u8df3\u8f6c\u6307\u4ee4</li> <li>BL(Branch with Link) \u5206\u652f\u94fe\u63a5\u6307\u4ee4</li> <li>BL{\u6761\u4ef6} \u76ee\u6807\u5730\u5740</li> <li>\u5c06\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u5730\u5740\u62f7\u8d1d\u5230\u94fe\u63a5\u5bc4\u5b58\u5668(R14/LR)\u4e2d\uff0c\u7136\u540e\u8df3\u8f6c\u5230\u6307\u5b9a\u7684\u5730\u5740\u8fd0\u884c\u7a0b\u5e8f</li> <li>BX(Branch and eXchange) \u5206\u652f\u4ea4\u6362\u6307\u4ee4</li> <li>BX{\u6761\u4ef6} \u76ee\u6807\u5730\u5740</li> <li>\u5e26\u72b6\u6001\u5207\u6362\u7684\u8df3\u8f6c\u6307\u4ee4\uff0c\u5177\u4f53\u72b6\u6001\u6709\u76ee\u6807\u5bc4\u5b58\u5668\u6700\u4f4e\u4f4d\u51b3\u5b9a</li> <li>BLX(Branch with Link and eXchange) \u5206\u652f\u94fe\u63a5\u4ea4\u6362\u6307\u4ee4</li> <li>BLX \u76ee\u6807\u5730\u5740</li> <li>\u5e26\u72b6\u6001\u5207\u6362\u7684\u5206\u652f\u94fe\u63a5\u6307\u4ee4</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_22","title":"\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668\u8bbf\u95ee\u6307\u4ee4","text":"<p>\u7528\u4e8e\u5728\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668(CPSR/SPSR)\u548c\u901a\u7528\u5bc4\u5b58\u5668\u4e4b\u95f4\u4f20\u9001\u6570\u636e + MRS {% message color:info size:default%} + \u6307\u4ee4\u683c\u5f0f: MRS{\u6761\u4ef6} \u901a\u7528\u5bc4\u5b58\u5668, \u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668 + \u6307\u4ee4\u8bf4\u660e: \u72b6\u6001\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u8bfb\u53d6\u5230\u901a\u7528\u5bc4\u5b58\u5668, Rn$\\rightarrow$ CPSR/SPSR + Example:    + \u4e34\u65f6\u4fdd\u5b58\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668\u7684\u5185\u5bb9   + \u5f02\u5e38\u5904\u7406\u6216\u8fdb\u7a0b\u5207\u6362\u65f6\uff0c\u5148\u8bfb\u518d\u5b58\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668\u4e2d\u7684\u503c {% endmessage %}</p> <ul> <li>MSR {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: MSR{\u6761\u4ef6} \u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668_&lt;\u57df&gt;, \u64cd\u4f5c\u6570</li> <li>\u6307\u4ee4\u8bf4\u660e: \u5c06\u64cd\u4f5c\u6570\u7684\u5185\u5bb9\u4f20\u9001\u5230\u72b6\u6001\u5bc4\u5b58\u5668\u7684\u7279\u5b9a\u57df\u4e2d,\u64cd\u4f5c\u6570\u53ef\u4ee5\u4e3a\u901a\u7528\u5bc4\u5b58\u5668\u6216\u7acb\u5373\u6570</li> <li>\u57df\uff1a\u5bf932\u4f4d\u7a0b\u5e8f\u72b6\u6001\u5b57\u5bc4\u5b58\u5668\u7684\u5212\u5206\uff0c\u5206\u4e3a4\u4e2a8\u4f4d\u57df</li> <li>c\u4f4d[7:0]\u4e3a\u63a7\u5236\u4f4d\u57df, \u8868\u793a\u4e3ac</li> <li>x\u4f4d[15:8]\u4e3a\u6269\u5c55\u4f4d\u57df, \u8868\u793a\u4e3ax</li> <li>s\u4f4d[23:16]\u4e3a\u72b6\u6001\u4f4d\u57df, \u8868\u793a\u4e3as</li> <li>f\u4f4d[31:24]\u4e3a\u6761\u4ef6\u6807\u5fd7\u4f4d\u57df, \u8868\u793a\u4e3af</li> <li>Example: </li> <li>MSR CPSR, R0</li> <li>MSR CPSR_c, R0 {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_23","title":"\u5f02\u5e38\u4ea7\u751f\u6307\u4ee4","text":"<ul> <li>SWI \u8f6f\u4ef6\u4e2d\u65ad\u6307\u4ee4</li> <li>BKPT \u65ad\u70b9\u4e2d\u65ad\u6307\u4ee4</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_24","title":"\u534f\u5904\u7406\u5668\u6307\u4ee4","text":""},{"location":"ComputerTheory/EmbeddedSystem/#arm_10","title":"\u7b2c\u516d\u8bb2 ARM\u6c47\u7f16","text":"<p>ARM\u6c47\u7f16\u8bed\u8a00\u6e90\u7a0b\u5e8f\u4e00\u822c\u7531ARM\u6307\u4ee4\u3001\u4f2a\u64cd\u4f5c(\u5305\u62ec\u4f2a\u6307\u4ee4)\u548c\u5b8f\u6307\u4ee4\u7ec4\u6210\uff1b\u5176\u4e2d\u4f2a\u64cd\u4f5c(\u5305\u62ec\u4f2a\u6307\u4ee4)\u662f\u7531\u6c47\u7f16\u5668\u5728\u5bf9\u6e90\u7a0b\u5e8f\u6c47\u7f16\u671f\u95f4\u7531\u6c47\u7f16\u7a0b\u5e8f\u5904\u7406\u7684\u3002</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_25","title":"\u4f2a\u64cd\u4f5c","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_26","title":"\u7b26\u53f7\u5b9a\u4e49\u4f2a\u64cd\u4f5c","text":"<p>\u7528\u4e8e\u5b9a\u4e49ARM\u6c47\u7f16\u7a0b\u5e8f\u4e2d\u7684\u53d8\u91cf\uff0c\u5bf9\u53d8\u91cf\u8d4b\u503c\u548c\u5bc4\u5b58\u5668\u91cd\u547d\u540d + \u5b9a\u4e49\u5168\u5c40\u53d8\u91cf(GBLA(GloBaL Arithmetic), GBLL(GloBaL Logical), GBLS(GloBaL String)) {% message color:info size:default%} + \u6307\u4ee4\u683c\u5f0f: GBLA(GBLL/GBLS) \u5168\u5c40\u53d8\u91cf\u540d + \u6307\u4ee4\u8bf4\u660e: GBLA\u7b97\u672f, GBLL\u903b\u8f91, GBLS\u5b57\u7b26\u4e32 + \u5b9a\u4e49ARM\u7a0b\u5e8f\u4e2d\u5168\u5c40\u53d8\u91cf\u5e76\u521d\u59cb\u5316\u4e3a0 + Example:    + GBLA Test1   + Test1 SETA 0xaa   + GBLL Test2   + Test2 SETL {TRUE}   + GBLS Test3   + Test3 SETS \"Testing\" {% endmessage %}</p> <ul> <li>\u5b9a\u4e49\u5c40\u90e8\u53d8\u91cf(LCLA(LoCaL Arithmetic), LCLL(LoCaL Logical), LCLS(LoCaL String)) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: LCLA(LCLL/LCLS) \u5c40\u90e8\u53d8\u91cf\u540d</li> <li>\u6307\u4ee4\u8bf4\u660e: LCLA\u7b97\u672f, LCLL\u903b\u8f91, LCLS\u5b57\u7b26\u4e32</li> <li>\u5b9a\u4e49ARM\u7a0b\u5e8f\u4e2d\u5c40\u90e8\u53d8\u91cf\u5e76\u521d\u59cb\u5316\u4e3a0</li> <li>Example: </li> <li>LCLA Test1</li> <li>Test1 SETA 0xaa</li> <li>LCLL Test2</li> <li>Test2 SETL {TRUE}</li> <li>LCLS Test3</li> <li> <p>Test3 SETS \"Testing\" {% endmessage %}</p> </li> <li> <p>\u5bf9\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c(SETA(SET Arithmetic), SETL(SET Logical), SETS(SET String)) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: \u53d8\u91cf\u540d SETA(SETL/SETS) \u8868\u8fbe\u5f0f</li> <li>\u6307\u4ee4\u8bf4\u660e: \u4e3a\u5df2\u5b9a\u4e49\u8fc7\u7684\u5168\u5c40\u53d8\u91cf\u6216\u5c40\u90e8\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c</li> <li>Example: </li> <li>LCLA Test1</li> <li>Test1 SETA 0xaa</li> <li>LCLL Test2</li> <li> <p>Test2 SETL {TRUE} {% endmessage %}</p> </li> <li> <p>\u547d\u540d\u901a\u7528\u5bc4\u5b58\u5668\u5217\u8868(RLIST(Register List)) {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: \u540d\u79f0 RLIST {\u5bc4\u5b58\u5668\u5217\u8868}</li> <li>\u6307\u4ee4\u8bf4\u660e: \u7528\u4e8e\u5bf9\u4e00\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u5217\u8868\u5b9a\u4e49\u540d\u79f0\uff0c\u5217\u8868\u4e2d\u5bc4\u5b58\u5668\u8bbf\u95ee\u6b21\u5e8f\u4e3a\u5bc4\u5b58\u5668\u7684\u7f16\u53f7\u7531\u4f4e\u5230\u9ad8</li> <li>Example: </li> <li>Reglist RLIST {R0-R5, R8, R10} {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_27","title":"\u6570\u636e\u5b9a\u4e49\u4f2a\u64cd\u4f5c","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_28","title":"\u6c47\u7f16\u63a7\u5236\u4f2a\u64cd\u4f5c","text":"<p>\u63a7\u5236\u6c47\u7f16\u7a0b\u5e8f\u7684\u6267\u884c\u6d41\u7a0b + IF...ELSE...ENDIF + WHILE...WEND + MACRO...MEND(Macro)   + \u5b8f\u5b9a\u4e49\u4f2a\u64cd\u4f5c\uff0c\u6807\u8bc6\u4e00\u4e2a\u5b8f\u7684\u5f00\u59cb\u4e0e\u7ed3\u675f + MEXIT    + \u4ece\u5b8f\u5b9a\u4e49\u4e2d\u8df3\u8f6c\u51fa\u53bb</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_29","title":"\u4fe1\u606f\u62a5\u544a\u4f2a\u64cd\u4f5c","text":"<ul> <li>ASSERT {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: ASSERT Logical_Expression</li> <li>\u6307\u4ee4\u8bf4\u660e: \u65ad\u8a00\u8868\u8fbe\u5f0f\u6210\u7acb\u5426\u5219\u62a5\u9519\uff0c\u5e76\u4e14\u8be5\u4f2a\u64cd\u4f5c\u5728\u7b2c\u4e8c\u6b21\u626b\u63cf\u6c47\u7f16\u7a0b\u5e8f\u4e2d\u5224\u65ad</li> <li>Example: </li> <li> <p>ASSERT Top&lt;&gt;Temp {% endmessage %}</p> </li> <li> <p>INFO {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: INFO numeric_expr, string_expr</li> <li>\u6307\u4ee4\u8bf4\u660e: \u8be5\u4f2a\u64cd\u4f5c\u5728\u7b2c\u4e00\u6b21\u6216\u7b2c\u4e8c\u6b21\u626b\u63cf\u65f6\u62a5\u544a\u8bca\u65ad\u4fe1\u606f</li> <li>\u53c2\u6570\u8bf4\u660e: numeric_expr = 0 \u7b2c\u4e00\u904d\u626b\u63cf\u65f6\u62a5\u544a\uff0c\u5426\u5219\u7b2c\u4e8c\u904d\u65f6\uff1bstring_expr: \u8bca\u65ad\u4fe1\u606f</li> <li>Example: </li> <li>INFO 0, \"Version 0.1\" {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_30","title":"\u5176\u4ed6\u4f2a\u64cd\u4f5c","text":"<ul> <li>AREA {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: AREA \u6bb5\u540d, \u5c5e\u60271, \u5c5e\u60272, ...</li> <li>\u6307\u4ee4\u8bf4\u660e: CODE\u5c5e\u6027(\u4ee3\u7801\u6bb5)\uff0cDATA\u5c5e\u6027(\u6570\u636e\u6bb5)\uff0cREADONLY\u5c5e\u6027\uff0cREADWRITE\u5c5e\u6027</li> <li>Example: </li> <li>AREA Init\uff0cCODE\uff0cREADONLY</li> <li>...</li> <li> <p>END {% endmessage %}</p> </li> <li> <p>CODE {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: CODE16/CODE32</li> <li> <p>\u6307\u4ee4\u8bf4\u660e: \u901a\u8fc7CODE16\u4f2a\u64cd\u4f5c\u901a\u77e5\u7f16\u8bd1\u5668\u5176\u540e\u6307\u4ee4\u4e3a16\u4f4d\u7684Thumb\u6307\u4ee4\uff1bCODE32\u901a\u77e5\u7f16\u8bd1\u5668\u5176\u540e\u6307\u4ee4\u4e3a32\u4f4d\u7684ARM\u6307\u4ee4\uff1b\u4ee5\u6b64\u8fdb\u884cARM\u7684\u72b6\u6001\u5207\u6362 {% endmessage %}</p> </li> <li> <p>ENTRY {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: ENTRY</li> <li>\u6307\u4ee4\u8bf4\u660e: ENTRY\u4f2a\u64cd\u4f5c\u7528\u4e8e\u6307\u5b9a\u6c47\u7f16\u7a0b\u5e8f\u5165\u53e3\u70b9; \u5728\u4e00\u4e2a\u5b8c\u6574\u7684\u6c47\u7f16\u7a0b\u5e8f\u4e2d\u81f3\u5c11\u8981\u6709\u4e00\u4e2aENTRY</li> <li>Example: </li> <li>AREA Init\uff0cCODE\uff0cREADONLY</li> <li> <p>ENTRY {% endmessage %}</p> </li> <li> <p>END {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: END</li> <li>\u6307\u4ee4\u8bf4\u660e: END\u4f2a\u64cd\u4f5c\u7528\u4e8e\u901a\u77e5\u7f16\u8bd1\u5668\u5df2\u7ecf\u5230\u4e86\u6e90\u7a0b\u5e8f\u7684\u7ed3\u5c3e</li> <li>Example: </li> <li>AREA Init\uff0cCODE\uff0cREADONLY</li> <li>...</li> <li> <p>END {% endmessage %}</p> </li> <li> <p>EQU {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: \u540d\u79f0 EQU \u8868\u8fbe\u5f0f {\uff0c\u7c7b\u578b}</li> <li>\u6307\u4ee4\u8bf4\u660e: EQU\u4f2a\u64cd\u4f5c\u7528\u4e8e\u4e3a\u7a0b\u5e8f\u4e2d\u7684\u6807\u53f7\u3001\u6570\u5b57\u5e38\u91cf\u548c\u5bc4\u5b58\u5668\u7684\u503c\u7b49\u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u540d\u79f0\uff1b\u53ef\u4ee5\u7528'*'\u4ee3\u66ff</li> <li>Example: </li> <li>Test EQU 50</li> <li> <p>Addr * 0x55\uff0cCODE32 ; \u5b9a\u4e49Addr\u7684\u503c\u4e3a0x55, \u4e14\u8be5\u5904\u4e3a32\u4f4d\u7684ARM\u6307\u4ee4(\u7c7b\u578b)  {% endmessage %}</p> </li> <li> <p>EXPORT/GLOBAL {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: EXPORT \u6807\u53f7</li> <li>\u6307\u4ee4\u8bf4\u660e: \u7528\u4e8e\u5728\u7a0b\u5e8f\u4e2d\u58f0\u660e\u4e00\u4e2a\u5168\u5c40\u7684\u6807\u53f7</li> <li>Example: </li> </ul> <pre><code>AREA Init CODE\uff0cREADONLY\n    EXPORT Test     ; \u58f0\u660e\u4e00\u4e2a\u53ef\u5168\u5c40\u5f15\u7528\u7684\u6807\u53f7Test\n    ...\n    END\n</code></pre> <p>{% endmessage %}</p> <ul> <li>IMPORT {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: IMPORT \u6807\u53f7</li> <li>\u6307\u4ee4\u8bf4\u660e: \u7528\u4e8e\u901a\u77e5\u7f16\u8bd1\u5668\u8981\u4f7f\u7528\u7684\u6807\u53f7\u5728\u5176\u4ed6\u7684\u6e90\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u4f46\u8981\u5728\u5f53\u524d\u6e90\u6587\u4ef6\u4e2d\u5f15\u7528; \u5982\u679c\u6ca1\u6709\u5f15\u7528\uff0c\u8be5\u6807\u53f7\u5b9e\u9645\u4e0a\u4f1a\u88ab\u52a0\u5165\u5230\u5f53\u524d\u6e90\u6587\u4ef6\u4e2d</li> <li>Example: </li> </ul> <pre><code>AREA Init CODE\uff0cREADONLY\n    IMPORT Main    ; \u5f15\u7528\u4e00\u4e2a\u5168\u5c40\u7684\u6807\u53f7Main\n    ...\n    END\n</code></pre> <p>{% endmessage %}</p> <ul> <li>EXTERN {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: EXTERN \u6807\u53f7</li> <li> <p>\u6307\u4ee4\u8bf4\u660e: \u7528\u4e8e\u901a\u77e5\u7f16\u8bd1\u5668\u8981\u4f7f\u7528\u7684\u6807\u53f7\u5728\u5176\u4ed6\u7684\u6e90\u6587\u4ef6\u4e2d\u5b9a\u4e49\uff0c\u4f46\u8981\u5728\u5f53\u524d\u6e90\u6587\u4ef6\u4e2d\u5f15\u7528; \u5982\u679c\u6ca1\u6709\u5f15\u7528\uff0c\u8be5\u6807\u53f7\u5b9e\u9645\u4e0a\u4e0d\u4f1a\u88ab\u52a0\u5165\u5230\u5f53\u524d\u6e90\u6587\u4ef6\u4e2d {% endmessage %}</p> </li> <li> <p>GET {% message color:info size:default%}</p> </li> <li>\u6307\u4ee4\u683c\u5f0f: GET \u6587\u4ef6\u540d</li> <li>\u6307\u4ee4\u8bf4\u660e: GET\u4f2a\u64cd\u4f5c\u7528\u4e8e\u5c06\u4e00\u4e2a\u6e90\u6587\u4ef6\u5305\u542b\u5230\u5f53\u524d\u7684\u6e90\u6587\u4ef6\u4e2d\uff0c\u5e76\u5c06\u88ab\u5305\u542b\u7684\u6e90\u6587\u4ef6\u5728\u5f53\u524d\u4f4d\u7f6e\u8fdb\u884c\u6c47\u7f16\u5904</li> <li>\u53ef\u4ee5\u4f7f\u7528INCLUDE\u4ee3\u66ffGET {% endmessage %}</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_11","title":"ARM\u8bed\u8a00\u4f2a\u6307\u4ee4","text":"<p>\u4f2a\u6307\u4ee4\u4e0d\u662f\u771f\u6b63\u7684ARM\u6307\u4ee4,\u5728\u6c47\u7f16\u8fc7\u7a0b\u4e2d\u4f1a\u88ab\u66ff\u6362\u6210\u5bf9\u5e94\u7684ARM\u6307\u4ee4\u6216\u6307\u4ee4\u5e8f\u5217 + ADR(AdDRess) {% message color:info size:default%} + \u6307\u4ee4\u683c\u5f0f: ADR {cond} register, \u6807\u53f7 + \u6307\u4ee4\u8bf4\u660e: \u5c06\u57fa\u4e8ePC\u7684\u5730\u5740\u503c(\u7a0b\u5e8f\u6807\u53f7)\u6216\u57fa\u4e8e\u5bc4\u5b58\u5668\u7684\u5730\u5740\u503c\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u4e2d + Example: </p> <pre><code>start MOV R0, #0\n      ADR R1, start\n   =&gt; SUB R1, pc, #0xC\n</code></pre> <p>{% endmessage %}</p> <ul> <li>ADRL(AdDRess Large) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: ADRL {cond} register, \u6807\u53f7</li> <li>\u6307\u4ee4\u8bf4\u660e: \u5c06\u57fa\u4e8ePC\u7684\u5730\u5740\u503c(\u7a0b\u5e8f\u6807\u53f7)\u6216\u57fa\u4e8e\u5bc4\u5b58\u5668\u7684\u5730\u5740\u503c\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u4e2d,\u53ef\u88ab\u66ff\u6362\u6210\u4e24\u6761\u5408\u9002\u7684\u6307\u4ee4\uff0c\u6240\u4ee5\u52a0\u8f7d\u7684\u5730\u5740\u8303\u56f4\u66f4\u5927</li> <li>Example: </li> </ul> <pre><code>start MOV R0, #0\n      ADRL R1, start + 60000\n   =&gt; ADD R1, pc, 0xE800\n   =&gt; ADD R1, R1, 0x254\n</code></pre> <p>{% endmessage %}</p> <ul> <li>LDR(Load Register) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: LDR {cond} register, = expr \u6216 label-expr</li> <li>\u6307\u4ee4\u8bf4\u660e: \u53ef\u5c06\u4efb\u610f\u4e00\u4e2a32\u4f4d\u5e38\u6570\u6216\u5730\u5740\u503c\u52a0\u8f7d\u5230\u5bc4\u5b58\u5668\u4e2d</li> <li>Example: </li> </ul> <pre><code>  LDR R1, =0xFF\n  =&gt; MOV R1, 0xFF\n  LDR R1, =0xFFF\n  =&gt; LDR R1, [PC, OFFSET_TO_LPOOL]\n</code></pre> <p>{% endmessage %}</p> <ul> <li>NOP(NO Operation) {% message color:info size:default%}</li> <li>\u6307\u4ee4\u683c\u5f0f: NOP</li> <li>\u6307\u4ee4\u8bf4\u660e: \u6c47\u7f16\u65f6\u4f1a\u88ab\u66ff\u6362\u6210\u4e00\u6761\u65e0\u7528\u6307\u4ee4, \u4e0d\u5f71\u54cdCPSR\u4e2d\u7684\u6761\u4ef6\u6807\u5fd7\u4f4d</li> <li>Example: </li> </ul> <pre><code>  NOP\n  =&gt; MOV R0, R0\n</code></pre> <p>{% endmessage %}</p>"},{"location":"ComputerTheory/EmbeddedSystem/#armc","title":"\u7b2c\u4e03\u8bb2 ARM\u4e0b\u7684C\u7f16\u7a0b","text":""},{"location":"ComputerTheory/EmbeddedSystem/#c","title":"\u4e86\u89e3C\u8fd0\u884c\u65f6\u5e93","text":"<p>C\u8fd0\u884c\u65f6\u5e93(C Runtime Library)\u7528\u4e8e\u5728C\u7a0b\u5e8f\u8fd0\u884c\u65f6\u63d0\u4f9b\u652f\u6301\u7684\u51fd\u6570\u548c\u4f8b\u7a0b\u96c6\u5408\uff0c\u5305\u542bC\u8bed\u8a00\u6240\u9700\u7684\u57fa\u672c\u529f\u80fd\u548c\u652f\u6301\uff1a</p> <ul> <li>ARM\u7684C\u7f16\u8bd1\u5668\u652f\u6301ANSI C\u8fd0\u884c\u65f6\u5e93</li> <li>ARM C\u8fd0\u884c\u65f6\u5e93\u4ee5\u4e8c\u8fdb\u5236\u5f62\u5f0f\u63d0\u4f9b</li> <li>\u7528\u6237\u53ef\u4ee5\u5efa\u7acb\u81ea\u5df1\u7684\u8fd0\u884c\u65f6\u5e93</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_31","title":"\u5b8f\u548c\u51fd\u6570\u7684\u533a\u522b","text":"<p>\u5b8f\uff1a\u5728C\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u7684\u547d\u540d\u4ee3\u7801\u6bb5\u3002</p> <ol> <li>\u7f16\u8bd1\u5668\u4f1a\u5c06\u76f8\u5173\u4ee3\u7801\u653e\u5230\u5b8f\u540d\u51fa\u73b0\u7684\u6bcf\u4e00\u4e2a\u5730\u65b9\uff0c\u5b8f\u7684\u4ee3\u7801\u5728\u4efb\u4f55\u51fa\u73b0\u5b8f\u540d\u7684\u5730\u65b9\u90fd\u4f1a\u7f16\u8bd1\u4e00\u6b21\uff1b\u4f7f\u7528\u5b8f\u65f6\u4e0d\u9700\u8981\u4fdd\u5b58/\u6062\u590d\u4e0a\u4e0b\u6587\uff0c\u4e5f\u4e0d\u5fc5\u8fd4\u56de</li> <li>\u5728\u7f16\u8bd1\u5668\u9884\u5904\u7406\u9636\u6bb5\u4f1a\u88ab\u76f4\u63a5\u5c55\u5f00\u5230\u4ee3\u7801\u4e2d\uff0c\u7f16\u8bd1\u65f6\u7528\u5b8f\u5185\u5bb9\u66ff\u6362\u5b8f\u8c03\u7528\u4f4d\u7f6e\uff0c\u53ef\u80fd\u5bfc\u81f4\u4ee3\u7801\u81a8\u80c0</li> <li>\u4ee3\u7801\u7b80\u5355\u7528\u5b8f</li> </ol> <p>\u51fd\u6570\uff1a 1. \u51fd\u6570\u7684\u4ee3\u7801\u53ea\u9700\u8981\u7f16\u8bd1\u4e00\u6b21 2. \u5728\u7f16\u8bd1\u65f6\u5b9a\u4e49\uff0c\u4f46\u5b9e\u9645\u6267\u884c\u53d1\u751f\u5728\u8fd0\u884c\u65f6\uff0c\u4f1a\u6709\u51fd\u6570\u8c03\u7528\u5f00\u9500 3. \u4ee3\u7801\u590d\u6742\u7528\u51fd\u6570</p> <p>\u4e09\u3001\u4ec0\u4e48\u662f\u5185\u5d4c\u6c47\u7f16</p> <p>\u6807\u8bc6\u7b26\uff1a_ _asm\uff1a\u7528\u4e8e\u544a\u8bc9\u7f16\u8bd1\u5668\u540e\u9762\u662f\u6c47\u7f16\u4ee3\u7801</p> <p>```c \u5185\u5d4c\u6c47\u7f16 void enable_IRQ(void) {   int temp;   __asm   {     MRS tmp, CPSR     BIC tmp, tmp, #0x80     MSR CPSR_c, tmp   } }</p> <pre><code>\n### _irq\u3001volatile\u5173\u952e\u5b57\u7684\u4f5c\u7528\n\n**_irq**\uff1a\u4f7f\u7528\u8be5\u5173\u952e\u5b57\u58f0\u660e\u7684&lt;u&gt;\u51fd\u6570&lt;/u&gt;\u53ef\u4ee5\u88ab\u7528\u4f5c\u5f02\u5e38\u4e2d\u65ad\u7684\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\uff0c\u8be5\u51fd\u6570\u901a\u8fc7\u5c06lr-4\u7684\u503c\u8d4b\u4e88PC\u5bc4\u5b58\u5668\uff0c\u5e76\u5c06 SPSR\u7684\u503c\u8d4b\u4e88CPSR\u5b9e\u73b0\u51fd\u6570\u8fd4\u56de\n\n**volatile**\uff1a\u7528\u4e8e\u58f0\u660e&lt;u&gt;\u53d8\u91cf&lt;/u&gt;\uff0c\u544a\u8bc9\u7f16\u8bd1\u5668\u8be5\u53d8\u91cf\u53ef\u80fd\u5728\u7a0b\u5e8f\u4e4b\u5916\u4fee\u6539\uff1b\u7f16\u8bd1\u65f6\u4e0d\u80fd\u4f18\u5316\u5bf9volatile\u53d8\u91cf\u7684\u64cd\u4f5c\uff1b\u4e0d\u80fd\u5bf9volatile\u53d8\u91cf\u4f7f\u7528\u7f13\u51b2\u6280\u672f\n\n### \u6c47\u7f16\u548c C \u7684\u6df7\u5408\u7f16\u7a0b\n\n**\u53c2\u6570\u4f20\u9012\u89c4\u5219**\uff1a\n\n+ \u53c2\u6570\u4e2a\u6570\u53ef\u53d8\u7684\u5b50\u7a0b\u5e8f\u53c2\u6570\u4f20\u9012\u89c4\u5219\uff1a\n  1. \u53c2\u6570\u4e0d\u8d85\u8fc74\u4e2a\u65f6\uff0c\u4f7f\u7528R0\uff5eR3\u6765\u4f20\u9012\uff1b\n  2. \u53c2\u6570\u8d85\u8fc74\u4e2a\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6808\u6765\u4f20\u9012\n+ \u53c2\u6570\u4e2a\u6570\u56fa\u5b9a\u7684\u5b50\u7a0b\u5e8f\u53c2\u6570\u4f20\u9012\u89c4\u5219:\n  1. \u7b2c\u4e00\u4e2a\u6574\u6570\u53c2\u6570\uff0c\u901a\u8fc7R0\uff5eR3\u6765\u4f20\u9012\n  2. \u5176\u4ed6\u53c2\u6570\u901a\u8fc7\u6570\u636e\u6808\u6765\u4f20\u9012\n  3. \u6709\u5173\u6d6e\u70b9\u8fd0\u7b97\uff0c\u9700\u7279\u522b\u5904\u7406\n+ \u5b50\u7a0b\u5e8f\u7ed3\u679c\u8fd4\u56de\u89c4\u5219:\n  1. \u7ed3\u679c\u4e3a\u4e00\u4e2a32\u4f4d\u6574\u6570\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5bc4\u5b58\u5668R0\u8fd4\u56de\n  2. \u7ed3\u679c\u4e3a\u4e00\u4e2a64\u4f4d\u6574\u6570\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5bc4\u5b58\u5668R0\u548cR1\u8fd4\u56de\uff0c \u4f9d\u6b21\u7c7b\u63a8\n\n### ARM \u5f02\u5e38\u54cd\u5e94\u8fc7\u7a0b\n\n{% message color:info title:ARM\u5f02\u5e38\u5904\u7406 size:default%}\n1. \u5f53\u5f02\u5e38\u4e2d\u65ad\u53d1\u751f\u65f6, \u7cfb\u7edf\u6267\u884c\u5b8c\u5f53\u524d\u6307\u4ee4\u540e\uff0c\u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u5f02\u5e38\u4e2d\u65ad\u5904\u7406 \u7a0b\u5e8f\u5904\u6267\u884c\n2. \u6267\u884c\u5b8c\u6210\u540e\uff0c\u7a0b\u5e8f\u8fd4\u56de\u5230\u53d1\u751f\u4e2d\u65ad\u7684\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307 \u4ee4\u5904\u6267\u884c\n3. \u8fdb\u5165\u5f02\u5e38\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u65f6\u8981\u4fdd\u5b58\u73b0\u573a\uff0c\u8fd4\u56de\u65f6\u8981\u6062\u590d \u73b0\u573a\n{% endmessage %}\n\n{% message color:info title:\u5f02\u5e38\u5411\u91cf\u8868 size:default%}\n+ \u5f53\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u5904\u7406\u5668\u4f1a\u628aPC\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7684\u5b58\u50a8\u5668\u5730\u5740\n+ \u8fd9\u4e00\u5730\u5740\u653e\u5728\u88ab\u79f0\u4e3a\u5411\u91cf\u8868(vector table)\u7684\u7279\u5b9a\u5730\u5740\u8303\u56f4\u5185\n+ \u5f02\u5e38\u5411\u91cf\u8868\u901a\u5e38\u653e\u5728\u5b58\u50a8\u5730\u5740\u7684\u4f4e\u7aef\n{% endmessage %}\n\n## \u7b2c\u516b\u8bb2 RISC-V&amp;\u534e\u4e3a\u9cb2\u9e4f\n### \u6307\u4ee4\u96c6\u67b6\u6784(ISA)\u548c\u56fd\u5185ISA\u751f\u6001\n+ \u6307\u4ee4\uff1a\u662f\u6307\u5904\u7406\u5668\u8fdb\u884c\u64cd\u4f5c\u7684\u6700\u5c0f\u5355\u5143\uff08\u5982\u7b97\u672f/\u903b\u8f91\u8fd0\u7b97\uff09\uff1b\n+ \u6307\u4ee4\u96c6\uff1a\u987e\u540d\u601d\u4e49\u662f\u6307\u4e00\u7ec4\u6307\u4ee4\u7684\u96c6\u5408\uff1b\n+ \u6307\u4ee4\u96c6\u67b6\u6784\uff1a\u53c8\u79f0\u4e3a\u201c\u5904\u7406\u5668\u67b6\u6784\u201d\uff0c\u4e0d\u4ec5\u662f\u6307\u4ee4\u7684\u96c6\u5408\uff0c\u8fd8\u5305\u62ec\u7f16\u7a0b\u9700\u8981\u7684\u786c\u4ef6\u4fe1\u606f\uff0c\u5982\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u3001\u5b58\u50a8\u5668\u3001\u5bc4\u5b58\u5668\u72b6\u6001\u3001\u5bfb\u5740\u6a21\u5f0f\u548c\u5bc4\u5b58\u5668\u6a21\u578b\u7b49\uff1b\n    + \u6307\u4ee4\u96c6\u67b6\u6784\uff08ISA, Instruction Set Architecture\uff09\u624d\u662f\u533a\u5206\u4e0d\u540cCPU\u7684\u6807\u51c6\uff1b\n+ \u5fae\u67b6\u6784\uff1a\u5904\u7406\u5668\u7684\u5177\u4f53\u786c\u4ef6\u5b9e\u73b0\u65b9\u6848\u79f0\u4e3a\u5fae\u67b6\u6784\uff1b\n+ \u5e38\u89c1\u6307\u4ee4\u96c6\u67b6\u6784\uff1a**x86(CISC)**, SPARC, **MIPS**, Power(\u56fd\u4ea7), Alpha(\u56fd\u4ea7), ARC, **ARM(RISC)**, Intel\n\n### RISV-V\u7684\u4e3b\u8981\u7279\u5f81\nRISC-V\uff0c\u662f\u4e00\u79cd\u57fa\u4e8e\u201c\u7cbe\u7b80\u6307\u4ee4\u96c6\uff08RISC\uff09\u201d\u539f\u5219\u7684\u6307\u4ee4\u96c6\u67b6\u6784\uff0c\u5b83\u5177\u6709\u5f00\u6e90\u3001\u91cd\u65b0\u8bbe\u8ba1(\u540e\u53d1\u4f18\u52bf)\u3001\u7b80\u5355\u54f2\u5b66\u3001\u6a21\u5757\u5316\u6307\u4ee4\u96c6\u3001\u6307\u4ee4\u96c6\u53ef\u6269\u5c55\u7684\u7279\u70b9\u3002\n### \u534e\u4e3a\u9cb2\u9e4f\n+ \u9cb2\u9e4f 920 \u4f7f\u7528\u7684\u6307\u4ee4\u96c6\u67b6\u6784\u662f ARM v8 64 \u4f4d\n+ \u9cb2\u9e4f 920 \u751f\u4ea7\u4f7f\u7528\u7684\u5236\u7a0b\u662f 7nm\n+ \u76f8\u6bd4\u4e8e\u4e0a\u4e00\u4ee3\u7684\u9cb2\u9e4f 916\uff0c\u9cb2\u9e4f 920 \u5904\u7406\u5668\u7684\u8ba1\u7b97\u6838\u6570\u63d0\u5347 1 \u500d\uff0c\u6700\u591a\u652f\u6301 64 \u6838\n\n## \u7b2c\u4e5d\u8bb2 \u6700\u5c0f\u7cfb\u7edf\u8bbe\u8ba1\n### \u5d4c\u5165\u5f0f\u7cfb\u7edf\u6700\u5c0f\u7cfb\u7edf\nCPU\u80fd\u591f\u8fd0\u884c\u6240\u9700\u7684\u6a21\u5757\u6709(\u6700\u5c0f\u7cfb\u7edf)\uff1a\u7535\u6e90\u3001\u65f6\u949f\u3001\u590d\u4f4d\u3001\u5185\u5b58\u3001\u8c03\u8bd5\u63a5\u53e3\uff08JTAG\uff09\n### DC-DC \u8f6c\u6362\u5668\u7684\u5e38\u89c1\u5f62\u5f0f\n\u7ebf\u6027\u7a33\u538b\u5668\u3001\u5f00\u5173\u7a33\u538b\u5668\u548c\u5145\u7535\u6cf5\n### \u6676\u4f53\u548c\u6676\u632f\n\u65f6\u949f\u4e00\u822c\u7531\u6676\u4f53\u632f\u8361\u5668\u63d0\u4f9b\uff0c\u800c\u6676\u4f53\u548c\u6676\u632f\u662f\u6784\u6210\u6676\u4f53\u632f\u8361\u5668\u7684\u4e24\u79cd\u65b9\u5f0f:\n\n+ \u6676\u4f53(\u65e0\u6e90)\n    + \u5c01\u88c5\u5185\u90e8\u53ea\u542b\u6709\u6676\u4f53, \u6ca1\u6709\u5185\u90e8\u7535\u6e90\n    + \u9a71\u52a8\u7535\u8def\u7531\u8bbe\u8ba1\u8005\u63d0\u4f9b  \n+ \u6676\u632f(\u6709\u6e90)\n    + \u5c01\u88c5\u4e2d\u5305\u542b\u4e86\u5b8c\u6574\u7684\u6676\u4f53\u632f\u8361\u5668\u7535\u8def\n    + \u9700\u8981\u7535\u6e90\n\n### \u590d\u4f4d\u7684\u57fa\u672c\u529f\u80fd\n+ \u5728\u7cfb\u7edf\u4e0a\u7535\u65f6\u63d0\u4f9b\u590d\u4f4d\u4fe1\u53f7\n+ \u4fdd\u8bc1\u80fd\u591f\u8fdb\u884c\u624b\u52a8\u590d\u4f4d\n\n### SRAM,DRAM,SDRAM\u548cFlash\n+ SRAM(\u9759\u6001RAM)\n    + \u6570\u636e\u5b58\u5165\u9759\u6001RAM\u540e\uff0c\u53ea\u8981**\u7535\u6e90\u7ef4\u6301\u4e0d\u53d8**\uff0c\u5176\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u5c31\u80fd\u591f\u4e00\u76f4\u7ef4\u6301\u4e0d\u53d8 , \u4e0d\u9700\u8981\u5237\u65b0\u64cd\u4f5c\n    + **\u8bfb\u5199\u901f\u5ea6\u5feb**\n    + \u7531\u89e6\u53d1\u5668\u6784\u6210\u57fa\u672c\u5355\u5143\uff0c**\u63a5\u53e3\u7b80\u5355**\n    + **\u5b58\u50a8\u5355\u5143\u7ed3\u6784\u590d\u6742\uff0c\u96c6\u6210\u5ea6\u8f83\u4f4e**\n    + \u5e38\u5e38\u7528\u4f5c**\u9ad8\u901f\u7f13\u51b2\u5b58\u50a8\u5668**[\u8bfb\u5199\u901f\u5ea6\u5feb]\n\n{% message color:info size:default%}\n\u5904\u7406\u5668\u5185\u90e8\u96c6\u6210\u5b58\u50a8\u5668\u591a\u9009\u62e9SRAM\n{% endmessage %}\n\n+ DRAM(\u52a8\u6001RAM)\n    + \u4f9d\u9760**\u7535\u5bb9\u5b58\u50a8**\u4fe1\u606f\uff0c\u9700\u8981**\u4e0d\u65ad\u5237\u65b0**\n    + **\u8bfb\u5199\u901f\u5ea6\u6162**\n    + **\u96c6\u6210\u5ea6\u9ad8**\uff0c\u6210\u672c\u4f4e\n    + \u5730\u5740\u5f15\u811a\u5c11\uff0c\u5730\u5740\u603b\u7ebf\u91c7\u7528\u591a\u8def\u6280\u672f\uff0c**\u63a5\u53e3\u590d\u6742**\n\n{% message color:info size:default%}\n\u591a\u7528\u4e8e\u5916\u90e8\u5b58\u50a8\u5668\u6269\u5c55(\u5916\u5b58)[\u8bfb\u5199\u901f\u5ea6\u6162]\n{% endmessage %}\n\n+ SDRAM(\u540c\u6b65\u52a8\u6001RAM)\n    + SDRAM\u56e0\u4e3a\u8981\u540cCPU\u548c\u82af\u7247\u7ec4\u5171\u4eab\u65f6\u949f\uff0c\u6240\u4ee5\u82af\u7247\u7ec4\u53ef\u4ee5\u4e3b\u52a8\u7684**\u5728\u6bcf\u4e2a\u65f6\u949f\u7684\u4e0a\u5347\u6cbf\u53d1\u7ed9\u5f15\u811a\u63a7\u5236\u547d\u4ee4**\n    + \u52a8\u6001RAM\u52a0\u4e0a\u540c\u6b65\u7279\u6027[\u5728\u6bcf\u4e2a\u65f6\u949f\u7684\u4e0a\u5347\u6cbf\u53d1\u7ed9\u5f15\u811a\u63a7\u5236\u547d\u4ee4]\n\n+ Nor Flash\n    + **\u82af\u7247\u5185\u6267\u884c**\n    + **\u8bfb\u901f\u5ea6\u5feb**\uff08\u76f8\u6bd4Nand Flash\uff09\n    + \u5199\u5165\u4e0e\u64e6\u9664\u901f\u5ea6\u5f88\u4f4e\n    + **\u64e6\u9664\u6309\u5757\u8fdb\u884c**\uff0c\u5199\u5165\u524d\u5fc5\u987b\u5148\u64e6\u9664\n    + \u5e26\u6709SRAM\u63a5\u53e3\uff0c\u6709\u8db3\u591f\u7684\u5730\u5740\u5f15\u811a\u6765\u5bfb\u5740\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5b58\u53d6\u5176\u5185\u90e8\u7684\u6bcf\u4e00\u4e2a\u5b57\u8282\n    + **\u5e38\u7528\u6765\u5b58\u50a8\u4ee3\u7801**\n\n+ Nand Flash\n    + NAND\u8bfb\u548c\u5199\u64cd\u4f5c**\u6309512\u5b57\u8282\u7684\u5757**\u8fdb\u884c\n    + **\u5199\u5165\u4e0e\u64e6\u9664\u901f\u5ea6\u6bd4Nor Flash\u5feb**\n    + **\u64e6\u9664\u6309\u5757\u8fdb\u884c**\uff0c\u5199\u5165\u524d\u5fc5\u987b\u5148\u64e6\u9664\n    + NAND\u7684\u64e6\u9664\u5355\u5143\u66f4\u5c0f\uff0c\u76f8\u5e94\u7684\u64e6\u9664\u7535\u8def\u66f4\u5c11\n    + NAND\u5668\u4ef6\u4f7f\u7528\u590d\u6742\u7684I/O\u53e3\u6765**\u4e32\u884c\u5730\u5b58\u53d6\u6570\u636e**\n    + **\u5e38\u7528\u6765\u5b58\u50a8\u6570\u636e**\n\n### \u5b58\u50a8\u5668\u6620\u5c04\n\u5b58\u50a8\u5668**\u6620\u5c04\u5230\u7269\u7406\u5730\u5740**, \u901a\u8fc7\u5c06\u5b58\u50a8\u5668\u6309\u7167\u7269\u7406\u5730\u5740\u5212\u5206\u4e3a\u4e0d\u540c\u6a21\u5757, \u8fdb\u884cRAM, DRAM, SDRAM, FLASH\u7b49\u5b58\u50a8\u8bbe\u8ba1.\n\n## \u7b2c\u5341\u8bb2 \u5916\u90e8\u8bbe\u5907\u53ca\u901a\u4fe1\u63a5\u53e3\n### \u5e38\u7528\u5916\u90e8\u63a5\u53e3\nI/O\uff08Input/Output\uff09\u63a5\u53e3\u662f\u4e00\u4e2a\u5fae\u63a7\u5236\u5668\u5fc5\u987b\u5177\u5907\u7684\u6700\u57fa\u672c\u7684\u5916\u8bbe\u529f\u80fd.\n\n+ \u6bcf\u4e2aI/O\u53e3\u4e00\u822c\u90fd\u5bf9\u5e94\u4e86\u4e24\u4e2a\u5bc4\u5b58\u5668:\n    + \u6570\u636e\u5bc4\u5b58\u5668\uff1a\u6570\u636e\u5bc4\u5b58\u5668\u7684\u5404\u4f4d\u90fd\u76f4\u63a5\u5f15\u5230\u82af\u7247\u5916\u90e8\n    + \u63a7\u5236\u5bc4\u5b58\u5668\uff1a\u63a7\u5236\u6570\u636e\u5bc4\u5b58\u5668\u4e2d\u6bcf\u4f4d\u7684\u4fe1\u53f7\u6d41\u901a\u65b9\u5411\u548c\u65b9\u5f0f\n+ GPIO\n    General-Purpose I/O ports\uff0c\u4e5f\u5c31\u662f\u901a\u7528I/O\u53e3\uff0c\u662fI/O\u7684\u6700\u57fa\u672c\u5f62\u5f0f\n+ LCD\n    \u6db2\u6676\u663e\u793a\u5668(Liquid Crystal Display): \u6676\u663e\u793a\u5668\u662f\u4e00\u79cd\u88ab\u52a8\u5149\u6e90\u7684\u663e\u793a\u5668\uff0c\u81ea\u8eab\u4e0d\u80fd\u53d1\u5149\uff0c\u53ea\u80fd\u501f\u52a9\u5916\u754c\u5149\u6e90, \u5177\u6709\u7701\u7535\u3001\u4f53\u79ef\u5c0f\u3001\u4f4e\u6210\u672c\u3001\u4f4e\u529f\u7387\u7b49\u7279\u70b9\uff0c\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e2d\n    \u6db2\u6676: \u4ee5\u6db2\u6001\u5f62\u5f0f\u5b58\u5728\u7684\u6676\u4f53\n    + \u6709\u7535\u6d41\u6d41\u8fc7\uff0c\u6db2\u6676\u5206\u5b50\u4f1a\u4ee5\u7535\u6d41\u7684\u65b9\u5411\u8fdb\u884c\u6392\u5217\uff1b\u6ca1\u6709\u7535\u6d41\u65f6\uff0c\u5e73\u884c\u6392\u5217\n    + \u57fa\u672c\u539f\u7406: \u901a\u8fc7\u7ed9\u4e0d\u540c\u7684\u6db2\u6676\u5355\u5143\u4f9b\u7535\uff0c\u63a7\u5236\u5176\u5149\u7ebf\u7684\u901a\u8fc7\u4e0e\u5426\u800c\u8fbe\u5230\u663e\u793a\u7684\u76ee\u7684\n\n+ \u89e6\u6478\u5c4f\n    \u89e6\u6478\u5c4f\u7531\u89e6\u6478\u68c0\u6d4b\u90e8\u4ef6\u548c\u89e6\u6478\u5c4f\u63a7\u5236\u5668\u7ec4\u6210, \u6309\u7167\u89e6\u6478\u5c4f\u7684\u5de5\u4f5c\u539f\u7406\u548c\u4f20\u8f93\u4fe1\u606f\u7684\u4ecb\u8d28\u4e3b\u8981\u5206\u4e3a: \u7535\u963b\u5f0f, \u7535\u5bb9\u611f\u5e94\u5f0f, \u7ea2\u5916\u7ebf\u5f0f, \u8868\u9762\u58f0\u6ce2\u5f0f\u56db\u79cd\n\n+ ADC\n    \u6a21/\u6570\u8f6c\u6362\u5668\u5c31\u662f\u628a\u7535\u6a21\u62df\u91cf\u8f6c\u6362\u6210\u6570\u5b57\u91cf\u7684\u7535\u8def\n+ DAC\n    \u6570/\u6a21\u8f6c\u6362\u5668\u5c31\u662f\u628a\u6570\u5b57\u91cf\u8f6c\u6362\u6210\u6a21\u62df\u91cf\u7684\u7535\u8def\n\n## \u7b2c\u5341\u4e00\u8bb2 \u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\n### \u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\n\u76f8\u5bf9\u4e8e\u901a\u7528\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u66f4\u4e3a\u7cbe\u5de7, \u4f46\u5e76\u4e0d\u610f\u5473\u7740\u53ef\u4ee5\u901a\u8fc7\u88c1\u526a\u901a\u7528\u64cd\u4f5c\u7cfb\u7edf\u6765\u5b9e\u73b0, \u5b83\u6709\u81ea\u8eab\u7684\u7279\u70b9:\n+ \u5b9e\u65f6\u6027\n+ \u53ef\u79fb\u690d\u6027\n+ \u53ef\u914d\u7f6e\u3001\u53ef\u88c1\u526a\u6027\n+ \u53ef\u9760\u6027\n+ \u5e94\u7528\u7f16\u7a0b\u63a5\u53e3\n\n{% message color:info %}\n\u6bcf\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u529f\u80fd\u548c\u79cd\u7c7b\u90fd\u4e0d\u540c\n{% endmessage %}\n\n### \u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u7684\u4efb\u52a1\n\u4e3b\u8981\u4efb\u52a1\u662f\u5c3d\u53ef\u80fd\u5730**\u5c4f\u853d\u5e95\u5c42\u786c\u4ef6\u7684\u5dee\u5f02**\uff0c\u5bf9\u4e0a\u5c42\u5e94\u7528\u8f6f\u4ef6\u548c\u5e95\u5c42\u786c\u4ef6**\u63d0\u4f9b\u6807\u51c6\u5316\u670d\u52a1**\n\n### \u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u7684\u529f\u80fd\n\u5185\u6838\u662f\u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u7684\u57fa\u7840, \u5177\u6709\u4ee5\u4e0b\u529f\u80fd:\n+ \u4efb\u52a1\u7ba1\u7406\n+ \u4e2d\u65ad\u7ba1\u7406\n+ \u901a\u4fe1, \u540c\u6b65\u548c\u4e92\u65a5\u673a\u5236\n+ \u5185\u5b58\u7ba1\u7406\n+ I/O\u7ba1\u7406\n\n### \u5d4c\u5165\u5f0f\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b9e\u65f6\u6027\n\u5b9e\u65f6\u6027\u662f\u5b9e\u65f6\u5185\u6838\u6700\u91cd\u8981\u7684\u7279\u5f81\u4e4b\u4e00\n\n+ \u5b9e\u65f6\u7cfb\u7edf\u7684\u6b63\u786e\u6027\u4e0d\u4ec5\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u8ba1\u7b97\u7684\u903b\u8f91\u7ed3\u679c(**\u8ba1\u7b97\u903b\u8f91**)\uff0c\u8fd8\u4f9d\u8d56\u4e8e\u4ea7\u751f\u8fd9\u4e9b\u7ed3\u679c\u7684\u65f6\u95f4(**\u8ba1\u7b97\u65f6\u95f4**)\n+ \u76f8\u5173\u6982\u5ff5\n    + \u786e\u5b9a\u6027\n        + \u5b9e\u65f6\u6027\u662f\u6307\u5185\u6838\u5e94\u8be5**\u5c3d\u53ef\u80fd\u5feb\u7684\u54cd\u5e94\u5916\u90e8\u4e8b\u4ef6**\n        + \u786e\u5b9a\u6027\u662f\u6307\u5bf9\u4e8b\u4ef6**\u54cd\u5e94\u7684\u6700\u574f\u65f6\u95f4\u662f\u53ef\u9884\u77e5\u7684**\n    + \u54cd\u5e94\u6027\n        + \u786e\u5b9a\u6027\u5173\u5fc3\u7cfb\u7edf\u5728\u8bc6\u522b\u5916\u90e8\u4e8b\u4ef6\u4e4b\u524d\u7684\u5ef6\u8fdf(**\u54cd\u5e94\u542f\u52a8\u5ef6\u8fdf**)\n        + \u54cd\u5e94\u6027\u5173\u5fc3\u7684\u662f\u5728\u8bc6\u522b\u5916\u90e8\u4e8b\u4ef6\u540e\uff0c\u7cfb\u7edf\u8981\u82b1\u591a\u957f\u65f6\u95f4\u6765\u670d\u52a1\u8be5\u4e8b\u4ef6(**\u54cd\u5e94\u65f6\u95f4**)\n    + \u54cd\u5e94\u65f6\u95f4\n        \u786e\u5b9a\u6027\u548c\u54cd\u5e94\u6027\u7ed3\u5408\u5728\u4e00\u8d77\u6784\u6210\u4e8b\u4ef6\u54cd\u5e94\u65f6\u95f4\u3002\n    + \u4e2d\u65ad\u54cd\u5e94\u65f6\u95f4 = \u6700\u957f\u5173\u4e2d\u65ad\u65f6\u95f4 + \u4fdd\u62a4CPU\u5185\u90e8\u5bc4\u5b58\u5668\u7684\u65f6\u95f4 + \u8fdb\u5165\u4e2d\u65ad\u670d\u52a1\u51fd\u6570\u7684\u6267\u884c\u65f6\u95f4 + \u5f00\u59cb\u6267\u884c\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f(ISR)\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u65f6\u95f4\n    + \u4efb\u52a1\u54cd\u5e94\u65f6\u95f4 = \u4e2d\u65ad\u54cd\u5e94\u65f6\u95f4+\u4e2d\u65ad\u670d\u52a1\u65f6\u95f4\n    + \u5bf9\u4e8e\u5f3a\u5b9e\u65f6\u5185\u6838\uff0c\u54cd\u5e94\u65f6\u95f4\u5e94\u8be5\u5728 $\\mu s$ \u7ea7\n\n### \u591a\u4efb\u52a1\u7a0b\u5e8f\u8bbe\u8ba1\u7ed3\u6784\n#### \u524d\u540e\u53f0\u7ed3\u6784\n{% message color:info %}\n\u540e\u53f0\u5faa\u73af, \u524d\u53f0\u4e2d\u65ad\n{% endmessage %}\n\n+ \u540e\u53f0\u884c\u4e3a: \u5e94\u7528\u7a0b\u5e8f\u662f\u4e00\u4e2a\u65e0\u9650\u7684\u5faa\u73af\uff0c\u5faa\u73af\u4e2d\u8c03\u7528\u76f8\u5e94\u7684\u51fd\u6570\u5b8c\u6210\u76f8\u5e94\u7684\u64cd\u4f5c\uff0c\u8fd9\u90e8\u5206\u53ef\u4ee5\u770b\u6210\u540e\u53f0\u884c\u4e3a\n+ \u524d\u53f0\u884c\u4e3a: \u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u5904\u7406\u5f02\u6b65\u4e8b\u4ef6\uff0c\u8fd9\u90e8\u5206\u53ef\u4ee5\u770b\u6210\u524d\u53f0\u884c\u4e3a\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230117.png\" alt=\"\u524d\u540e\u53f0\u7ed3\u6784\" width=\"50%\"/&gt;\n\n\n### \u591a\u4efb\u52a1\u7cfb\u7edf\u7684\u76f8\u5173\u6982\u5ff5 \n\u5d4c\u5165\u5f0f\u5b9e\u65f6\u7cfb\u7edf\u4e2d\uff0c\u591a\u91c7\u7528\u591a\u4efb\u52a1\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u65b9\u6cd5\uff0c\u5176\u7279\u70b9\u6709\uff1a\n\n+ \u5355\u4e2a\u4efb\u52a1\u89c4\u6a21\u8f83\u5c0f\uff0c\u5bb9\u6613\u7f16\u7801\u548c\u8c03\u8bd5\n+ \u4efb\u52a1\u95f4\u72ec\u7acb\u6027\u9ad8\u3001\u8026\u5408\u6027\u5c0f\uff0c\u4fbf\u4e8e\u6269\u5145\u529f\u80fd\n+ \u7cfb\u7edf\u5b9e\u65f6\u6027\u5f3a\uff0c\u4ee5\u4fdd\u8bc1\u7d27\u6025\u4e8b\u4ef6\u5f97\u5230\u4f18\u5148\u5904\u7406\n\n#### \u4efb\u52a1\u7684\u6982\u5ff5\n\u8fdb\u7a0b\u662f**\u8d44\u6e90\u5206\u914d\u7684\u6700\u5c0f\u5355\u4f4d**, \u7ebf\u7a0b\u662f\u8fdb\u7a0b\u5185\u90e8\u4e00\u4e2a\u76f8\u5bf9\u72ec\u7acb\u7684\u63a7\u5236\u6d41\uff0c\u662f**\u8c03\u5ea6\u6267\u884c\u7684\u6700\u5c0f\u5355\u4f4d**\n\u3010\u57fa\u672c\u6982\u5ff5\u3011\n\n+ \u5927\u591a\u6570\u5b9e\u65f6\u5185\u6838\u90fd\u628a\u6574\u4e2a\u5e94\u7528\u5f53\u4f5c\u4e00\u4e2a\u6ca1\u6709\u5b9a\u4e49\u7684\u8fdb\u7a0b\uff0c\u5e94\u7528\u5219\u88ab\u5212\u5206\u4e3a\u591a\u4e2a\u4efb\u52a1\u6765\u5904\u7406\n+ \u6574\u4e2a\u5185\u6838\u662f\u4e00\u4e2a\u5355\u8fdb\u7a0b/\u591a\u7ebf\u7a0b\u6a21\u578b\uff0c\u7b80\u5355\u79f0\u4e3a\u591a\u4efb\u52a1\u6a21\u578b\n\n\u3010\u6982\u5ff5\u9610\u8ff0\u3011\n\u591a\u4efb\u52a1\u7cfb\u7edf\u662f\u4e00\u4e2a\u5355\u8fdb\u7a0b\u6216\u591a\u8fdb\u7a0b\u7684\u7cfb\u7edf\u5185\u6838, \u5176\u4e2d\u591a\u4e2a\u8fdb\u7a0b\u662f\u7531\u5185\u6838\u5c06\u6574\u4e2a\u5e94\u7528\u5212\u5206\u6210\u591a\u4e2a\u4efb\u52a1\u8fdb\u884c\u5904\u7406\u800c\u5efa\u7acb\u7684.\n\u3010\u4efb\u52a1\u7684\u8981\u7d20\u3011\n\n+ \u4ee3\u7801: \u4e00\u6bb5\u53ef\u6267\u884c\u7684\u7a0b\u5e8f\n+ \u521d\u59cb\u6570\u636e: \u7a0b\u5e8f\u6267\u884c\u6240\u9700\u7684\u76f8\u5173\u6570\u636e\n+ \u5806\u6808: \u4fdd\u5b58\u5c40\u90e8\u53d8\u91cf\u548c\u73b0\u573a\u7684\u5b58\u50a8\u533a\n+ \u4efb\u52a1\u63a7\u5236\u5757: \u5305\u542b\u4efb\u52a1\u76f8\u5173\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\u4ee5\u53ca\u4efb\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\u6240\u9700\u8981\u7684\u6240\u6709\u4fe1\u606f\n  &lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230135.png\" alt=\"\u591a\u4efb\u52a1\u6a21\u578b\u7ed3\u6784\" width=\"50%\"/&gt;\n\n\u3010\u4efb\u52a1\u7684\u7279\u70b9\u3011\n  \u52a8\u6001\u6027(\u5c31\u7eea, \u8fd0\u884c\u6216\u7b49\u5f85), \u5e76\u884c\u6027(\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u4efb\u52a1, \u5b8f\u89c2\u4e0a\u5e76\u884c), \u5f02\u6b65\u72ec\u7acb\u6027(\u5404\u4efb\u52a1\u76f8\u4e92\u72ec\u7acb,\u8fd0\u884c\u901f\u5ea6\u4e0d\u53ef\u9884\u77e5)\n\n#### \u4efb\u52a1\u7684\u57fa\u672c\u72b6\u6001\u53ca\u8f6c\u6362 \n- \u8fd0\u884c\u72b6\u6001(running) \n    \u8be5\u4efb\u52a1\u5df2\u83b7\u5f97\u8fd0\u884c\u6240\u5fc5\u9700\u7684\u8d44\u6e90\uff0c\u5b83\u7684\u7a0b\u5e8f\u6b63\u5728\u5904\u7406\u673a\u4e0a\u6267\u884c\n- \u963b\u585e\u72b6\u6001(wait)\n    \u4efb\u52a1\u6b63\u7b49\u5f85\u7740\u67d0\u4e00\u4e8b\u4ef6\u7684\u53d1\u751f\u800c\u6682\u65f6\u505c\u6b62\u6267\u884c; \u8fd9\u65f6\uff0c\u5373\u4f7f\u7ed9\u5b83CPU\u63a7\u5236\u6743\uff0c\u5b83\u4e5f\u65e0\u6cd5\u6267\u884c, \u5219\u79f0\u8be5\u4efb\u52a1\u5904\u4e8e\u963b\u585e\u6001\n- \u5c31\u7eea\u72b6\u6001(ready)\n    \u4efb\u52a1\u5df2\u83b7\u5f97\u9664CPU\u4e4b\u5916\u7684\u8fd0\u884c\u6240\u5fc5\u9700\u7684\u8d44\u6e90\uff0c\u4e00\u65e6\u5f97\u5230CPU\u63a7\u5236\u6743\uff0c\u7acb\u5373\u53ef\u4ee5\u8fd0\u884c\n    &lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230151.png\" alt=\"\u4efb\u52a1\u7684\u72b6\u6001\u8f6c\u6362\" width=\"50%\"/&gt;\n1. \u5c31\u7eea$\\longrightarrow$\u8fd0\u884c\n    + \u8c03\u5ea6\u7a0b\u5e8f\u9009\u62e9\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u8fd0\u884c(\u8fdb\u7a0b\u88ab\u8c03\u5ea6)\n2. \u8fd0\u884c$\\longrightarrow$\u5c31\u7eea\n    + \u8fd0\u884c\u8fdb\u7a0b\u7528\u5b8c\u4e86\u65f6\u95f4\u7247(\u65f6\u95f4\u7247\u7528\u5b8c)\n    + \u8fd0\u884c\u8fdb\u7a0b\u88ab\u4e2d\u65ad\uff0c\u56e0\u4e3a\u4e00\u9ad8\u4f18\u5148\u7ea7\u8fdb\u7a0b\u5904\u4e8e\u5c31\u7eea\u72b6\u6001(\u88ab\u9ad8\u4f18\u5148\u7ea7\u8fdb\u7a0b\u62a2\u5360)\n3. \u8fd0\u884c$\\longrightarrow$\u7b49\u5f85\n    \u8fdb\u7a0b\u5fc5\u987b\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\uff1a\n    + OS\u5c1a\u672a\u5b8c\u6210\u670d\u52a1\n    + \u5bf9\u4e00\u8d44\u6e90\u7684\u8bbf\u95ee\u5c1a\u4e0d\u80fd\u8fdb\u884c\n    + \u521d\u59cb\u5316I/O \u4e14\u5fc5\u987b\u7b49\u5f85\u7ed3\u679c\n4. \u7b49\u5f85$\\longrightarrow$\u5c31\u7eea\n    \u6240\u7b49\u5f85\u7684\u4e8b\u4ef6\u5df2\u7ecf\u53d1\u751f\n\n#### \u4efb\u52a1\u7684\u5207\u6362 \n+ \u4fdd\u5b58\u5f53\u524d\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\n    \u5f53\u591a\u4efb\u52a1\u5185\u6838\u51b3\u5b9a\u8fd0\u884c\u53e6\u5916\u7684\u4efb\u52a1\u65f6\uff0c\u4efb\u52a1\u5207\u6362\u8981\u6c42**\u4fdd\u5b58\u6b63\u5728\u8fd0\u884c\u4efb\u52a1\u7684\u5f53\u524d\u72b6\u6001**\uff0c\u5373**CPU\u5bc4\u5b58\u5668\u4e2d\u7684\u5168\u90e8\u5185\u5bb9**\u88ab\u4fdd\u5b58\u5230\u4efb\u52a1\u7684**\u5f53\u524d\u72b6\u6001\u4fdd\u5b58\u533a(\u4efb\u52a1\u81ea\u5df1\u7684\u5806\u6808\u533a)**\n+ \u6062\u590d\u9700\u8981\u8fd0\u884c\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\n    \u539f\u4efb\u52a1\u72b6\u6001\u5165\u6808\u5de5\u4f5c\u5b8c\u6210\u540e\uff0c\u5c31\u628a\u4e0b\u4e00\u4e2a\u5c06\u8981\u8fd0\u884c\u4efb\u52a1\u7684\u5f53\u524d\u72b6\u6001\u4ece**\u8be5\u4efb\u52a1\u7684\u5806\u6808\u4e2d**\u91cd\u65b0**\u88c5\u5165CPU\u5bc4\u5b58\u5668**\uff0c\u5e76\u5f00\u59cb\u4e0b\u4e00\u4e2a\u4efb\u52a1\u7684\u8fd0\u884c\n\n#### \u4efb\u52a1\u7684\u8c03\u5ea6\n\u3010\u8c03\u5ea6\u7684\u529f\u80fd\u3011\n\u8c03\u5ea6\u53ea\u662f\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\uff0c\u53ef\u5728\u5185\u6838\u5404\u4e2a\u90e8\u5206\u8c03\u7528\n\n+ \u7528\u6765\u786e\u5b9a\u591a\u4efb\u52a1\u73af\u5883\u4e0b\u4efb\u52a1\u6267\u884c\u7684\u987a\u5e8f(\u4efb\u52a1\u6267\u884c\u987a\u5e8f)\n+ \u7528\u6765\u786e\u5b9a\u4efb\u52a1\u83b7\u5f97CPU\u8d44\u6e90\u540e\u80fd\u591f\u6267\u884c\u7684\u65f6\u95f4(\u4efb\u52a1\u6267\u884c\u65f6\u95f4)[\u57fa\u4e8e\u65f6\u95f4\u7247\u7684\u8c03\u5ea6]\n\n\n\u3010\u8c03\u5ea6\u70b9\u4e0e\u8c03\u5ea6\u65f6\u673a\u3011\n\u8c03\u7528\u8c03\u5ea6\u7a0b\u5e8f\u7684\u5177\u4f53\u4f4d\u7f6e\u79f0\u4e3a\u8c03\u5ea6\u70b9\uff1a\n\n+ \u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u7684\u7ed3\u675f\u4f4d\u7f6e\n+ \u4efb\u52a1\u56e0\u7b49\u5f85\u8d44\u6e90\u800c\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\n\n#### \u8c03\u5ea6\u7b56\u7565\n+ \u5b9e\u65f6\u4efb\u52a1\u5c31\u7eea\u7684\u539f\u56e0\n    + **\u4e2d\u65ad\u5904\u7406\u8fc7\u7a0b\u4e2d**\u4f7f\u5b9e\u65f6\u4efb\u52a1\u5c31\u7eea: \u5b58\u5728\u4efb\u52a1\u8bf7\u6c42\u4e2d\u65ad, \u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u4f1a\u4f7f\u5f97\u4e2d\u65ad\u8bf7\u6c42\u4efb\u52a1\u5c31\u7eea\u3010\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u3011\n    + \u5f53\u524d\u8fd0\u884c\u4efb\u52a1**\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u529f\u80fd**\uff0c\u4f7f\u5b9e\u65f6\u4efb\u52a1\u5c31\u7eea\u3010\u7cfb\u7edf\u8c03\u7528\u3011\n+ \u975e\u62a2\u5360\u5f0f\u8c03\u5ea6\n    + \u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u65ad\u5230\u8fbe;\n    + \u82e5\u4e2d\u65ad\u88ab\u5141\u8bb8\uff0cCPU\u8fdb\u5165\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f;\n    + \u4e2d\u65ad\u5904\u7406\u8fc7\u7a0b\u4f7f\u4e00\u4e2a\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u5c31\u7eea;\n    + \u4e2d\u65ad\u5b8c\u6210\u540e\uff0cCPU\u5f52\u8fd8\u7ed9\u539f\u5148\u88ab\u4e2d\u65ad\u7684\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1;\n    + \u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u7ee7\u7eed\u8fd0\u884c;\n    + \u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u5b8c\u6210\u6216\u56e0\u5176\u5b83\u539f\u56e0\u88ab\u963b\u585e\u800c\u91ca\u653eCPU\uff0c\u5185\u6838\u8fdb\u884c\u4efb\u52a1\u8c03\u5ea6\uff0c\u5207\u6362\u5230\u5c31\u7eea\u7684\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1;\u3010\u8c03\u5ea6\u70b9\u3011\n    + \u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u8fd0\u884c\n    &lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230216.png\" alt=\"\u975e\u62a2\u5360\u5f0f\u8c03\u5ea6\" width=\"50%\"/&gt;\n    + \u7279\u70b9\n        + \u4efb\u52a1\u8fd0\u884c\u7a7a\u95f4\u662f\u5c01\u95ed\u7684\uff0c\u51e0\u4e4e**\u4e0d\u9700\u8981\u4f7f\u7528\u4fe1\u53f7\u91cf\u4fdd\u62a4\u5171\u4eab\u6570\u636e**\n        + \u5185\u6838\u7684**\u4efb\u52a1\u7ea7\u54cd\u5e94\u65f6\u95f4\u662f\u4e0d\u786e\u5b9a\u7684**\uff0c\u5b8c\u5168\u53d6\u51b3\u4e8e\u5f53\u524d\u4efb\u52a1\u4f55\u65f6\u91ca\u653eCPU\n\n+ \u62a2\u5360\u5f0f\u8c03\u5ea6\n    + \u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u4e2d\u65ad\u5230\u8fbe;\n    + \u82e5\u4e2d\u65ad\u88ab\u5141\u8bb8\uff0cCPU\u8fdb\u5165\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f;\n    + \u4e2d\u65ad\u5904\u7406\u8fc7\u7a0b\u4f7f\u4e00\u4e2a\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u5c31\u7eea;\n    + \u4e2d\u65ad\u5b8c\u6210\u540e\uff0c\u5185\u6838\u8fdb\u884c\u4efb\u52a1\u8c03\u5ea6\uff0c\u8ba9\u521a\u5c31\u7eea\u7684\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u83b7\u5f97CPU;\u3010\u8c03\u5ea6\u70b9\u3011\n    + \u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u8fd0\u884c;\n    + \u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u5b8c\u6210\u6216\u56e0\u5176\u5b83\u539f\u56e0\u88ab\u963b\u585e\u800c\u91ca\u653eCPU\uff0c\u5185\u6838\u8fdb\u884c\u4efb\u52a1\u8c03\u5ea6;\u3010\u8c03\u5ea6\u70b9\u3011\n    + \u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u83b7\u5f97CPU\uff0c\u4ece\u88ab\u4e2d\u65ad\u7684\u4ee3\u7801\u5904\u7ee7\u7eed\u8fd0\u884c\n    &lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230232.png\" alt=\"\u62a2\u5360\u5f0f\u8c03\u5ea6\" width=\"50%\"/&gt;\n    + \u7279\u70b9\n        + \u6700\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u4e00\u65e6\u5c31\u7eea\uff0c\u603b\u80fd\u5f97\u5230CPU\u7684\u63a7\u5236\u6743\n        + **\u4efb\u52a1\u8fd0\u884c\u7a7a\u95f4\u4e0d\u518d\u662f\u5c01\u95ed\u7684**\uff0c\u4efb\u52a1\u4e0d\u53ef\u4f7f\u7528\u4e0d\u53ef\u91cd\u5165\u578b\u51fd\u6570\n        + \u9700\u8981**\u5bf9\u5171\u4eab\u6570\u636e\u8fdb\u884c\u5fc5\u8981\u7684\u4fdd\u62a4**\n        + \u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf\u5927\u591a**\u57fa\u4e8e\u62a2\u5360\u5f0f\u5185\u6838**\n\n### \u53ef\u91cd\u5165\u578b\u51fd\u6570\u7684\u7406\u89e3\n+ \u53ef\u91cd\u5165\u578b\u51fd\u6570\n    + \u8be5\u51fd\u6570\u53ef\u4ee5\u88ab\u4e00\u4e2a\u4ee5\u4e0a\u7684\u4efb\u52a1\u8c03\u7528\uff0c\u800c\u4e0d\u5fc5\u62c5\u5fc3\u6570\u636e\u88ab\u7834\u574f[\u57fa\u672c\u7279\u70b9]\n    + \u53ef\u91cd\u5165\u578b\u51fd\u6570\u4efb\u4f55\u65f6\u5019\u90fd\u53ef\u4ee5\u88ab\u4e2d\u65ad\uff0c\u4e00\u6bb5\u65f6\u95f4\u4ee5\u540e\u53c8\u53ef\u4ee5\u8fd0\u884c\uff0c\u800c\u76f8\u5e94\u6570\u636e\u4e0d\u4f1a\u4e22\u5931[\u53ef\u4ee5\u968f\u65f6\u4e2d\u65ad\u6216\u8fd0\u884c]\n    + \u53ef\u91cd\u5165\u578b\u51fd\u6570**\u53ea\u4f7f\u7528\u5c40\u90e8\u53d8\u91cf**\uff0c\u5373**\u53d8\u91cf\u4fdd\u5b58\u5728CPU\u5bc4\u5b58\u5668\u4e2d\u6216\u5806\u6808\u4e2d**\n\n\u3010\u6ce8\u89e3\u3011\u8fd9\u4f7f\u5f97\u53ef\u91cd\u5165\u578b\u51fd\u6570\u5728\u53d1\u751f\u4e2d\u65ad\u65f6\uff0c\u5176\u6570\u636e\u4f1a\u88ab\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u81ea\u52a8\u4fdd\u5b58\uff0c\u5f53\u4e2d\u65ad\u8fd4\u56de\u540e\uff0c\u6570\u636e\u4ece\u5806\u6808\u4e2d\u81ea\u52a8\u6062\u590d\uff0c\u56e0\u6b64\u4e0d\u4f1a\u4e22\u5931\u4efb\u4f55\u6570\u636e.\n```c \u4e0d\u53ef\u91cd\u5165\u578b\u51fd\u6570\nint temp;\nvoid swap(int *x, int *y)\n{\n  temp = *x;\n  *x = *y;\n  *y = temp;\n}\n</code></pre> <p>```c \u53ef\u91cd\u5165\u578b\u51fd\u6570 void swap(int x, int y) {   int temp;   temp = x;   x = y;   y = temp; }</p> <pre><code>\n### \u5bf9\u4e34\u754c\u533a\u7684\u7406\u89e3\n\u3010\u57fa\u672c\u6982\u5ff5\u3011\n\u4e34\u754c\u533a\uff0c\u53c8\u79f0\u4e3a\u4ee3\u7801\u7684\u4e34\u754c\u533a\uff0c\u6307\u5904\u7406\u65f6\u4e0d\u53ef\u5206\u5272\u7684\u4ee3\u7801\uff0c\u4ee3\u7801\u4e00\u65e6\u5f00\u59cb\u6267\u884c\uff0c\u5219\u4e0d\u5141\u8bb8\u4efb\u4f55\u4e2d\u65ad\u6253\u65ad.\n\u3010\u4e34\u754c\u533a\u7684\u4fdd\u62a4\u3011\n+ \u5728\u8fdb\u5165\u4e34\u754c\u533a\u4e4b\u524d\u8981\u5173\u4e2d\u65ad\n+ \u4e34\u754c\u533a\u4ee3\u7801\u6267\u884c\u5b8c\u4ee5\u540e\u8981\u7acb\u5373\u5f00\u4e2d\u65ad\n\n\u3010\u5185\u6838\u7684\u5173\u4e2d\u65ad\u65f6\u95f4\u3011\n+ \u5173\u4e2d\u65ad\u5f71\u54cd\u4e2d\u65ad\u5ef6\u8fdf\u65f6\u95f4\n+ \u5185\u6838\u5728\u4e2d\u65ad\u54cd\u5e94\u65f6\u95f4\u4e0a\u7684\u5dee\u5f02\u4e3b\u8981\u6765\u81ea\u5185\u6838\u6700\u5927\u5173\u4e2d\u65ad\u65f6\u95f4\n\n### \u5bf9\u5171\u4eab\u8d44\u6e90\u7684\u4e92\u65a5\u7ba1\u7406\n+ \u5173\u4e2d\u65ad\n+ \u7981\u6b62\u4efb\u52a1\u5207\u6362\n+ \u4f7f\u7528\u6d4b\u8bd5\u5e76\u7f6e\u4f4d\u6307\u4ee4\n+ \u4f7f\u7528\u4fe1\u53f7\u91cf\uff08\u63d0\u4f9b\u4efb\u52a1\u95f4\u901a\u4fe1\u3001\u540c\u6b65\u548c\u4e92\u65a5\u7684\u6700\u4f18\u9009\u62e9\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230252.png\" alt=\"\u4e92\u65a5\u65b9\u6cd5\u5bf9\u6bd4\" width=\"50%\"/&gt;\n\n### \u5b9e\u65f6\u5185\u6838\u7684\u91cd\u8981\u6027\u80fd\u6307\u6807\n\u3010\u65f6\u95f4\u6027\u80fd\u6307\u6807\u3011\n+ \u4e2d\u65ad\u5ef6\u8fdf\u65f6\u95f4\n    \u6307\u4ece\u4e2d\u65ad\u53d1\u751f\u5230\u7cfb\u7edf\u83b7\u77e5\u4e2d\u65ad\uff0c\u5e76\u5f00\u59cb\u6267\u884c\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u6240\u9700\u8981\u7684\u6700\u5927\u6ede\u540e\u65f6\u95f4\n    + \u4e2d\u65ad\u5ef6\u8fdf\u65f6\u95f4 = \u6700\u5927\u5173\u4e2d\u65ad\u65f6\u95f4 + \u4e2d\u65ad\u5d4c\u5957\u7684\u65f6\u95f4+ \u786c\u4ef6\u5f00\u59cb\u5904\u7406\u4e2d\u65ad\u5230\u5f00\u59cb\u6267\u884cISR\u7b2c\u4e00\u6761\u6307\u4ee4\u4e4b\u95f4\u7684\u65f6\u95f4\n\n{% message color:info %}\n\u5b9e\u65f6\u5185\u6838\u5e94\u5c3d\u91cf\u4f7f\u5185\u6838\u6700\u5927\u5173\u4e2d\u65ad\u65f6\u95f4\u51cf\u5c0f\n{% endmessage %}\n\n\u7f29\u77ed\u5173\u4e2d\u65ad\u65f6\u95f4: \u5728\u4e34\u754c\u533a\u7684\u4e00\u4e9b\u975e\u5173\u952e\u4ee3\u7801\u6bb5\u5f00\u4e2d\u65ad\uff0c\u589e\u52a0\u5185\u6838\u4ee3\u7801\u4e2d\u7684\u53ef\u62a2\u5360\u70b9\n\n+ \u4e2d\u65ad\u54cd\u5e94\u65f6\u95f4\n    \u4e2d\u65ad\u54cd\u5e94\u65f6\u95f4\u6307\u4ece\u4e2d\u65ad\u53d1\u751f\u5230\u5f00\u59cb\u6267\u884c\u7528\u6237\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6761\u6307\u4ee4\u4e4b\u95f4\u7684\u65f6\u95f4\n    + \u4e2d\u65ad\u54cd\u5e94\u65f6\u95f4 = \u4e2d\u65ad\u5ef6\u8fdf\u65f6\u95f4 + \u4fdd\u5b58CPU\u5185\u90e8\u5bc4\u5b58\u5668\u7684\u65f6\u95f4 + \u8be5\u5185\u6838\u7684ISR\u8fdb\u5165\u51fd\u6570\u7684\u6267\u884c\u65f6\u95f4\n\n+ \u4e2d\u65ad\u6062\u590d\u65f6\u95f4\n    \u4e2d\u65ad\u6062\u590d\u65f6\u95f4\u6307\u7528\u6237\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u7ed3\u675f\u540e\u56de\u5230\u88ab\u4e2d\u65ad\u4ee3\u7801\u4e4b\u524d\u7684\u65f6\u95f4\u3002(\u5bf9\u62a2\u5360\u5f0f\u5185\u6838\u8fd8\u5e94\u5305\u62ec\u53ef\u80fd\u53d1\u751f\u7684\u4efb\u52a1\u5207\u6362\u65f6\u95f4)\n    + \u4e2d\u65ad\u6062\u590d\u65f6\u95f4 = \u6062\u590dCPU\u5185\u90e8\u5bc4\u5b58\u5668\u7684\u65f6\u95f4 + \u6267\u884c\u4e2d\u65ad\u8fd4\u56de\u6307\u4ee4\u7684\u65f6\u95f4\n\n+ \u4efb\u52a1\u54cd\u5e94\u65f6\u95f4\n    \u4efb\u52a1\u54cd\u5e94\u65f6\u95f4\u6307\u4ece\u4efb\u52a1\u5bf9\u5e94\u7684\u4e2d\u65ad\u4ea7\u751f\u5230\u8be5\u4efb\u52a1\u771f\u6b63\u5f00\u59cb\u8fd0\u884c\u6240\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u53c8\u79f0\u8c03\u5ea6\u5ef6\u8fdf\n    + \u5185\u6838\u8c03\u5ea6\u7b97\u6cd5\u662f\u51b3\u5b9a\u8c03\u5ea6\u5ef6\u8fdf\u7684\u4e3b\u8981\u56e0\u7d20\n    + \u57fa\u4e8e\u4f18\u5148\u7ea7\u7684\u62a2\u5360\u5f0f\u8c03\u5ea6\u5185\u6838\u4e2d\uff0c\u8c03\u5ea6\u5ef6\u8fdf\u6bd4\u8f83\u5c0f\n\n## \u7b2c\u5341\u4e8c\u8bb2 $\\mu$C/OS-II\u7684\u5185\u6838\u7ed3\u6784\n### $\\mu$C/OS-II \u4e2d\u4efb\u52a1\u7684\u72b6\u6001\n$\\mu$C/OS\u2013II\u652f\u6301\u6700\u591a64\u4e2a\u4efb\u52a1\uff0c\u6bcf\u4e2a\u4efb\u52a1\u6709\u4e00\u4e2a\u7279\u5b9a\u7684\u4f18\u5148\u7ea7\uff0c\u4e14\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u5176\u6570\u503c\u8d8a\u5c0f\n\n+ \u8fd0\u884c\u6001(\u8fd0\u884c)\n    \u4efb\u4f55\u65f6\u523b\u53ea\u80fd\u6709\u4e00\u4e2a\u4efb\u52a1\u5904\u4e8e\u8fd0\u884c\u6001\n+ \u5c31\u7eea\u6001(\u53ef\u4ee5\u8fd0\u884c)\n    \u4efb\u52a1\u4e00\u65e6\u5efa\u7acb\uff0c\u8fd9\u4e2a\u4efb\u52a1\u5c31\u8fdb\u5165\u5c31\u7eea\u6001\uff0c\u51c6\u5907\u8fd0\u884c\n+ \u6302\u8d77\u6001(\u4e0d\u53ef\u8fd0\u884c)\n    \u6b63\u5728\u8fd0\u884c\u7684\u4efb\u52a1\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u67d0\u4e00\u4e8b\u4ef6\u7684\u53d1\u751f\u6216\u5c06\u81ea\u5df1\u5ef6\u8fdf\u4e00\u6bb5\u65f6\u95f4\n+ \u4e2d\u65ad\u670d\u52a1\u6001(\u4e0d\u5c5e\u4e8e\u591a\u4efb\u52a1\u7ba1\u7406\u7684\u8303\u56f4)\n    \u6b63\u5728\u8fd0\u884c\u7684\u4efb\u52a1\u662f\u53ef\u4ee5\u88ab\u4e2d\u65ad\u7684\uff0c\u9664\u975e\u8be5\u4efb\u52a1\u5c06\u4e2d\u65ad\u5173\u95ed; \u88ab\u4e2d\u65ad\u4e86\u7684\u4efb\u52a1\u8fdb\u5165\u4e86\u4e2d\u65ad\u670d\u52a1\u6001\n+ \u4f11\u7720\u6001(\u4e0d\u5c5e\u4e8e\u591a\u4efb\u52a1\u7ba1\u7406\u7684\u8303\u56f4)\n    \u4efb\u52a1\u521b\u5efa\u4e4b\u524d\u7684\u72b6\u6001\uff0c\u4ec5\u9a7b\u7559\u5728\u7a0b\u5e8f\u7a7a\u95f4\uff0c\u8fd8\u6ca1\u6709\u4ea4\u7ed9$\\mu$C/OS-II\u7ba1\u7406\n    &lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230312.png\" alt=\"\u4efb\u52a1\u72b6\u6001\u8f6c\u6362\" width=\"50%\"/&gt;\n\n\u3010\u4efb\u52a1\u63a7\u5236\u5757(TCB)\u3011\n\u4efb\u52a1\u63a7\u5236\u5757\u662f\u7ba1\u7406\u4efb\u52a1\u7684\u6570\u636e\u7ed3\u6784:\n\n+ \u4efb\u52a1\u63a7\u5236\u5757OS_TCB\u4fdd\u5b58\u7740\u8be5\u4efb\u52a1\u7684\u76f8\u5173\u53c2\u6570\n+ \u4efb\u52a1\u5806\u6808\u6307\u9488\u3001\u72b6\u6001\u3001\u4f18\u5148\u7ea7\u3001\u4efb\u52a1\u8868\u4f4d\u7f6e\u3001\u4efb\u52a1\u94fe\u8868\u6307\u9488\u7b49\n+ \u6240\u6709\u7684\u4efb\u52a1\u63a7\u5236\u5757\u5747\u5728$\\mu$C/OS-II\u521d\u59cb\u5316\u65f6\u751f\u6210\uff0c\u5206\u522b\u5b58\u5728\u4e8e\u4e24\u6761\u94fe\u8868\u4e2d: \u7a7a\u95f2\u94fe\u8868\u548c\u4f7f\u7528\u94fe\u8868\n\n### \u4efb\u52a1\u5c31\u7eea\u8868\u7684\u5de5\u4f5c\u673a\u5236\n#### \u7a7a\u95f2\u4efb\u52a1\u5217\u8868\n+ \u521d\u59cb\u6001\uff1a\u6240\u6709\u4efb\u52a1\u63a7\u5236\u5757\u90fd\u88ab\u653e\u7f6e\u5728\u4efb\u52a1\u63a7\u5236\u5757\u5217\u8868\u6570\u7ec4\u4e2d\n+ \u7cfb\u7edf\u521d\u59cb\u5316: \u6240\u6709\u4efb\u52a1\u63a7\u5236\u5757\u88ab\u94fe\u63a5\u6210\u7a7a\u4efb\u52a1\u63a7\u5236\u5757\u7684\u5355\u5411\u94fe\u8868\n+ \u4efb\u52a1\u5efa\u7acb: \u7a7a\u4efb\u52a1\u63a7\u5236\u5757\u6307\u9488\u6307\u5411\u7684\u4efb\u52a1\u63a7\u5236\u5757\u5206\u914d\u7ed9\u8be5\u4efb\u52a1\uff0c\u94fe\u8868\u4e2d\u6307\u9488\u8fdb\u884c\u540e\u79fb\n\n#### \u4efb\u52a1\u961f\u5217\n\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u64cd\u4f5c\u7cfb\u7edf\u901a\u8fc7\u4efb\u52a1\u961f\u5217\u7684\u65b9\u5f0f\u8fdb\u884c\u4efb\u52a1\u7ba1\u7406\u3002\u5c06\u4efb\u52a1\u7ec4\u7ec7\u4e3a\u5c31\u7eea\u961f\u5217\u548c\u7b49\u5f85\u961f\u5217:\n\n+ \u4efb\u52a1\u5c31\u7eea\u65f6\uff0c\u628a\u4efb\u52a1\u63a7\u5236\u5757\u653e\u5728\u5c31\u7eea\u961f\u5217\u5c3e\n+ \u4efb\u52a1\u6302\u8d77\u65f6\uff0c\u628a\u4efb\u52a1\u63a7\u5236\u5757\u653e\u5728\u7b49\u5f85\u961f\u5217\u5c3e\n+ \u4ece\u5c31\u7eea\u4efb\u52a1\u961f\u5217\u9009\u62e9\u5f53\u524d\u8fd0\u884c\u4efb\u52a1\n\n\u3010\u7279\u70b9\u3011\u4efb\u52a1\u5904\u7406\u65f6\u95f4\u4e0e\u4efb\u52a1\u6570\u91cf\u5bc6\u5207\u76f8\u5173\n\n#### \u4f18\u5148\u7ea7\u4f4d\u56fe\u7b97\u6cd5\n\u3010\u4efb\u52a1\u5c31\u7eea\u8868\u3011\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230328.png\" alt=\"\u4efb\u52a1\u5c31\u7eea\u8868\" width=\"50%\"/&gt;\n\u3010\u6ce8\u89e3\u3011\n\n1. \u4f18\u5148\u7ea7\u4f4d\u56fe: \u4efb\u52a1\u72b6\u6001\u5206\u4e3a\u5c31\u7eea\u6001\u548c\u975e\u5c31\u7eea\u6001\uff0c\u5bf9\u5e94\u4e24\u4e2a\u72b6\u6001\uff0c\u4e00\u6bd4\u7279\u4f4d\u7f16\u7801\n2. \u4efb\u52a1\u4f18\u5148\u7ea7(0$\\sim 63$)\u5212\u5206\u4e3a\u7ec4\u53f7(\u9ad8\u4e09\u4f4d)\u4e0e\u7ec4\u5185\u7f16\u53f7(\u4f4e\u4e09\u4f4d)\uff0c\u5e76\u4e14\u9ad8\u4f18\u5148\u7ea7\u5bf9\u5e94\u5c0f\u7684\u4f18\u5148\u7ea7\u53f7\uff0c\u5176\u4e2d\u7ec4\u53f7\u7d22\u5f15OSRdyTbl\uff0c\u7528\u7ec4\u5185\u7f16\u53f7\u7d22\u5f15OSRdyTbl\n3. OSRdyTbl\u7c7b\u4f3c\u4e8c\u7ef4\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5143\u7d20\u5bf9\u5e94\u5c31\u7eea\u8868\u6bcf\u4e00\u884c\n4. OSRdyGrp\u6570\u7ec4\u6807\u8bb0OSRdyTbl\u7684\u6bcf\u4e00\u884c\u662f\u5426\u5b58\u57281\uff0c\u5373\u5168\u7ec4\u4efb\u52a1\u4e2d\u6ca1\u6709\u4e00\u4e2a\u8fdb\u5165\u5c31\u7eea\u6001\u65f6\uff0cOSRdyGrp\u7684\u76f8\u5e94\u4f4d\u624d\u4e3a\u96f6\n\n+ \u63a9\u7801\u6570\u7ec4OSMapTbl[7]\u7528\u4e8e\u5bf9OSRdyTbl\u548cOSRdyGrp\u7f6e\u4f4d\uff0c\u9884\u5b58\u6570\u7ec4\uff0c\u4f7f\u7528\u65f6\u53ea\u662f\u4e00\u6b21\u53d6\u5185\u5b58\u7684\u64cd\u4f5c\n&lt;center&gt;OSMapTbl[0]=$2^0$=0x01(0000 0001)&lt;/center&gt;\n&lt;center&gt;OSMapTbl[1]=$2^1$=0x02(0000 0010)&lt;/center&gt;\n&lt;center&gt;OSMapTbl[7]=$2^7$=0x80(1000 0000)&lt;/center&gt;\n\n+ Op1: \u4f7f\u4efb\u52a1\u8fdb\u5165\u5c31\u7eea\u6001\nprio\u662f\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\uff0c\u4e5f\u662f\u4efb\u52a1\u7684\u8bc6\u522b\u53f7\uff0c\u5219\u5c06\u4efb\u52a1\u653e\u5165\u5c31\u7eea\u8868\uff0c\u6216\u4f7f\u4efb\u52a1\u8fdb\u5165\u5c31\u7eea\u6001\u7684\u65b9\u6cd5\uff1a\n&lt;center&gt;OSRdyGrp |= OSMapTbl[prio&gt;&gt;3]&lt;/center&gt;\n&lt;center&gt;OSRdyTbl[prio&gt;&gt;3] |= OSMapTbl[prio &amp; 0x07]&lt;/center&gt;\n\n+ Op2: \u4f7f\u4efb\u52a1\u8131\u79bb\u5c31\u7eea\u6001\n\u5c06\u4efb\u52a1\u5c31\u7eea\u8868OSRdyTbl[prio&gt;&gt;3]\u76f8\u5e94\u5143\u7d20\u7684\u76f8\u5e94\u4f4d\u6e05\u96f6(\u63a9\u7801\u53d6\u53cd)\uff0c\u800c\u4e14\u5f53OSRdyTbl[prio&gt;&gt;3]\u4e2d\u7684\u6240\u6709\u4f4d\u90fd\u4e3a\u96f6\u65f6\uff0c\u5373\u5168\u7ec4\u4efb\u52a1\u4e2d\u6ca1\u6709\u4e00\u4e2a\u8fdb\u5165\u5c31\u7eea\u6001\u65f6\uff0cOSRdyGrp\u7684\u76f8\u5e94\u4f4d\u624d\u4e3a\u96f6\n&lt;center&gt;If((OSRdyTbl[prio&gt;&gt;3] &amp;= \u223cOSMapTbl[prio &amp; 0x07])== 0)&lt;/center&gt;\n&lt;center&gt;OSRdyGrp &amp;= \u223cOSMapTbl[prio&gt;&gt;3]&lt;/center&gt;\n\n+ Op3: \u6839\u636e\u5c31\u7eea\u8868\u786e\u5b9a\u6700\u9ad8\u4f18\u5148\u7ea7\n$$\n\\min j (j=0, 1, \\cdots, 7), \\min i (j=0, 1, \\cdots, 7)\n$$\n&lt;center&gt;$\\max prio = j*8+i$&lt;/center&gt;\n\n  + **\u67e5\u8868\u6cd5\u4f18\u5316[\u4f18\u5148\u7ea7\u5224\u5b9a\u8868]**\n\u67e5\u8868\u6cd5\u5177\u6709\u786e\u5b9a\u7684\u65f6\u95f4\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u53ef\u9884\u6d4b\u6027\uff0c$\\mu$C/OS\u4e2d\u6240\u6709\u7684\u7cfb\u7edf\u8c03\u7528\u65f6\u95f4\u90fd\u662f\u786e\u5b9a\u7684\n&lt;center&gt;High3 = OSUnMapTbl[OSRdyGrp]&lt;/center&gt;\n&lt;center&gt;Low3 =OSUnMapTbl[OSRdyTbl[High3]]&lt;/center&gt;\n&lt;center&gt;Prio =(Hign3&lt;&lt;3)+Low3&lt;/center&gt;\n\n\u3010\u6ce8\u89e3\u3011\nLow3\u4e5f\u662f\u83b7\u53d6$0\\sim 7$ \u4f4d\u4e2d\u6700\u4f4e\u4f4d\u76841\uff0c\u4e0e\u7ec4\u53f7\u540c\u7406\uff0c\u53ef\u4ee5\u5229\u7528\u67e5\u8868\u6cd5\u83b7\u53d6\u5f97\u5230Prio\n\n### $\\mu$C/OS \u7684\u4efb\u52a1\u7ea7\u548c\u4e2d\u65ad\u7ea7\u8c03\u5ea6\n+ $\\mu$C/OS-II\u603b\u662f\u9009\u62e9\u8fd0\u884c\u8fdb\u5165\u5c31\u7eea\u6001\u4efb\u52a1\u4e2d\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u4efb\u52a1;\n+ **\u4ee5\u4f18\u5148\u7ea7\u4e3a\u4e0b\u6807**\uff0c\u5373\u53ef\u5f97\u76f8\u5e94\u4efb\u52a1\u63a7\u5236\u5757\n+ $\\mu$C/OS-II\u4efb\u52a1\u8c03\u5ea6\u7684\u6267\u884c\u65f6\u95f4\u4e3a\u5e38\u6570\uff0c\u4e0e\u5f53\u524d\u5efa\u7acb\u7684\u4efb\u52a1\u6570\u6ca1\u6709\u5173\u7cfb\n\n#### \u4efb\u52a1\u7ea7\u8c03\u5ea6\n```c \u4efb\u52a1\u7ea7\u8c03\u5ea6\nvoid OSSched(void)\n{\n  INT8U y;\n\n  OS_ENTER_CRITICAL();\n  if((OSLockNesting | OSIntNesting) == 0){   // \u68c0\u67e5\u662f\u5426\u5904\u4e8e\u4e2d\u65ad\u6216\u4efb\u52a1\u8c03\u5ea6\u7981\u6b62\n    y = OSUnMapTbl[OSRdyGrp];    // \u4f18\u5148\u7ea7\u9ad8 3 \u4f4d\n    OSPrioHighRdy != (INT8U)(y&lt;&lt;3 + OSUnMapTbl[OSRdyTbl[y]]);  // \u6700\u9ad8\u4f18\u5148\u7ea7\n    if(OSPrioHighRdy != OSPrioCur){  // \u5224\u5b9a\u8be5\u4efb\u52a1\u662f\u5426\u4e3a\u5f53\u524d\u4efb\u52a1\n      OSTCBHighRdy = OSTCBPrioTbl[OSPrioHighRdy];  // \u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u4efb\u52a1\u63a7\u5236\u5757\n      OSCtxSwCtr++;\n      OS_TASK_SW();\n    }\n  }\n  OS_EXIT_CRITICAL();\n}\n</code></pre> <p>\u3010\u4efb\u52a1\u5207\u6362\u3011</p> <ul> <li>\u5c06\u88ab\u6302\u8d77\u7684\u4efb\u52a1\u5bc4\u5b58\u5668\u5165\u6808</li> <li>\u5c06\u8f83\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u7684\u5bc4\u5b58\u5668\u503c\u51fa\u6808\uff0c\u56de\u590d\u5230CPU\u5bc4\u5b58\u5668\u4e2d</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_32","title":"\u8c03\u5ea6\u5668\u4e0a\u9501\u673a\u5236","text":"<p>\u6ce8\u89e3\uff1a\u5982\u679c\u9700\u8981\u4fdd\u62a4\u4e00\u4e2a\u4efb\u52a1\u4e0d\u88ab\u5207\u6362\uff0c\u53ef\u4ee5\u4f7f\u7528\u5173\u4e2d\u65ad\uff0c\u4f46\u662f\u529b\u5ea6\u592a\u5927\u5bfc\u81f4\u4e0d\u80fd\u54cd\u5e94\u4e2d\u65ad\uff1b$\\mu$cos\u91c7\u7528\u8c03\u5ea6\u5668\u4e0a\u9501\u673a\u5236\uff0c\u5b9e\u73b0\u4e86\u4fdd\u62a4\u4efb\u52a1\u540c\u65f6\u53ef\u4ee5\u54cd\u5e94\u4e2d\u65ad\u7684\u76ee\u7684.</p> <ul> <li>OSSchedlock()<ul> <li>\u8be5\u51fd\u6570\u7528\u4e8e\u7981\u6b62\u4efb\u52a1\u8c03\u5ea6\u76f4\u5230\u8c03\u7528\u7ed9\u8c03\u5ea6\u5668\u5f00\u9501\u51fd\u6570\u4e3a\u6b62</li> </ul> </li> <li>\u4e2d\u65ad\u53ef\u4ee5\u8bc6\u522b\uff0c\u4e2d\u65ad\u670d\u52a1\u4e5f\u80fd\u5f97\u5230</li> <li>OSLockNesting\u8ddf\u8e2a\u8be5\u51fd\u6570\u88ab\u8c03\u7528\u7684\u6b21\u6570</li> <li>OSSchedUnlock()     \u8be5\u51fd\u6570\u7ed9OSLockNesting\u503c\u51cf1\uff0c\u5f53\u503c\u51cf\u4e3a0\u65f6\uff0c\u6267\u884c\u4e00\u6b21\u8c03\u5ea6(\u56e0\u4e3a\u53ef\u80fd\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u5c31\u7eea)</li> </ul> <p>```c OSSchedLockFunction void OSSchedLock(void) {   if(OSRunning == TRUE){     OS_ENTER_CRITICAL();     OSLockNesting++;     OS_EXIT_CRITICAL();   } }</p> <pre><code>\nOSLockNesting\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u56e0\u6b64\u5728\u8fdb\u884c\u8bbf\u95ee\u65f6\u9700\u8981\u5173\u4e2d\u65ad\uff1b\u540c\u65f6OSLockNesting\u8bb0\u5f55\u52a0\u9501\u7684\u4e2a\u6570\n```c OSSchedUnlockFunction\nvoid OSSchedUnlock(void)\n{\n  if(OSRunning == TRUE){\n    OS_ENTER_CRITICAL();\n    if(OSLockNesting &gt; 0){\n      OSLockNesting--;\n      if((OSLockNesting | OSIntNesting) == 0){\n        OS_EXIT_CRITICAL();\n        OSSched();\n      }else{\n        OS_EXIT_CRITICAL();\n      }\n    }else{\n      OS_EXIT_CRITICAL();\n    }\n  }\n}\n</code></pre> <p>\u5f53OSLockNesting\u51cf\u52300(\u6ca1\u6709\u5904\u4e8e\u4e2d\u65ad)\u65f6, \u518d\u6b21\u8fdb\u884c\u4e00\u6b21\u4efb\u52a1\u8c03\u5ea6\uff0c\u8c03\u5ea6\u4e4b\u524d\u53ef\u80fd\u9700\u8981\u88ab\u8c03\u5ea6\u7684\u4efb\u52a1</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_33","title":"\u4e2d\u65ad\u7ea7\u8c03\u5ea6","text":"<p>\u57fa\u4e8e\u62a2\u5360\u5f0f\u7684\u4e2d\u65ad\u8c03\u5ea6\uff0c\u5728\u4e2d\u65ad\u8fd4\u56de\u7684\u65f6\u5019\u8fdb\u884c\u4efb\u52a1\u7684\u8c03\u5ea6\uff0c\u68c0\u6d4b\u662f\u5426\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u5df2\u7ecf\u5c31\u7eea\u3002</p> <ul> <li>\u4e2d\u65ad\u7ed3\u675f\u65f6\u8c03\u7528\u8fd4\u56de\u51fd\u6570OSIntExit(), OSIntExit()\u5c06\u4e2d\u65ad\u5d4c\u5957\u8ba1\u6570\u5668OSIntNesting\u51cf1; </li> <li>\u5f53\u8ba1\u6570\u5668\u51cf\u52300\u65f6\uff0c\u5bf9\u5c31\u7eea\u4efb\u52a1\u505a\u5224\u65ad\uff0c\u5e76\u8fd4\u56de\u5230\u4efb\u52a1\uff1a<ul> <li>\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u5c31\u7eea\uff0c\u8fd4\u56de\u66f4\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1</li> <li>\u5426\u5219\uff0c\u8fd4\u56de\u5230\u88ab\u4e2d\u65ad\u4efb\u52a1</li> </ul> </li> </ul> <p></p> <p>```c OSIntEnterFunction void OSIntEnter(void) {   OS_ENTER_CRITICAL();   OSIntNesting++;   OS_EXIT_CRITICAL(); }</p> <pre><code>```c OSIntExitFuntion\nvoid OSIntExit(void)\n{\n  OS_ENTER_CRITICAL();\n  if((--OSIntNesting | OSLockNesting) == 0){\n    OSIntExitY = OSUnMapTbl[OSRdyGrp];\n    OSPrioHighRdy = (INT8U)((OSIntExitY &lt;&lt; 3) + OSUnMapTbl[OSRdyTbl[OSIntExitY]]);\n    if(OSPrioHighRdy != OSPrioCur){\n      OSTCBHighRdy = OSTCBPrioTbl[OSPrioHighRdy];\n      OSCtxSwCtr++;\n      OSIntCtxSw();\n    }\n  }\n  OS_EXIT_CRITICAL();\n}\n</code></pre> <ul> <li>OSIntNesting\u7684\u6570\u503c\u6807\u8bc6\u4e2d\u65ad\u5d4c\u5957\u7684\u5c42\u6570\uff0c\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff1b</li> <li>\u4e2d\u65ad\u8fd4\u56de\u65f6\u5224\u65ad\u662f\u5426\u4e3a0\uff0c\u5f53\u4e3a0\u65f6\u610f\u5473\u7740\u4e2d\u65ad\u5df2\u5168\u90e8\u8fd4\u56de\u5e76\u4e14\u8c03\u5ea6\u5668\u6ca1\u6709\u4e0a\u9501\u65f6\uff0c\u8fdb\u884c\u4e00\u6b21\u4efb\u52a1\u8c03\u5ea6\uff1b</li> <li>\u5982\u679c\u6700\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u4e0d\u662f\u5f53\u524d\u4efb\u52a1\uff0c\u5219\u8fdb\u884c\u4efb\u52a1\u5207\u6362\uff0c\u5426\u5219\u4e0d\u5207\u6362\uff1b</li> </ul> <p>\u533a\u522b\uff1a</p> <ul> <li>\u4efb\u52a1\u7ea7\u8c03\u5ea6\u6bcf\u6b21\u90fd\u9700\u8981\u4fdd\u62a4\u73b0\u573a\uff0c\u5e76\u6062\u590d\u73b0\u573a\uff1b</li> <li>\u800c\u4e2d\u65ad\u7ea7\u7684\u8c03\u5ea6\uff0c\u5728\u8fdb\u884c\u4e2d\u65ad\u65f6\u4ee5\u4fdd\u5b58\u8fc7\u73b0\u573a\uff0c\u56e0\u6b64\u5728\u8c03\u5ea6\u65f6\u53ea\u9700\u6062\u590d\u73b0\u573a\uff1b</li> <li>\u56e0\u6b64\u4efb\u52a1\u7ea7\u8c03\u5ea6\u7684\u4efb\u52a1\u5207\u6362\u51fd\u6570OS_TASK_SW()\u4e0e\u4e2d\u65ad\u7ea7\u8c03\u5ea6\u7684\u4efb\u52a1\u5207\u6362\u51fd\u6570OSIntCtxSw()\u4e0d\u540c\uff1b</li> </ul> <p>{% message color:info%} OSIntNesting \u4e0e OSLockNesting \u4e24\u79cd\u5d4c\u5957\u65b9\u5f0f\u76f8\u4e92\u72ec\u7acb\uff0c\u4e92\u4e0d\u5f71\u54cd\uff0c\u4fdd\u8bc1\u4e86\u4efb\u52a1\u4e0d\u5207\u6362\u4f46\u662f\u53ef\u4ee5\u54cd\u5e94\u4e2d\u65ad {% endmessage %}</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_34","title":"\u65f6\u949f\u8282\u62cd","text":"<ul> <li>\u65f6\u949f\u8282\u62cd(\u65f6\u949f\u6ef4\u7b54)Tick\uff0c\u662f\u4e00\u79cd\u5b9a\u65f6\u5668\u4e2d\u65ad\uff0c\u53ef\u901a\u8fc7\u7f16\u7a0b\u65b9\u5f0f\u5b9e\u73b0</li> <li>\u65f6\u949f\u8282\u62cd\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u4e2d\u65ad\uff0c\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u5fc3\u810f<ul> <li>\u4e2d\u65ad\u670d\u52a1\u5b50\u7a0b\u5e8f\u4e2d\uff0c\u9996\u5148\u5bf932\u4f4d\u7684\u6574\u6570OSTime\u52a0\u4e00(OSTime\u8bb0\u5f55\u7cfb\u7edf\u542f\u52a8\u4ee5\u6765\u7684\u65f6\u949f\u6ef4\u7b54\u6570)</li> <li>\u5bf9\u4efb\u52a1\u5217\u8868\u8fdb\u884c\u626b\u63cf\uff0c\u5224\u65ad\u662f\u5426\u6709\u5ef6\u65f6\u4efb\u52a1\u5df2\u7ecf\u5904\u4e8e\u5c31\u7eea\u72b6\u6001\uff0c\u6700\u540e\u8fdb\u884c\u4e0a\u4e0b\u6587\u5207\u6362</li> </ul> </li> </ul> <p>```c OSTickISRFunction void OSTickISR(void) {   \u4fdd\u5b58\u5904\u7406\u5668\u5bc4\u5b58\u5668\u7684\u503c;   \u8c03\u7528OSIntEnter()\u6216\u662f\u5c06OSIntNesting+1   if(OSIntNesting == 1){     OSTCBCur -&gt; OSTCBStkPtr = SP;   }   \u8c03\u7528OSTimeTick();    //\u771f\u6b63\u7684\u7528\u6237\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f   \u6e05\u53d1\u51fa\u4e2d\u65ad\u8bbe\u5907\u7684\u4e2d\u65ad;   \u91cd\u65b0\u5141\u8bb8\u4e2d\u65ad(\u53ef\u9009\u7528);   \u8c03\u7528OSIntExit();   \u6062\u590d\u5904\u7406\u5668\u5bc4\u5b58\u5668\u7684\u503c;   \u6267\u884c\u4e2d\u65ad\u8fd4\u56de\u6307\u4ee4; }</p> <pre><code>```c OSTimeTickFunction\nvoid OSTimeTick(void)\n{\n  OS_TCB *ptcb;\n  ptcb = OSTCBList;   // -- OSTCB\u94fe\u8868\u6307\u9488\n  while(ptcb-&gt;OSTCBPrio != OS_IDLE_PRIO){ // \u68c0\u6d4b\u662f\u5426\u662f\u7a7a\u95f2\u4efb\u52a1\uff0c\u7a7a\u95f2\u4efb\u52a1\u662f\u6700\u540e\u7684\u4efb\u52a1\n    if(ptcb -&gt; OSTCBDly != 0){  // \u68c0\u6d4b\u662f\u5426\u9700\u8981\u5ef6\u65f6\n      if(--ptcb-&gt;OSTCBDly == 0){  //\u5ef6\u65f6\u51cf1\uff0c\u68c0\u6d4b\u662f\u5426\u5ef6\u65f6\u7ed3\u675f\n          if(!(ptcb-&gt;OSTCBStat &amp; OS_STAT_SUSPEND)){ //\u4efb\u52a1\u662f\u5426\u88ab\u6302\u8d77\uff0c\u82e5\u4e0d\u662f\u5219\u5c06\u5176\u5217\u5165\u5c31\u7eea\u8868\n            OSRdyGrp |= ptcb-&gt;OSTCBBitY;\n            OSRdyTbl[ptcb-&gt;OSTCBY] |= ptcb-&gt;OSTCBBitX;\n          }else{ ptcb-&gt;OSTCBDly = 1;}\n      }\n    }\n    ptcb = ptcb -&gt; OSTCBNext;  // \u6307\u9488\u6307\u5411\u4e0b\u4e00\u4e2aTCB\u7ed3\u6784\n  }\n  OSTime++;  //\u53d8\u91cf\u52a0\u4e00\uff0c\u8bb0\u5f55\u7cfb\u7edf\u542f\u52a8\u4ee5\u6765\u7684\u65f6\u949f\u6ef4\u7b54\u6570\n}\n</code></pre> <p>\u3010\u6ce8\u89e3\u3011\u65f6\u949f\u4e2d\u65ad\u505a\u4e3a\u4e00\u79cd\u7279\u6b8a\u7684\u4e2d\u65ad\uff0c\u9700\u8981\u4fdd\u5b58\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u7136\u540e\u8fdb\u5165\u5230\u771f\u6b63\u7684\u7528\u6237\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\uff0c\u6700\u540e\u4e2d\u65ad\u8fd4\u56de\uff0c\u56de\u590d\u4e0a\u4e0b\u6587\u73af\u5883</p>"},{"location":"ComputerTheory/EmbeddedSystem/#mucos-ii","title":"\u7b2c\u5341\u4e09\u8bb2 $\\mu$COS-II\u7684\u4efb\u52a1\u7ba1\u7406","text":"<ul> <li>\u4efb\u52a1\u7ba1\u7406\u7528\u6765\u5b9e\u73b0\u5bf9\u4efb\u52a1\u72b6\u6001\u7684\u76f4\u63a5\u63a7\u5236\u548c\u8bbf\u95ee</li> <li>\u5185\u6838\u7684\u4efb\u52a1\u7ba1\u7406\u662f\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528(\u7b49\u5f85\u3001\u5ef6\u65f6\u7b49)\u6765\u4f53\u73b0\u7684[\u4e0d\u7136\u4f1a\u963b\u585eCPU, \u4fdd\u8bc1\u80fd\u591f\u5206\u65f6\u8fdb\u884c]</li> </ul>"},{"location":"ComputerTheory/EmbeddedSystem/#_35","title":"\u4efb\u52a1\u7684\u521b\u5efa","text":"<p>\u3010\u4efb\u52a1\u521b\u5efa\u65f6\u673a\u3011</p> <ul> <li>\u591a\u4efb\u52a1\u8c03\u5ea6OSStart()\u5f00\u59cb\u524d[\u521d\u59cb\u5316\u521b\u5efa\u4efb\u52a1]</li> <li>\u5176\u4ed6\u4efb\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d[\u4efb\u52a1\u6267\u884c\u65f6\u53c8\u521b\u5efa\u6216\u5220\u9664\u4efb\u52a1]</li> <li>\u4efb\u52a1\u4e0d\u80fd\u7531\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u5efa\u7acb[\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u4e0d\u5c5e\u4e8e\u591a\u4efb\u52a1\u7ba1\u7406\u7684\u8303\u7574\uff0c\u4e0d\u80fd\u53c2\u4e0e\u4efb\u4f55\u7684\u4efb\u52a1\u7ba1\u7406\u5de5\u4f5c\uff1a\u4e0d\u80fd\u5728\u4e2d\u65ad\u4e2d\u521b\u5efa\u4efb\u52a1\u548c\u5220\u9664\u4efb\u52a1\uff0c\u68c0\u6d4bOSIntNesting\u662f\u5426\u4e3a0\uff0c\u5927\u4e8e0\u8868\u793a\u6709\u4e2d\u65ad\u6216\u4e2d\u65ad\u5d4c\u5957]</li> </ul> <p>\u3010\u53c2\u6570\u4f5c\u7528\u3011</p> <ul> <li>task: \u6307\u5411\u4efb\u52a1\u4ee3\u7801\u7684\u6307\u9488</li> <li>pdata: \u4efb\u52a1\u5f00\u59cb\u65f6\uff0c\u4f20\u9012\u7ed9\u4efb\u52a1\u7684\u6307\u9488\u53c2\u6570</li> <li>ptos: \u5206\u914d\u7ed9\u4efb\u52a1\u7684\u5806\u6808\u6808\u9876\u6307\u9488</li> <li>prio: \u5206\u914d\u7ed9\u4efb\u52a1\u7684\u4f18\u5148\u7ea7</li> </ul> <p>\u3010\u4efb\u52a1\u521b\u5efa\u4ee3\u7801\u5206\u6790\u3011 ```c OSTaskCreateFunction INT8U OSTaskCreate(void (task)(void pd), void pdata, OS_STK ptos, INT8U prio) {   void *psp;   INT8U err;</p> <p>if(prio &gt; OS_LOWEST_PRIO){   // \u53c2\u6570\u68c0\u67e5     return (OS_PRIO_INVALID);   }   OS_ENTER_CRITICAL();   if(OSTCBPrioTbl[prio] == (OS_TCB )0){  // \u68c0\u6d4b\u4f18\u5148\u7ea7\u662f\u5426\u88ab\u5360\u7528     OSTCBPrioTbl[prio] = (OS_TCB )1;  // \u5360\u6709\u8be5\u4f18\u5148\u7ea7\u5e76\u5f00\u4e2d\u65ad     OS_EXIT_CRITICAL();     psp = (void )OSTaskStkInit(task, pdata, ptos, 0);  // \u521d\u59cb\u5316\u4efb\u52a1\u5806\u6808     err = OSTCBInit(prio, psp, (void )0, 0, 0, (void *)0, 0);   // \u521d\u59cb\u5316\u4efb\u52a1\u63a7\u5236\u5757     if(err == OS_NO_ERR){       OS_ENTER_CRITICAL();       OSTaskCtr++;   // \u4efb\u52a1\u8ba1\u6570\u5668\u52a01       OS_EXIT_CRITICAL();</p> <pre><code>  if(OSRuning){   // \u82e5\u7cfb\u7edf\u5df2\u7ecf\u5f00\u59cb\u8fd0\u884c(\u5728\u67d0\u4efb\u52a1\u8fc7\u7a0b\u4e2d\u521b\u5efa)\u5219\u8fdb\u884c\u4efb\u52a1\u8c03\u5ea6\n    OSSched();\n  }\n}else{  // \u82e5\u521b\u5efa\u5931\u8d25(\u65e0\u53ef\u7528\u4efb\u52a1\u63a7\u5236\u5757), \u5c06\u4f18\u5148\u7ea7\u91ca\u653e\n  OS_ENTER_CRITICAL();\n  OSTCBPrioTbl[prio] = (OS_TCB *)0;\n  OS_EXIT_CRITICAL();\n}\nreturn (err);\n</code></pre> <p>}else{     OS_EXIT_CRITICAL();     return (OS_PRIO_EXIST);   } }</p> <pre><code>\n\u3010\u6ce8\u89e3\u3011\u9996\u5148\u8fdb\u884c\u4f18\u5148\u7ea7\u5360\u4f4d\u800c\u975e\u76f4\u63a5\u7533\u8bf7\u4efb\u52a1\u63a7\u5236\u5757\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u63d0\u524d\u5224\u65ad\u662f\u5426\u6709\u5176\u4ed6\u4efb\u52a1\u5360\u7528\u6b64\u4f18\u5148\u7ea7\uff0c\u901f\u5ea6\u6bd4\u521d\u59cb\u5316\u4efb\u52a1\u63a7\u5236\u5757\u66f4\u5feb\u3002\n```c MainFunction\nvoid main()\n{\n  OSInit();\n  OSTaskCreate(Task1, (void*)&amp;Task1Data, (void*)&amp;Task1Stk[TASK_STK_SIZE], Task1prio);\n  OSTaskCreate(Task2, (void*)&amp;Task2Data, (void*)&amp;Task2Stk[TASK_STK_SIZE], Task2prio);\n  OSStart();\n}\n</code></pre> <p>```c OSStartFunction void OSStart(void) {   INT8U y, x;   if(OSRunning == FALSE){ // \u5224\u65ad\u662f\u5426\u6ca1\u6709\u542f\u52a8\u5185\u6838     y = OSUnMapTbl[OSRdyGrp];      x = OSUnMapTbl[OSRdyTbl[y]];     OSPrioHighRdy = (INT8U)((y&lt;&lt;3)+x);  // \u627e\u5230\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u5c31\u7eea\u4efb\u52a1     OSPrioCur = OSPrioHighRdy; // \u8bbe\u4e3a\u5f53\u524d\u8fd0\u884c\u4efb\u52a1\u4f18\u5148\u7ea7     OSTCBHighRdy = OSTCBPrioTbl[OSPrioHighRdy]; // \u6839\u636e\u4efb\u52a1\u4f18\u5148\u7ea7\u627e\u5230\u4efb\u52a1\u63a7\u5236\u5757\uff0c\u5e76\u8bbe\u7f6e\u4e3a\u5f53\u524d\u4efb\u52a1\u63a7\u5236\u5757     OSTCBCur = OSTCBHighRdy;      OSStartHighRdy(); // \u8ba9\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u4efb\u52a1\u8fd0\u884c\u8d77\u6765   } }</p> <pre><code>\u3010\u4efb\u52a1\u5806\u6808\u3011\n\u6bcf\u4e2a\u4efb\u52a1\u90fd\u6709\u81ea\u5df1\u7684\u5806\u6808\u7a7a\u95f4\uff0c\u5e76\u7531\u8fde\u7eed\u7684\u5185\u5b58\u7a7a\u95f4\u7ec4\u6210\uff1b\n\n+ \u5806\u6808\u7684\u5206\u914d\n  + \u9759\u6001\u5206\u914d\u2014\u2014\u4fdd\u8bc1\u4f4d\u4e8e\u7a0b\u5e8f\u7684RW\u6bb5\n    + `static OS_STK MyTaskStack[stack_size]` \u5c40\u90e8\u9759\u6001\u53d8\u91cf\n    + `OS_STK MyTaskStack[stack_size]` \u5168\u5c40\u53d8\u91cf\n  + \u52a8\u6001\u5206\u914d\u2014\u2014\u4f4d\u4e8e\u7a0b\u5e8f\u7684\u5806\u4e2d\uff0c\u4f46\u4e00\u76f4\u4e0d\u91ca\u653e\n  ```c\n  OS_STK *pstk;\n  pstk = (OS_STK*)malloc(stack_size);\n  if(pstk!=(OS_STK*)0){\n    create the task;\n  }\n  ```\n\n\u3010\u6ce8\u89e3\u3011malloc\u5728\u7a0b\u5e8f\u5806(\u4e0d\u540c\u4e8e\u5806\u6808)\u4e2d\u5206\u914d\u5185\u5b58,\u6709\u53ef\u80fd\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\uff0c\u5bfc\u81f4\u5206\u914d\u5931\u8d25; \u5e76\u4e14\u5206\u914d\u7684\u5806\u6808\u7edd\u5bf9\u4e0d\u80fd\u4f4d\u4e8e\u7a0b\u5e8f\u7684\u6808\u4e2d\u3002\n\n\u3010\u4efb\u52a1\u5220\u9664\u3011\n\n+ \u4f7f\u4efb\u52a1\u8fd4\u56de\uff0c\u5e76\u5904\u4e8e\u4f11\u7720\u72b6\u6001\n+ \u4efb\u52a1\u4ee3\u7801\u5e76\u4e0d\u88ab\u5220\u9664\uff0c\u53ea\u662f\u4e0d\u518d\u88ab\u8c03\u7528\n\n```c OSTaskDelFunction\nINT8U OSTaskDel(INT8U prio)\n{\n  OS_TCB *ptcb;\n  OS_EVENT *pevent;\n\n  if(prio == OS_IDLE_PRIO){\n    return (OS_TASK_DEL_IDLE);\n  }\n  if(prio &gt;= OS_LOWEST_PRIO &amp;&amp; prio != OS_PRIO_SELF){\n    return (OS_PRIO_INVALID);\n  }\n  OS_ENTER_CRITICAL();\n  if(OSIntNesting &gt; 0){  // \u4e0d\u5728\u4e2d\u65ad\u4e2d\u5220\u9664\u4efb\u52a1\n    OS_EXIT_CRITICAL();  \n    return (OS_TASK_DEL_ISR);\n  }\n  if(prio == OS_PRIO_SELF){   // \u53ef\u4ee5\u5220\u9664\u81ea\u5df1\n    prio = OSTCBCur-&gt;OSTCBPrio;\n  }\n  if((ptcb = OSTCBPrioTbl[prio]) != (OS_TCB *)0){  // \u5f97\u5230\u4efb\u52a1\u63a7\u5236\u5757\n      if((OSRdyTbl[ptcb-&gt;OSTCBY] &amp;= ~ptcb-&gt;OSTCBBitX) == 0){\n        OSRdyGrp &amp;= ~ptcb-&gt;OSTCBBitY; // \u5c06\u8be5\u4efb\u52a1\u4ece\u5c31\u7eea\u8868\u4e2d\u5220\u9664\n      }\n      if((pevent = ptcb-&gt;OSTCBEventPtr) != (OS_EVENT *)0){\n        if((pevent-&gt;OSEventTbl[ptcb-&gt;OSTCBY] &amp;= ~ptcb-&gt;OSTCBBitX) == 0){\n          pevent-&gt;OSEventGrp &amp;= ~ptcb-&gt;OSTCBBitY; // \u5904\u7406\u4e0e\u8be5\u4efb\u52a1\u6709\u5173\u7684\u4e8b\u4ef6\n        }\n      }\n      ptcb-&gt;OSTCBDly = 0; // \u65f6\u949f\u8282\u62cd\u5ef6\u8fdf\u6570\u6e05\u96f6\n      ptcb-&gt;OSTCBStat = OS_STAT_RDY; // \u4efb\u52a1\u72b6\u6001\u7f6e\u4e3aRDY\n      OSLockNesting++; // \u9632\u6b62\u8c03\u5ea6\u5668\u8fdb\u884c\u4efb\u52a1\u5207\u6362\n      OS_EXIT_CRITICAL(); // \u5f00\u4e00\u6b21\u4e2d\u65ad\uff0c\u7f29\u77ed\u4e2d\u65ad\u54cd\u5e94\u65f6\u95f4\n      OSDummy();\n      OS_ENTER_CRITICAL(); // \u5173\u4e2d\u65ad\uff0c\u91cd\u65b0\u8fdb\u5165\u4e34\u754c\u533a\n      OSLockNesting--;  // \u8c03\u5ea6\u5668\u5f00\u9501\n      OSTaskDelHook(ptcb); // \u5220\u9664\u94a9\u5b50\u51fd\u6570\n      OSTaskCtr--;\n      OSTCBPrioTbl[prio] = (OS_TCB*)0;  // \u63a7\u5236\u5757\u6570\u7ec4\u6307\u9488\u6e05\u96f6\n      if(ptcb-&gt;OSTCBPrev == (OS_TCB *)0){  // \u5220\u9664\u53cc\u5411\u94fe\u8868 OSTCBList \u4e2d\u7684\u4efb\u52a1\u63a7\u5236\u5757\n        ptcb-&gt;OSTCBNext-&gt;OSTCBPrev = (OS_TCB*)0;\n        OSTCBList = ptcb-&gt;OSTCBNext;\n      }else{\n        ptcb-&gt;OSTCBPre-&gt;OSTCBNext = ptcb-&gt;OSTCBNext;\n        ptcb-&gt;OSTCBBext-&gt;OSTCBPrev = ptcb-&gt;OSTCBPrev;\n      }\n      ptcb-&gt;OSTCBNext = OSTCBFreeList; // \u5c06\u4efb\u52a1\u63a7\u5236\u5757\u5f52\u8fd8\u7ed9OSTCBFreeList\u94fe\u8868\n      OSTCBFreeList = ptcb;\n      OS_EXIT_CRITICAL();\n      OSSched();  // \u8fdb\u884c\u4e00\u6b21\u4efb\u52a1\u8c03\u5ea6\n      return (OS_NO_ERR);\n  }else{\n    OS_EXIT_CRITICAL();\n    return (OS_TASK_DEL_ERR);\n  }\n}\n</code></pre> <p>\u3010\u6ce8\u89e3\u3011\u6ce8\u91cdDummy()\u51fd\u6570\u7684\u4f7f\u7528\uff0c\u4ee5\u53ca\u8c03\u5ea6\u5668\u4e0a\u9501\uff0c\u5f00\u5173\u4e2d\u65ad\u7684\u5904\u7406\uff0c\u5176\u76ee\u7684\u662f\u5c06\u4efb\u52a1\u5220\u9664\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff0c\u4e24\u4e2a\u9636\u6bb5\u7684\u95f4\u9694\u80fd\u591f\u54cd\u5e94\u4e2d\u65ad\u4f46\u662f\u4e0d\u80fd\u5207\u6362\u4efb\u52a1\u3002</p>"},{"location":"ComputerTheory/EmbeddedSystem/#_36","title":"\u4efb\u52a1\u7684\u6302\u8d77\u4e0e\u6062\u590d\u673a\u5236","text":"<ul> <li>\u4efb\u52a1\u53ef\u4ee5\u6302\u8d77\u81ea\u5df1\u6216\u5176\u4ed6\u4efb\u52a1</li> <li>\u88abOSTaskSuspend()\u51fd\u6570\u6302\u8d77\u7684\u4efb\u52a1\u53ea\u80fd\u901a\u8fc7\u8c03\u7528OSTaskResume()\u51fd\u6570\u6765\u6062\u590d</li> </ul> <p>```c OSTaskSuspendFunction INT8U OSTaskSuspend(INT8U prio) {   BOOLEAN self;   OS_TCB *ptcb;</p> <p>if(prio == OS_IDLE_PRIO){   // \u4e0d\u80fd\u6302\u8d77\u7a7a\u95f2\u4efb\u52a1     return (OS_TASK_SUSPEND_IDLE);   }   if(prio &gt;= OS_LOWEST_PRIO &amp;&amp; prio != OS_PRIO_SELF){     return (OS_PRIO_INVALID);   }   OS_ENTER_CRITICAL();   if(prio == OS_PRIO_SELF){    // \u5224\u65ad\u8981\u6302\u8d77\u7684\u4efb\u52a1\u662f\u5426\u662f\u81ea\u5df1     prio = OSTCBCur-&gt;OSTCBPrio;     self = TRUE;   }else if(prio == OSTCBCur-&gt;OSTCBPrio){     self = TRUE;   }else{     self = FALSE;   }   if((ptcb = OSTCBPrioTbl[prio]) == (OS_TCB*)0){   // \u68c0\u67e5\u4efb\u52a1\u662f\u5426\u5b58\u5728     OS_EXIT_CRITICAL();     return (OS_TASK_SUSPEND_PRIO);   }else{     if((OSRdyTbl[ptcb-&gt;OSTCBY] &amp;= ~ptcb-&gt;OSTCBBitX) == 0){   // \u5b58\u5728\uff0c\u5219\u4ece\u5c31\u7eea\u8868\u4e2d\u5220\u9664       OSRdyGrp &amp;= ~ptcb-&gt;OSTCBBitY;     }     ptcb-&gt;OSTCBStat |= OS_STAT_SUSPEND;  // \u5c06\u4efb\u52a1\u72b6\u6001\u8bbe\u7f6e\u4e3a\u6302\u8d77OS_STAT_SUSPEND     OS_EXIT_CRITICAL();     if(self == TRUE){   // \u4efb\u52a1\u82e5\u6302\u8d77\u5219\u8fdb\u884c\u4efb\u52a1\u8c03\u5ea6       OSSched();     }     return (OS_NO_ERR);   } }</p> <pre><code>\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230511.png\" alt=\"OSTaskResume Function\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230524.png\" alt=\"OSTaskResume Function\" width=\"50%\"/&gt;\n\n\n\u3010\u4efb\u52a1\u7684\u72b6\u6001\u3011\u2014\u2014\u53ea\u80fd\u6e05\u9664\u5bf9\u5e94\u7684\u4f4d\uff0c\u4e0d\u80fd\u6e05\u9664\u5176\u4ed6\u4f4d\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230539.png\" alt=\"\u4efb\u52a1\u7684\u72b6\u6001\u4f4d\" width=\"50%\"/&gt;\n\n### \u4efb\u52a1\u5ef6\u8fdf OSTimeDly \u7684\u5b9e\u73b0\u673a\u5236\n+ \u65f6\u949f\u4e2d\u65ad\n\u5b9a\u65f6\u5668\u7684\u4e2d\u65ad\u7531\u786c\u4ef6\u5b8c\u6210\uff0c\u901a\u8fc7OSTimeTick()\u5b9e\u73b0\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230555.png\" alt=\"OSTimeDly Function\" width=\"50%\"/&gt;\n\n+ \u628a\u5f53\u524d\u4efb\u52a1\u4ece\u5c31\u7eea\u8868\u4e2d\u5220\u9664\n+ \u5c06ticks\u8d4b\u503c\u7ed9\u4efb\u52a1\u63a7\u5236\u5757\u7684Delay\u5c5e\u6027\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230609.png\" alt=\"OSTimeTick Function\" width=\"50%\"/&gt;\n\n\u3010\u6539\u53d8\u4efb\u52a1\u72b6\u6001\u7684\u4e24\u5957\u673a\u5236\u3011\n+ \u4efb\u52a1\u7684\u6302\u8d77\u4e0e\u6062\u590d\u673a\u5236\n+ \u4efb\u52a1\u5ef6\u8fdf(\u81ea\u52a8\u6062\u590d)\n\n\u65f6\u949f\u8282\u62cd\u7684\u7cbe\u5ea6\uff1a10ms\u4e00\u6b21\u89e6\u53d1\u65f6\u949f\u4e2d\u65ad\uff0c10ms\u505a\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cbe\u5ea6\uff1b\u4f46\u662f\u7cbe\u5ea6\u4e0d\u80fd\u65e0\u9650\u5236\u5730\u63d0\u9ad8\uff1b\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230626.png\" alt=\"\u65f6\u949f\u5ef6\u8fdf\" width=\"50%\"/&gt;\n\n\u3010OSTimeDlyResume\u3011\n+ \u88ab\u5ef6\u65f6\u7684\u4efb\u52a1\u53ef\u4ee5\u4e0d\u7b49\u5f85\u5ef6\u65f6\u671f\u6ee1\uff0c\u800c\u901a\u8fc7OSTimeDlyResume()\u51fd\u6570\u6765\u6062\u590d\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230657.png\" alt=\"OSTimeDlyResume Function\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230711.png\" alt=\"OSTimeDlyResume Function\" width=\"50%\"/&gt;\n\n## \u7b2c\u5341\u56db\u8bb2 $\\mu$COS-II\u7684\u4efb\u52a1\u901a\u4fe1\u673a\u5236\n### \u4efb\u52a1\u901a\u4fe1\u7684\u57fa\u672c\u77e5\u8bc6\n\u3010\u4fe1\u53f7\u91cf\u3011[\u5173\u952e\u786e\u5b9a\u540c\u6b65\u548c\u4e92\u65a5\u5173\u7cfb]\n+ \u4fe1\u53f7\u91cf\u5927\u4e8e\u7b49\u4e8e\u96f6\u7684\u65f6\u5019\u4ee3\u8868\u53ef\u4f9b\u5e76\u53d1\u8fdb\n\u7a0b\u4f7f\u7528\u7684\u8d44\u6e90\u5b9e\u4f53\u6570\n+ \u4fe1\u53f7\u91cf\u5c0f\u4e8e\u96f6\u7684\u65f6\u5019\uff0c\u8868\u793a\u6b63\u5728\u7b49\u5f85\u4f7f\u7528\n\u4e34\u754c\u533a\u7684\u8fdb\u7a0b\u7684\u4e2a\u6570\n+ P \u64cd\u4f5c\u548c V \u64cd\u4f5c\u662f\u4e0d\u53ef\u4e2d\u65ad\u7684\u7a0b\u5e8f\u6bb5\uff0c\u79f0\u4e3a\u539f\u8bed(\u5177\u6709\u539f\u5b50\u6027)\n\n### $\\mu$COS-II \u4e2d\u4e8b\u4ef6\u7684\u6982\u5ff5\n+ $\\mu$C/OS-II\u4e2d\u7684\u4efb\u52a1\u95f4\u901a\u4fe1: \u901a\u8fc7\u4fe1\u53f7\u91cf\u3001\u6d88\u606f\u90ae\u7bb1\u548c\u6d88\u606f\u961f\u5217\u6765\u5b9e\u73b0\u4efb\u52a1\u95f4\u901a\u4fe1\u7684\n\n\u3010\u4e8b\u4ef6\u3011\n$\\mu$C/OS-II\u5c06\u4fe1\u53f7\u91cf\u3001\u90ae\u7bb1\u548c\u961f\u5217\u7edf\u79f0\u4e3a\u4e8b\u4ef6,\u5728\u4e8b\u4ef6\u63a7\u5236\u5757\u4e2d\u901a\u8fc7OSEventType\u533a\u5206\n\u3010\u4e8b\u4ef6\u4e0e\u4efb\u52a1\u7684\u533a\u522b\u3011\n\u4e8b\u4ef6\u53ef\u4ee5\u6539\u53d8\u4efb\u52a1\u7684\u72b6\u6001,\u4efb\u52a1\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6,\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u591a\u4efb\u52a1\u7ba1\u7406,\u6709\u9650\u72b6\u6001\u673a\u4e2d\u4e8b\u4ef6\u7684\u53d1\u751f\u4e0e\u72b6\u6001\u7684\u8f6c\u6362\n\u3010\u4e8b\u4ef6\u63a7\u5236\u5757\u3011\n\u5404\u79cd\u4e8b\u4ef6\u63a7\u5236\u51fd\u6570\u5b9e\u73b0\u7684\u57fa\u672c\u6570\u636e\u7ed3\u6784 \n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230726.png\" alt=\"\u4e8b\u4ef6\u63a7\u5236\u5757\u6570\u636e\u7ed3\u6784\" width=\"70%\"/&gt;\n\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230742.png\" alt=\"\u4e8b\u4ef6\u63a7\u5236\u5757\u5f62\u8c61\u8868\u793a\" width=\"70%\"/&gt;\n\n{% message color:info %}\n\u4e8b\u4ef6\u63a7\u5236\u5757\u662f$\\mu$C/OS-II\u4efb\u52a1\u7ba1\u7406\u7684\u5b9e\u73b0\u673a\u5236\uff0c\u7edf\u4e00\u4e86\u4fe1\u53f7\u91cf\uff0c\u90ae\u7bb1\u548c\u961f\u5217\u4e09\u79cd\u65b9\u5f0f\n{% endmessage %}\n\n\u3010\u7b49\u5f85\u4efb\u52a1\u5217\u8868\u5b9e\u73b0\u673a\u5236\u3011\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230802.png\" alt=\"\u7b49\u5f85\u4efb\u52a1\u5217\u8868\" width=\"70%\"/&gt;\n\n\u3010\u5bf9\u7b49\u5f85\u4e8b\u4ef6\u4efb\u52a1\u5217\u8868\u7684\u4e09\u79cd\u64cd\u4f5c\u3011\n+ \u5c06\u4efb\u52a1\u7f6e\u4e8e\u7b49\u5f85\u4e8b\u4ef6\u4efb\u52a1\u5217\u8868(\u52a0\u5165\u7b49\u5f85\u4e8b\u4ef6)\n&lt;center&gt;pevent-&gt;OSEventGrp |= OSMapTbl[prio &gt;&gt; 3]&lt;/center&gt;\n&lt;center&gt;pevent-&gt;OSEventTbl[prio &gt;&gt; 3] |= OSMapTbl[prio &amp; 0x07]&lt;/center&gt;\n\n\u6ce8\u89e3\uff1a\u53d6\u51faprio\u7684\u4f4e\u4e09\u4f4d\u5229\u7528\u63a9\u7801\u6570\u7ec4OSMapTbl\u5bf9\u7ec4\u5185\u7f16\u53f7\u7f6e\u4f4d\uff0cpevent\u662f\u5f53\u524d\u7684\u4efb\u52a1\u63a7\u5236\u5757\n\n+ \u4ece\u7b49\u5f85\u4e8b\u4ef6\u4efb\u52a1\u5217\u8868\u4e2d\u4f7f\u4efb\u52a1\u8131\u79bb\u7b49\u5f85\u72b6\u6001(\u91ca\u653e\u7b49\u5f85\u65f6\u95f4)\n&lt;center&gt;if ((pevent-&gt;OSEventTbl[prio &gt;&gt; 3] &amp;= ~OSMapTbl[prio &amp; 0x07]) == 0)&lt;/center&gt;\n&lt;center&gt;pevent-&gt;OSEventGrp &amp;= ~OSMapTbl[prio &gt;&gt; 3]&lt;/center&gt;\n\n+ \u5728\u7b49\u5f85\u4e8b\u4ef6\u4efb\u52a1\u5217\u8868\u4e2d\u67e5\u627e\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u4efb\u52a1(\u5bfb\u627e\u6700\u9ad8\u4f18\u5148\u7ea7)\n&lt;center&gt;y = OSUnMapTbl[pevent-&gt;OSEventGrp]&lt;/center&gt;\n&lt;center&gt;x = OSUnMapTbl[pevent-&gt;OSEventTbl[y]]&lt;/center&gt;\n&lt;center&gt;prio = (y &lt;&lt; 3) + x&lt;/center&gt;\n\n\n\u5355\u4e2a\u4e8b\u4ef6\u63a7\u5236\u5757: \u521b\u5efa\u5355\u4e2a\u4e8b\u4ef6,\u5bf9\u5e94\u6709\u5bf9\u591a\u4e2a\u4efb\u52a1\u5728\u7b49\u5f85\u8be5\u4e8b\u4ef6\u53d1\u751f,\u5373\u7b49\u5f85\u4e8b\u4ef6\u4efb\u52a1\u5217\u8868\n\u4e8b\u4ef6\u63a7\u5236\u5757\u94fe\u8868: \u521b\u5efa\u6709\u591a\u4e2a\u4e8b\u4ef6,\u4f9d\u6b21\u4e32\u8054\u8d77\u6765\n\u7a7a\u95f2\u4e8b\u4ef6\u63a7\u5236\u5757\u94fe\u8868: $\\mu$cos\u91c7\u7528\u9759\u6001\u7f16\u8bd1\u65b9\u5f0f,\u63d0\u524d\u5206\u914d\u597d\u5e76\u521d\u59cb\u5316\u4e8b\u4ef6\u63a7\u5236\u5757\n\n\u3010\u5bf9\u4e8b\u4ef6\u63a7\u5236\u5757\u7684\u64cd\u4f5c\u3011\n+ \u521d\u59cb\u5316\u4e8b\u4ef6\u63a7\u5236\u5757: \u53ea\u521d\u59cb\u5316\u7b49\u5f85\u4e8b\u4ef6\u4efb\u52a1\u5217\u8868\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230823.png\" alt=\"OSEventWaitListInit Function\" width=\"50%\"/&gt;\n\n+ \u4f7f\u5f53\u524d\u4efb\u52a1\u8fdb\u5165\u7b49\u5f85\u67d0\u4e8b\u4ef6\u7684\u72b6\u6001(P\u64cd\u4f5c)\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230840.png\" alt=\"OSEventTaskWait Function\" width=\"50%\"/&gt;\n\n+ \u5f53\u524d\u4efb\u52a1\u4e0d\u5c31\u7eea,\u5e76\u5c06\u8be5\u4efb\u52a1\u653e\u7f6e\u7b49\u5f85\u4efb\u52a1\u5217\u8868\u4e2d\n+ \u64cd\u4f5c\u7cfb\u7edf\u5b9e\u73b0\u591a\u4e2a\u7b49\u5f85\u961f\u5217, \u6bcf\u4e2a\u4e8b\u4ef6\u7ef4\u62a4\u4e00\u4e2a\u961f\u5217\n+ \u4efb\u52a1\u4e0d\u662f\u51fa\u4e8e\u5c31\u7eea\u961f\u5217(\u4efb\u52a1\u5c31\u7eea\u8868)\u4e2d,\u5c31\u662f\u5728\u7b49\u5f85\u961f\u5217(\u4e8b\u4ef6\u7b49\u5f85\u4efb\u52a1\u5217\u8868)\u4e2d\n\n+ \u4f7f\u4e00\u4e2a\u4efb\u52a1\u5c31\u7eea\uff08\u8131\u79bb\u7b49\u5f85\u72b6\u6001\uff09(V\u64cd\u4f5c)\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823230941.png\" alt=\"OSEventTaskRdy Function\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231002.png\" alt=\"OSEventTaskRdy Function\" width=\"50%\"/&gt;\n\nOSTCBStat\u4efb\u52a1\u72b6\u6001\u53ef\u4ee5\u7b49\u5f85\u591a\u4e2a\u4e8b\u4ef6,\u7b49\u4fe1\u53f7\u91cf,\u90ae\u7bb1,\u961f\u5217\u7b49,\u8fd9\u51e0\u79cd\u673a\u5236\u4e92\u4e0d\u5f71\u54cd\n\n+ \u56e0\u4e3a\u7b49\u5f85\u8d85\u65f6\u800c\u4f7f\u4efb\u52a1\u8fdb\u5165\u5c31\u7eea\u6001\n\n### $\\mu$C/OS-II \u4e2d\u4fe1\u53f7\u91cf\u7684\u5b9e\u73b0\u673a\u5236\n\u3010\u521b\u5efa\u4fe1\u53f7\u91cf\u3011\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231022.png\" alt=\"OSSemCreate Function\" width=\"50%\"/&gt;\n\n\u3010P\u64cd\u4f5c, \u7b49\u5f85\u4e00\u4e2a\u4fe1\u53f7\u91cf\u3011\n{% message color:info%}\nP\u64cd\u4f5c\u4e0d\u80fd\u5728\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u4e2d\u8fdb\u884c\n{% endmessage %}\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231046.png\" alt=\"OSSemPend Function\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231105.png\" alt=\"OSSemPend Function\" width=\"50%\"/&gt;\n\n\u3010V\u64cd\u4f5c, \u53d1\u51fa\u4e00\u4e2a\u4fe1\u53f7\u91cf\u3011\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231140.png\" alt=\"OSSemPost Function\" width=\"50%\"/&gt;\n\n### \u4fe1\u53f7\u91cf\u8d85\u65f6\u673a\u5236\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231159.png\" alt=\"\u7b49\u5f85\u8d85\u65f6\u65f6\u95f4\" width=\"60%\"/&gt;\n\n## \u7b2c\u5341\u4e94\u8bb2 $\\mu$COS-II\u7684\u4efb\u52a1\u901a\u4fe1\u673a\u5236II\n### \u4f18\u5148\u7ea7\u53cd\u8f6c\u7684\u6982\u5ff5\n{% message color:info%}\n\u80cc\u666f: $\\mu$C/OS-II\u4e0d\u5141\u8bb8\u591a\u4efb\u52a1\u5904\u4e8e\u540c\u4e00\u4f18\u5148\u7ea7,\u5728\u5229\u7528\u4fe1\u53f7\u91cf\u5b9e\u73b0\u4e92\u65a5\u64cd\u4f5c\u65f6\uff0c\u4efb\u52a1\u662f\u4e0d\u5bf9\u7b49\u7684\uff0c\u5b58\u5728\u4f18\u5148\u7ea7\u5dee\u5f02\n{% endmessage %}\n\n\u3010\u4f18\u5148\u7ea7\u7ffb\u8f6c\u3011\n\u5728\u6709\u591a\u4e2a\u4efb\u52a1\u9700\u8981\u4f7f\u7528\u5171\u4eab\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u88ab\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u963b\u585e\uff0c\u5e76\u7b49\u5f85\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u6267\u884c\u7684\u73b0\u8c61\uff1b\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u9700\u8981\u7b49\u5f85\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u91ca\u653e\u8d44\u6e90\uff0c\u800c\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u53c8\u6b63\u5728\u7b49\u5f85\u4e2d\u7b49\u4f18\u5148\u7ea7\u4efb\u52a1\uff0c\u8fd9\u79cd\u73b0\u8c61\u5c31\u88ab\u79f0\u4e3a\u4f18\u5148\u7ea7\u53cd\u8f6c\n\n\u3010\u89e3\u51b3\u65b9\u6848\u3011\n+ \u4f18\u5148\u7ea7\u7ee7\u627f\u534f\u8bae\n\u5f53\u66f4\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1Ta\u88ab\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1Td\u963b\u585e\u65f6\uff0cTd\u6682\u65f6\u7ee7\u627fTa\u7684\u4f18\u5148\u7ea7\uff1b\u8fd9\u5c06\u9632\u6b62\u4e2d\u95f4\u4f18\u5148\u7ea7\u4efb\u52a1\u62a2\u5360\u4efb\u52a1Td\uff0c\u800c\u4f7f\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1Ta\u7684\u963b\u585e\u65f6\u95f4\u5ef6\u957f\n+ \u4f18\u5148\u7ea7\u5929\u82b1\u677f\n\u5c06\u7533\u8bf7\u67d0\u8d44\u6e90\u7684\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u63d0\u5347\u5230\u53ef\u80fd\u8bbf\u95ee\u8be5\u8d44\u6e90\u7684\u6240\u6709\u4efb\u52a1\u4e2d\u6700\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u7684\u4f18\u5148\u7ea7(\u8fd9\u4e2a\u4f18\u5148\u7ea7\u79f0\u4e3a\u8be5\u8d44\u6e90\u7684\u4f18\u5148\u7ea7\u5929\u82b1\u677f)\n+ \u533a\u522b\n    + \u4f18\u5148\u7ea7\u7ee7\u627f\uff1a\u53ea\u6709\u5f53**\u5360\u6709\u8d44\u6e90\u7684\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u88ab\u963b\u585e**\u65f6\uff0c\u624d\u4f1a\u63d0\u9ad8\u5360\u6709\u8d44\u6e90\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\n    + \u4f18\u5148\u7ea7\u5929\u82b1\u677f\uff1a\u4e0d\u8bba\u662f\u5426\u53d1\u751f\u963b\u585e\u90fd\u63d0\u5347\n\n### $\\mu$COS-II \u4e2d\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf\u5b9e\u73b0\u673a\u5236 \n\u3010\u4f18\u5148\u7ea7\u7ee7\u627f\u4f18\u5148\u7ea7\u3011\n$\\mu$C/OS-II\u4e2d\uff0c\u5728\u5904\u7406\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf\u65f6\uff0c**\u6ca1\u6709\u88ab\u5360\u7528\u7684**\u3001**\u7565\u9ad8\u4e8e\u6700\u9ad8\u4f18\u5148\u7ea7\u7684\u4f18\u5148\u7ea7**\u88ab\u4fdd\u7559\u7ed9\u201c\u4f18\u5148\u7ea7\u7ee7\u627f\u4f18\u5148\u7ea7\uff08PIP\uff09\u201d\uff0c\u878d\u5408\u4e86\u201c\u4f18\u5148\u7ea7\u7ee7\u627f\u201d\u548c\u201c\u4f18\u5148\u7ea7\u5929\u82b1\u677f\u201d\u7684\u89e3\u51b3\u65b9\u6848\n+ \u53ea\u6709\u5728\u53d1\u751f\u4f18\u5148\u7ea7\u53cd\u8f6c\u65f6\u624d\u63d0\u5347\u4f18\u5148\u7ea7\n\n\u3010uC/OS \u4e2d\u4e92\u65a5\u578b\u4fe1\u53f7\u91cfMutex\u3011\u2014\u2014\u5bf9\u6bd4\u4fe1\u53f7\u91cf\u4e8b\u4ef6\u7684\u5b9e\u73b0\u673a\u5236\n\u53ea\u80fd\u505a\u4e92\u65a5\u64cd\u4f5c\uff0c\u4fe1\u53f7\u91cf\u5c5e\u4e8e\u4e8c\u503c\u4fe1\u53f7\u91cf;Mutex\u662f\u4e8b\u4ef6\u7684\u4e00\u79cd, \u53ea\u80fd\u4f9b\u4efb\u52a1\u4f7f\u7528\u5e76\u4e14\u56e0\u4e3a\u7275\u626f\u5230\u4f18\u5148\u7ea7\u7ee7\u627f\u4f18\u5148\u7ea7\u7b49\u4efb\u52a1\u7ea7\u7684\u5904\u7406\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528\u4e8e\u4e2d\u65ad\n\n+ \u5efa\u7acb\u4e00\u4e2a\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231307.png\" alt=\"OSMutexCreate Function\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231322.png\" alt=\"OSMutexCreate\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231342.png\" alt=\"Mutex\u7684TCB\u7ed3\u6784\" width=\"50%\"/&gt;\n\nOSEventCnt\u88ab\u5212\u5206\u4e3a\u9ad88\u4f4d\u548c\u4f4e8\u4f4d\uff0c\u5176\u4e2d\u9ad88\u4f4d\u8868\u793a\u4fdd\u7559\u4f18\u5148\u7ea7\uff1b\u4f4e8\u4f4d\u4e3a\u51681\u65f6\u8868\u793a\u4fe1\u53f7\u91cf\u6709\u6548\u6ca1\u6709\u88ab\u5360\u7528\uff0c\u5f53\u4fe1\u53f7\u91cf\u88ab\u5360\u7528\u65f6\uff0c\u4f4e8\u4f4d\u6807\u8bc6\u5360\u6709\u8be5\u4fe1\u53f7\u91cf\u7684\u4efb\u52a1\u4f18\u5148\u7ea7\u53730$\\sim$63\n\n+ \u7b49\u5f85\u4e00\u4e2a\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf(P\u64cd\u4f5c)\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231402.png\" alt=\"OSMutexPend\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231424.png\" alt=\"OSMutexPend\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231443.png\" alt=\"OSMutexPend\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231459.png\" alt=\"OSMutexPend\" width=\"50%\"/&gt;\n\n+ \u91ca\u653e\u4e00\u4e2a\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf(V\u64cd\u4f5c)\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231521.png\" alt=\"OSMutexPost\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231541.png\" alt=\"OSMutexPost\" width=\"50%\"/&gt;\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231602.png\" alt=\"OSMutexPost\" width=\"50%\"/&gt;\n\n### \u5176\u5b83\u4efb\u52a1\u95f4\u901a\u4fe1\u673a\u5236\n+ \u6d88\u606f\u90ae\u7bb1\n$\\mu$C/OS-II\u4e2d\u7684\u53e6\u4e00\u79cd\u57fa\u4e8e\u4e8b\u4ef6\u7684\u901a\u4fe1\u673a\u5236\uff0c\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u4efb\u52a1\u6216\u8005\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u5411\u53e6\u4e00\u4e2a\u4efb\u52a1\u53d1\u9001\u4e00\u4e2a\u6307\u9488\u578b\u7684\u53d8\u91cf\u3002\u8be5\u6307\u9488\u6307\u5411\u4e86\u4e00\u4e2a\u5305\u542b\u4e86\u201c\u6d88\u606f\u201d\u7684\u7279\u5b9a\u6570\u636e\u7ed3\u6784\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231712.png\" alt=\"\u6d88\u606f\u90ae\u7bb1\u7684TCB\u7ed3\u6784\" width=\"50%\"/&gt;\n\n+ \u6d88\u606f\u961f\u5217\n\u6d88\u606f\u961f\u5217\u662f$\\mu$C/OS-II\u4e2d\u53c8\u4e00\u79cd\u57fa\u4e8e\u4e8b\u4ef6\u7684\u901a\u4fe1\u673a\u5236\u3002\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u4efb\u52a1\u6216\u8005\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u5411\u53e6\u4e00\u4e2a\u4efb\u52a1\u53d1\u9001\u591a\u4e2a\u4ee5\u6307\u9488\u65b9\u5f0f\u5b9a\u4e49\u7684\u53d8\u91cf\u3002\n    + \u6839\u636e\u5177\u4f53\u5e94\u7528\uff0c\u6bcf\u4e2a\u6307\u9488\u6307\u5411\u7684\u6570\u636e\u7ed3\u6784\u53ef\u4ee5\u6709\u6240\u4e0d\u540c\n    + \u53ef\u770b\u505a\u591a\u4e2a\u90ae\u7bb1\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u53ea\u662f\u5171\u7528\u4e86\u540c\u4e00\u4e2a\u7b49\u5f85\u4efb\u52a1\u5217\u8868\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231727.png\" alt=\"\u6d88\u606f\u961f\u5217\u7684TCB\u7ed3\u6784\" width=\"50%\"/&gt;\n\n+ \u4e8b\u4ef6\u6807\u5fd7\u7ec4\n$\\mu$C/OS-II\u4e2d\u4efb\u52a1\u53ef\u4ee5\u7b49\u5f85\u591a\u4e2a\u4e8b\u4ef6\u7684\u5230\u6765\u3002\u4e00\u4e2a\u4efb\u52a1\u4e5f\u53ef\u4ee5\u53d1\u51fa\u591a\u4e2a\u4e8b\u4ef6\uff0c\u4efb\u52a1\u548c\u4e8b\u4ef6\u4e4b\u95f4\u6709\u7740\u591a\u5bf9\u591a\u7684\u6620\u5c04\u5173\u7cfb\u3002\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231746.png\" alt=\"\u4e8b\u4ef6\u6807\u5fd7\u7ec4\u7684TCB\u7ed3\u6784\" width=\"50%\"/&gt;\n\n### $\\mu$C/OS-II\u7684\u5185\u5b58\u5206\u533a\u7ba1\u7406 \n$\\mu$C/OS-II\u5c06\u5185\u5b58\u6309\u5206\u533a\u6765\u5904\u7406\n+ \u53ef\u4ee5\u5206\u914d\u548c\u91ca\u653e\u56fa\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\u5757\n+ \u89e3\u51b3\u4e86\u5185\u5b58\u788e\u7247\u95ee\u9898\n+ \u5206\u914d\u3001\u91ca\u653e\u51fd\u6570\u6267\u884c\u65f6\u95f4\u786e\u5b9a\u4e86\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231802.png\" alt=\"\u5185\u5b58\u5206\u533a\u7ba1\u7406\u673a\u5236\" width=\"50%\"/&gt;\n\n## \u9898\u578b\u5206\u6790\n### \u7b80\u7b54\u9898\n#### \u5d4c\u5165\u5f0f\u7cfb\u7edf\u7684\u5b9a\u4e49\n+ \u6807\u51c6\u5b9a\u4e49\uff1a\u4ee5\u5e94\u7528\u4e3a\u4e2d\u5fc3\u3001\u4ee5\u8ba1\u7b97\u673a\u6280\u672f\u4e3a\u57fa\u7840\uff0c\u8f6f\u3001\u786c\u4ef6\u53ef\u88c1\u526a\uff0c\u9002\u5e94\u5e94\u7528\u7cfb\u7edf\u5bf9\u529f\u80fd\u3001\u53ef\u9760\u6027\u3001\u6210\u672c\u3001\u4f53\u79ef\u3001\u529f\u8017\u7b49\u4e25\u683c\u8981\u6c42\u7684\u4e13\u7528\u8ba1\u7b97\u673a\u7cfb\u7edf\n+ \u7b80\u5355\u63cf\u8ff0\uff1a\u5d4c\u5165\u5230\u5bf9\u8c61\u4f53\u4e2d\u7684\u4e13\u7528\u8ba1\u7b97\u673a\u7cfb\u7edf\n\n#### \u5d4c\u5165\u5f0f\u7cfb\u7edf\u7684\u4e09\u8981\u7d20\n1. \u5d4c\u5165\u5f0f\uff1a\u5d4c\u5165\u5230\u5bf9\u8c61\u4f53\u7cfb\u4e2d\uff0c\u6709\u5bf9\u8c61\u73af\u5883\u8981\u6c42\n\n2. \u4e13\u7528\u6027\uff1a\u8f6f\u3001\u786c\u4ef6\u6309\u5bf9\u8c61\u8981\u6c42\u88c1\u526a\n\n3. \u8ba1\u7b97\u673a\uff1a\u5b9e\u73b0\u5bf9\u8c61\u7684\u667a\u80fd\u5316\u529f\u80fd\n\n#### \u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e0e\u901a\u7528\u8ba1\u7b97\u673a\u7684\u533a\u522b\n1. \u4e13\u7528\u6027\n2. \u5c0f\u578b\u5316(\u8d44\u6e90\u53d7\u9650)\n3. \u8f6f\u786c\u4ef6\u8bbe\u8ba1\u4e00\u4f53\u5316\n4. \u9700\u8981\u4ea4\u53c9\u5f00\u53d1\u73af\u5883\n\n#### \u7b80\u8ff0\u5d4c\u5165\u5f0f\u5b9e\u65f6\u7cfb\u7edf\u7684\u7279\u70b9\n+ \u5b9e\u65f6\u6027\n\u5d4c\u5165\u5f0f\u5b9e\u65f6\u7cfb\u7edf\u5206\u4e3a\u786c\u5b9e\u65f6\u7cfb\u7edf\u548c\u8f6f\u5b9e\u65f6\u7cfb\u7edf\uff0c\u5bf9\u4efb\u52a1\u7684\u54cd\u5e94\u65f6\u95f4\u6709\u6781\u9ad8\u7684\u8981\u6c42\u3002\u7cfb\u7edf\u5fc5\u987b\u5728\u89c4\u5b9a\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u7279\u5b9a\u4efb\u52a1\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u6545\u969c\u6216\u6027\u80fd\u4e0b\u964d\n+ \u7ed3\u679c\u6b63\u786e\u6027\n\u5d4c\u5165\u5f0f\u5b9e\u65f6\u7cfb\u7edf\u7684\u6b63\u786e\u6027\u4e0d\u4ec5\u4f9d\u8d56\u4e8e\u7cfb\u7edf\u8ba1\u7b97\u7684\u903b\u8f91\u7ed3\u679c(\u8ba1\u7b97\u903b\u8f91)\uff0c\u8fd8\u4f9d\u8d56\u4e8e\u4ea7\u751f\u8fd9\u4e9b\u7ed3\u679c\u7684\u65f6\u95f4(\u8ba1\u7b97\u65f6\u95f4)\n+ \u53ef\u9884\u6d4b\u6027\n\u5d4c\u5165\u5f0f\u5b9e\u65f6\u7cfb\u7edf\u9700\u8981\u63d0\u4f9b\u4efb\u52a1\u6267\u884c\u65f6\u95f4\u7684\u53ef\u9884\u6d4b\u6027\uff0c\u5373\u4efb\u52a1\u5728\u4e0d\u540c\u60c5\u51b5\u4e0b\u90fd\u80fd\u5728\u89c4\u5b9a\u7684\u65f6\u95f4\u5185\u5b8c\u6210\n+ \u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027\n\u5bf9\u4e8e\u5d4c\u5165\u5f0f\u5b9e\u65f6\u7cfb\u7edf\u6765\u8bf4\uff0c\u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027\u81f3\u5173\u91cd\u8981\u3002\u7cfb\u7edf\u5728\u957f\u65f6\u95f4\u8fd0\u884c\u4e2d\u4e0d\u80fd\u53d1\u751f\u5d29\u6e83\uff0c\u800c\u4e14\u5bf9\u4e8e\u5f02\u5e38\u60c5\u51b5\u7684\u5904\u7406\u5fc5\u987b\u662f\u53ef\u9760\u7684\n\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823231903.png\"/&gt;\n\n#### CPU\u5bc4\u5b58\u5668\u4e0e\u5185\u5b58\u7684\u533a\u522b\n+ CPU\u5bc4\u5b58\u5668\u662f\u4f4d\u4e8eCPU\u5185\u90e8\u7684\u5c0f\u578b\u3001\u9ad8\u901f\u5b58\u50a8\u5355\u5143\uff0c\u7528\u4e8e\u4e34\u65f6\u5b58\u50a8\u548c\u5feb\u901f\u8bbf\u95ee\u6307\u4ee4\u548c\u6570\u636e\uff1b\n+ \u5185\u5b58\u662f\u4f4d\u4e8e\u8ba1\u7b97\u673a\u4e3b\u677f\u4e0a\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u7528\u4e8e\u5b58\u50a8\u7a0b\u5e8f\u548c\u6570\u636e\uff0c\u4f9bCPU\u8bfb\u53d6\u548c\u5199\u5165\uff1b\n+ \u5bc4\u5b58\u5668\u901f\u5ea6\u66f4\u5feb\u4f46\u5bb9\u91cf\u6709\u9650\uff0c\u7528\u4e8e\u4e34\u65f6\u5b58\u50a8\uff1b\n+ \u5185\u5b58\u901f\u5ea6\u8f83\u6162\u4f46\u5bb9\u91cf\u8f83\u5927\uff0c\u7528\u4e8e\u957f\u671f\u5b58\u50a8\u3002\n#### RISC\u6307\u4ee4\u96c6\u53ea\u5305\u542b\u6709\u5c11\u91cf\u5e38\u7528\u6307\u4ee4\uff0c\u4e3a\u4ec0\u4e48\u6709\u65f6\u53cd\u800c\u6bd4CISC\u6307\u4ee4\u96c6\u7684\u6027\u80fd\u66f4\u597d\uff1f\n+ \u6307\u4ee4\u96c6\u5206\u6790\uff1a\u6307\u4ee4\u590d\u6742\u5ea6\u5f71\u54cd\u5904\u7406\u5668\u5b9e\u73b0\u6027\u80fd\uff0cCISC\u4e2d20%\u7684\u6307\u4ee4\u4f7f\u7528\u7387\u8fbe\u523080%\uff0c\u4f4680%\u7684\u590d\u6742\u6307\u4ee4\u4f7f\u7528\u7387\u4ec520%\uff0c\u800cRISC\u53ea\u5305\u542b\u6709\u5c11\u91cf\u5e38\u7528\u6307\u4ee4\uff0c\u4e0d\u4f1a\u9020\u6210\u6307\u4ee4\u96c6\u7684\u5197\u4f59\uff1b\n+ \u6307\u4ee4\u8bd1\u7801\u903b\u8f91\uff1aCISC\u6307\u4ee4\u96c6\u91c7\u7528\u5fae\u6307\u4ee4\u6280\u672f\u589e\u52a0\u4e86\u786c\u4ef6\u590d\u6742\u5ea6\uff0c\u800cRISC\u91c7\u7528\u786c\u8fde\u7ebf\u7684\u6307\u4ee4\u8bd1\u7801\u903b\u8f91\uff0c\u5f00\u53d1\u7b80\u5355\uff1b\n+ \u6307\u4ee4\u6267\u884c\u5206\u6790\uff1aCISC\u6307\u4ee4\u957f\u5ea6\u4e0d\u4e00\uff0c\u6267\u884c\u5355\u6761\u6307\u4ee4\u9700\u8981\u591a\u4e2a\u5468\u671f\uff0c\u800cRISC\u6307\u4ee4\u957f\u5ea6\u56fa\u5b9a\uff0c\u4e00\u4e2a\u5468\u671f\u6267\u884c\u4e00\u6761\u6307\u4ee4\uff0c\u901a\u8fc7\u5c11\u91cf\u5e38\u7528\u6307\u4ee4\u7684\u7ec4\u5408\u5b9e\u73b0\u590d\u6742\u7684\u529f\u80fd\uff0c\u5bb9\u6613\u5b9e\u73b0\u9ad8\u6027\u80fd\uff1b\n+ Load/Store\u7ed3\u6784\uff1aRISC\u8fd8\u91c7\u7528Load/Store\u7ed3\u6784\u8fdb\u884c\u4f18\u5316\uff0c\u5b8c\u6210\u6570\u636e\u5728\u5bc4\u5b58\u5668\u548c\u5b58\u50a8\u5668\u4e4b\u95f4\u7684\u4f20\u8f93\uff0c\u4fdd\u8bc1\u5904\u7406\u5668\u76f4\u63a5\u4ece\u5bc4\u5b58\u5668\u4e2d\u83b7\u53d6\u64cd\u4f5c\u6570\uff0c\u80fd\u591f\u52a0\u5feb\u8fd0\u7b97\u7684\u6267\u884c\u6548\u7387\uff0c\u5b9e\u73b0\u66f4\u9ad8\u7684\u6027\u80fd\u3002\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823234724.png\"/&gt;\n\n#### \u7b80\u8ff0\u5b8f\u548c\u51fd\u6570\u7684\u533a\u522b\uff1f\u4e8c\u8005\u5404\u81ea\u7684\u4f18\u7f3a\u70b9\u662f\u4ec0\u4e48\uff1f\n+ \u7f16\u8bd1\u9636\u6bb5\uff1a\u7f16\u8bd1\u5668\u4f1a\u5c06\u76f8\u5173\u4ee3\u7801\u653e\u5230\u5b8f\u540d\u51fa\u73b0\u7684\u6bcf\u4e00\u4e2a\u5730\u65b9\u5e76\u4e14\u5b8f\u5185\u5bb9\u4f1a\u88ab\u76f4\u63a5\u5c55\u5f00\u5230\u4ee3\u7801\u4e2d\uff0c\u5b8f\u7684\u4ee3\u7801\u5728\u4efb\u4f55\u51fa\u73b0\u5b8f\u540d\u7684\u5730\u65b9\u90fd\u4f1a\u7f16\u8bd1\u4e00\u6b21\uff1b\u800c\u51fd\u6570\u7684\u4ee3\u7801\u53ea\u9700\u8981\u7f16\u8bd1\u4e00\u6b21\uff0c\u5728\u7f16\u8bd1\u65f6\u5b9a\u4e49\uff0c\u4f46\u662f\u5b9e\u9645\u5728\u6267\u884c\u53d1\u751f\u5728\u8fd0\u884c\u65f6\n+ \u8c03\u7528\u8fd4\u56de\uff1a\u4f7f\u7528\u5b8f\u65f6\u4e0d\u9700\u8981\u4fdd\u5b58/\u6062\u590d\u4e0a\u4e0b\u6587\uff0c\u4e5f\u4e0d\u5fc5\u8fd4\u56de\uff1b\u800c\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u9700\u8981\u4fdd\u5b58/\u56de\u590d\u4e0a\u4e0b\u6587\uff0c\u9700\u8981\u8fd4\u56de\uff0c\u4f1a\u6709\u51fd\u6570\u8c03\u7528\u5f00\u9500\uff1b\n+ \u4f18\u7f3a\u70b9\uff1a\u5b8f\u9002\u7528\u4e8e\u4ee3\u7801\u7b80\u5355\u7684\u60c5\u51b5\uff0c\u4e0d\u4f1a\u6709\u51fd\u6570\u8c03\u7528\u5f00\u9500\uff0c\u4f46\u662f\u5bb9\u6613\u9020\u6210\u4ee3\u7801\u81a8\u80c0\uff1b\u51fd\u6570\u9002\u7528\u4e8e\u4ee3\u7801\u590d\u6742\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u5b8c\u6210\u66f4\u590d\u6742\u7684\u529f\u80fd\uff0c\u4f46\u662f\u4f1a\u6709\u51fd\u6570\u8c03\u7528\u5f00\u9500\u3002\n\n#### \u7b80\u8ff0ARM\u5f02\u5e38\u54cd\u5e94\u8fc7\u7a0b\u4ee5\u53ca\u5f02\u5e38\u5411\u91cf\u8868\u7684\u4f5c\u7528\n\u3010ARM\u5f02\u5e38\u5904\u7406\u3011\n+ \u5f53\u4e2d\u65ad\u53d1\u751f\u65f6\uff0c\u7cfb\u7edf\u6267\u884c\u5b8c\u5f53\u524d\u6307\u4ee4\u540e\uff0c\u4f1a\u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u5f02\u5e38\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u5904\u6267\u884c\uff1b\n+ \u6267\u884c\u5b8c\u6210\u540e\uff0c\u7a0b\u5e8f\u8fd4\u56de\u5230\u53d1\u751f\u4e2d\u65ad\u7684\u6307\u4ee4\u7684\u4e0b\u4e00\u6761\u6307 \u4ee4\u5904\u6267\u884c\uff1b\n+ \u8fdb\u5165\u5f02\u5e38\u4e2d\u65ad\u5904\u7406\u7a0b\u5e8f\u65f6\u8981\u4fdd\u5b58\u73b0\u573a\uff0c\u8fd4\u56de\u65f6\u8981\u6062\u590d\u73b0\u573a\uff1b\n\n\u3010\u5f02\u5e38\u5411\u91cf\u8868\u3011\n+ \u5f53\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u5904\u7406\u5668\u4f1a\u628aPC\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u7279\u5b9a\u7684\u5b58\u50a8\u5668\u5730\u5740\uff1b\n+ \u8fd9\u4e00\u5730\u5740\u653e\u5728\u88ab\u79f0\u4e3a\u5411\u91cf\u8868(vector table)\u7684\u7279\u5b9a\u5730\u5740\u8303\u56f4\u5185\uff0c\u7528\u4e8e\u5bf9\u4e0d\u540c\u6a21\u5f0f\u7684\u5f02\u5e38\u63d0\u4f9b\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u7684\u5165\u53e3\uff1b\n+ \u5f02\u5e38\u5411\u91cf\u8868\u901a\u5e38\u653e\u5728\u5b58\u50a8\u5730\u5740\u7684\u4f4e\u7aef\uff1b\n\n#### \u7b80\u8ff0$\\mu$cos\u4e2d\u4f18\u5148\u7ea7\u4f4d\u56fe\u7b97\u6cd5\u7684\u4f18\u70b9\n+ \u5e38\u6570\u65f6\u95f4\u9009\u62e9\u4efb\u52a1\uff0c\u65e0\u8bba\u4efb\u52a1\u7684\u6570\u91cf\u5982\u4f55\uff0c\u9009\u62e9\u6700\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u7684\u65f6\u95f4\u662f\u786e\u5b9a\u7684\n+ \u5b9e\u73b0\u7b80\u5355\uff0c\u5bb9\u6613\u7ef4\u62a4\n+ \u53ef\u4ee5\u5feb\u901f\u9009\u62e9\u6700\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\n+ \u5185\u5b58\u5360\u7528\u4f4e\n\n#### \u5728ARM\u6c47\u7f16\u8bed\u8a00\u7a0b\u5e8f\u91cc\uff0c\u4ec0\u4e48\u662f\u4f2a\u6307\u4ee4\uff0c\u4ed6\u4eec\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f\n+ ARM\u4f2a\u6307\u4ee4\u4e0d\u662f\u771f\u6b63\u7684ARM\u6307\u4ee4\uff0c\u5728\u6c47\u7f16\u7f16\u8bd1\u5668\u5bf9\u6e90\u7a0b\u5e8f\u8fdb\u884c\u6c47\u7f16\u5904\u7406\u65f6\u4f1a\u88ab\u66ff\u6362\u6210\u5bf9\u5e94\u7684ARM\u6307\u4ee4\u6216\u6307\u4ee4\u5e8f\u5217\n+ \u4f2a\u6307\u4ee4\u4e3b\u8981\u7528\u4e8e\u6307\u5bfc\u6c47\u7f16\u5668\u600e\u6837\u5bf9\u6e90\u7a0b\u5e8f\u8fdb\u884c\u6c47\u7f16\uff0c\u5728\u6c47\u7f16\u540e\u4e0d\u4f1a\u751f\u6210\u673a\u5668\u7801\uff0c\u4ec5\u5728\u6c47\u7f16\u8fc7\u7a0b\u4e2d\u8d77\u4f5c\u7528\n#### \u80fd\u5426\u7528\u5168\u5c40\u53d8\u91cf\u6765\u5b9e\u73b0\u4efb\u52a1\u95f4\u7684\u901a\u4fe1\uff1f\u5b83\u6709\u4ec0\u4e48\u4f18\u7f3a\u70b9\uff1f\u8be5\u5982\u4f55\u6b63\u786e\u4f7f\u7528\uff1f\n\u53ef\u4ee5\u7528\u5168\u5c40\u53d8\u91cf\u5b9e\u73b0\u4efb\u52a1\u95f4\u7684\u901a\u4fe1\n\n+ \u4f18\u70b9:\n    + \u7b80\u5355\u76f4\u89c2\uff1a \u4f7f\u7528\u5168\u5c40\u53d8\u91cf\u7b80\u5316\u4e86\u4efb\u52a1\u95f4\u901a\u4fe1\u7684\u5b9e\u73b0\uff0c\u56e0\u4e3a\u6240\u6709\u4efb\u52a1\u90fd\u80fd\u591f\u76f4\u63a5\u8bbf\u95ee\u8fd9\u4e9b\u5171\u4eab\u53d8\u91cf\n    + \u9ad8\u6548\uff1a \u5168\u5c40\u53d8\u91cf\u7684\u8bbf\u95ee\u901a\u5e38\u6bd4\u901a\u8fc7\u6d88\u606f\u4f20\u9012\u7b49\u5176\u4ed6\u901a\u4fe1\u673a\u5236\u66f4\u4e3a\u9ad8\u6548\uff0c\u56e0\u4e3a\u76f4\u63a5\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\n+ \u7f3a\u70b9\uff1a\n    + \u7f3a\u5c11\u540c\u6b65\u4e0e\u4e92\u65a5\u5173\u7cfb\u7684\u7ba1\u7406\u673a\u5236\uff1a \u5982\u679c\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u5c1d\u8bd5\u8bfb\u53d6\u6216\u5199\u5165\u5168\u5c40\u53d8\u91cf\uff0c\u53ef\u80fd\u5bfc\u81f4\u610f\u5916\u884c\u4e3a\u548c\u6570\u636e\u635f\u574f\n    + \u96be\u4ee5\u8c03\u8bd5\uff1a \u7531\u4e8e\u591a\u4e2a\u4efb\u52a1\u53ef\u4ee5\u540c\u65f6\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\uff0c\u53d1\u73b0\u548c\u8c03\u8bd5\u7531\u4e8e\u5171\u4eab\u53d8\u91cf\u800c\u5f15\u8d77\u7684\u95ee\u9898\u53ef\u80fd\u4f1a\u66f4\u52a0\u56f0\u96be\n    + \u6269\u5c55\u6027\u5dee\uff1a \u5f53\u7cfb\u7edf\u89c4\u6a21\u6269\u5927\u65f6\uff0c\u5168\u5c40\u53d8\u91cf\u7684\u7ba1\u7406\u548c\u7ef4\u62a4\u53ef\u80fd\u53d8\u5f97\u590d\u6742\uff0c\u4f7f\u5f97\u7cfb\u7edf\u7684\u6269\u5c55\u6027\u53d8\u5dee\n+ \u6b63\u786e\u4f7f\u7528\u7684\u65b9\u6cd5\uff1a\n    + \u52a0\u9501\u673a\u5236\uff1a \u5728\u8bbf\u95ee\u5168\u5c40\u53d8\u91cf\u65f6\uff0c\u4f7f\u7528\u52a0\u9501\u673a\u5236\u786e\u4fdd\u540c\u4e00\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u4efb\u52a1\u53ef\u4ee5\u8bbf\u95ee\u8be5\u53d8\u91cf\uff0c\u4ece\u800c\u907f\u514d\u76f8\u4e92\u7ade\u4e89\n    + \u539f\u5b50\u64cd\u4f5c\uff1a \u5bf9\u4e8e\u67d0\u4e9b\u7279\u5b9a\u7684\u53d8\u91cf\u64cd\u4f5c\uff0c\u53ef\u4ee5\u4f7f\u7528\u539f\u5b50\u64cd\u4f5c\uff0c\u4fdd\u8bc1\u6267\u884c\u5355\u6761\u6307\u4ee4\u4e0d\u4f1a\u88ab\u4e2d\u65ad\uff0c\u4f8b\u5982SWP\u5b9e\u73b0\u4e92\u65a5\u8bbf\u95ee\n    + \u4fe1\u53f7\u91cf\u673a\u5236\uff1a \u4f7f\u7528\u4fe1\u53f7\u91cf\u673a\u5236\u6765\u786e\u4fdd\u5bf9\u5168\u5c40\u53d8\u91cf\u7684\u5b89\u5168\u8bbf\u95ee\n#### $\\mu$cos\u4e2d\u4efb\u52a1\u7684\u8c03\u5ea6\u4e00\u822c\u5206\u4e3a\u4efb\u52a1\u7ea7\u8c03\u5ea6\u548c\u4e2d\u65ad\u7ea7\u8c03\u5ea6\uff0c\u7b80\u8ff0\u4e8c\u8005\u7684\u533a\u522b\n+ \u8c03\u5ea6\u89e6\u53d1\u6761\u4ef6\uff1a\u4efb\u52a1\u7ea7\u8c03\u5ea6\u662f\u5f53\u524d\u4efb\u52a1\u653e\u5f03CPU\u89e6\u53d1\u7684\uff0c\u4e2d\u65ad\u7ea7\u8c03\u5ea6\u662f\u7531\u4e2d\u65ad\u4e8b\u4ef6\u89e6\u53d1\u7684\n+ \u8c03\u5ea6\u65f6\u673a\u4e0d\u540c\uff1a\u4efb\u52a1\u7ea7\u8c03\u5ea6\u662f\u5728\u65f6\u95f4\u7247\u7528\u5b8c\u3001\u88ab\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u62a2\u5360\u6216\u7b49\u5f85\u67d0\u4e2a\u4e8b\u4ef6\u65f6\u8fdb\u884c\u7684\uff0c\u800c\u4e2d\u65ad\u7ea7\u8c03\u5ea6\u5728\u4e2d\u65ad\u8fd4\u56de\u7684\u65f6\u5019\u8fdb\u884c\u4efb\u52a1\u7684\u8c03\u5ea6\n+ \u6062\u590d\u73b0\u573a\u4e0d\u540c\uff1a\u4efb\u52a1\u7ea7\u8c03\u5ea6\u5728\u8c03\u5ea6\u70b9\u6bcf\u6b21\u90fd\u9700\u8981\u4fdd\u62a4\u73b0\u573a\u5e76\u6062\u590d\u73b0\u573a\uff0c\u800c\u4e2d\u65ad\u7ea7\u8c03\u5ea6\u56e0\u4e3a\u5728\u8fdb\u884c\u4e2d\u65ad\u5904\u7406\u65f6\u5df2\u4fdd\u5b58\u8fc7\u73b0\u573a\uff0c\u56e0\u6b64\u5728\u8c03\u5ea6\u70b9\u53ea\u9700\u6062\u590d\u73b0\u573a\n+ \u4efb\u52a1\u7ea7\u8c03\u5ea6\u4e0e\u4e2d\u65ad\u7ea7\u8c03\u5ea6\u662f\u4e24\u5957\u72ec\u7acb\u7684\u673a\u5236\uff0c\u4e92\u4e0d\u5f71\u54cd\n\n#### \u4f18\u5148\u7ea7\u53cd\u8f6c\u5982\u4f55\u53d1\u751f\uff1f\u53c8\u5982\u4f55\u89e3\u51b3\uff1f\n\u4f18\u5148\u7ea7\u53cd\u8f6c\u73b0\u8c61\uff1a\n\u5728\u6709\u591a\u4e2a\u4efb\u52a1\u9700\u8981\u4f7f\u7528\u5171\u4eab\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u88ab\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u963b\u585e\uff0c\u5e76\u7b49\u5f85\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u6267\u884c\u7684\u73b0\u8c61\uff1b\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u9700\u8981\u7b49\u5f85\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u91ca\u653e\u8d44\u6e90\uff0c\u800c\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u53c8\u6b63\u5728\u7b49\u5f85\u4e2d\u7b49\u4f18\u5148\u7ea7\u4efb\u52a1\uff0c\u8fd9\u5c31\u9020\u6210\u4e86\u4f18\u5148\u7ea7\u53cd\u8f6c\n\u89e3\u51b3\u65b9\u6848\uff1a\n+ \u4f18\u5148\u7ea7\u7ee7\u627f\u534f\u8bae\n\u5f53\u66f4\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1Ta\u88ab\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1Td\u963b\u585e\u65f6\uff0cTd\u6682\u65f6\u7ee7\u627fTa\u7684\u4f18\u5148\u7ea7\uff1b\u8fd9\u5c06\u9632\u6b62\u4e2d\u95f4\u4f18\u5148\u7ea7\u4efb\u52a1\u62a2\u5360\u4efb\u52a1Td\uff0c\u800c\u4f7f\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1Ta\u7684\u963b\u585e\u65f6\u95f4\u5ef6\u957f\n\n+ \u4f18\u5148\u7ea7\u5929\u82b1\u677f\n\u5c06\u7533\u8bf7\u67d0\u8d44\u6e90\u7684\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u63d0\u5347\u5230\u53ef\u80fd\u8bbf\u95ee\u8be5\u8d44\u6e90\u7684\u6240\u6709\u4efb\u52a1\u4e2d\u6700\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u7684\u4f18\u5148\u7ea7(\u8fd9\u4e2a\u4f18\u5148\u7ea7\u79f0\u4e3a\u8be5\u8d44\u6e90\u7684\u4f18\u5148\u7ea7\u5929\u82b1\u677f)\n\n+ \u4f18\u5148\u7ea7\u7ee7\u627f\u4f18\u5148\u7ea7\n\u5728\u5904\u7406\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf\u65f6\uff0c\u6ca1\u6709\u88ab\u5360\u7528\u7684\u3001\u7565\u9ad8\u4e8e\u6700\u9ad8\u4f18\u5148\u7ea7\u7684\u4f18\u5148\u7ea7\u88ab\u4fdd\u7559\uff0c\u5e76\u7528\u4e8e\u5728\u53d1\u751f\u4f18\u5148\u7ea7\u53cd\u8f6c\u65f6\u63d0\u5347\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\n\n#### \u7b80\u8ff0$\\mu$cos\u4e2d\u89e3\u51b3\u4e92\u65a5\u76843\u79cd\u529e\u6cd5\uff0c\u4ee5\u53ca\u5b83\u4eec\u5404\u81ea\u7684\u4f18\u7f3a\u70b9\n+ \u5173\u4e2d\u65ad\n    + \u4f18\u70b9\uff1a\u7b80\u5355\u76f4\u63a5\uff0c\u5b9e\u73b0\u8f83\u4e3a\u5bb9\u6613\n    + \u7f3a\u70b9\uff1a\u529b\u5ea6\u8f83\u5927\uff0c\u4e00\u65e6\u4f7f\u7528\u4f1a\u963b\u585e\u6574\u4e2a\u7cfb\u7edf\uff1b\u4e0d\u9002\u7528\u4e8e\u5b9e\u65f6\u7cfb\u7edf\uff0c\u53ef\u80fd\u5bfc\u81f4\u7cfb\u7edf\u54cd\u5e94\u4e0d\u53ca\u65f6\n+ \u7981\u6b62\u4efb\u52a1\u5207\u6362\u2014\u2014\u8c03\u5ea6\u5668\u4e0a\u9501\u673a\u5236\n    + \u4f18\u70b9\uff1a\u7cfb\u7edf\u5f00\u9500\u8f83\u5c0f\uff0c\n    + \u7f3a\u70b9\uff1a\u7531\u4e8e\u9501\u5b9a\u6240\u6709\u4efb\u52a1\uff0c\u6240\u4ee5\u82e5\u7981\u6b62\u5207\u6362\u65f6\u95f4\u8fc7\u957f\uff0c\u5f71\u54cd\u7cfb\u7edf\u7684\u54cd\u5e94\u6027\u80fd\n+ \u4f7f\u7528\u4fe1\u53f7\u91cf\n    + \u4f18\u70b9\uff1a\u53ea\u5f71\u54cd\u7ade\u4e89\u5171\u4eab\u8d44\u6e90\u7684\u4efb\u52a1\n    + \u7f3a\u70b9\uff1a\u867d\u7136$\\mu$cos\u63d0\u51fa\u4e86\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf\u673a\u5236\u6765\u89e3\u51b3\u4f18\u5148\u7ea7\u53cd\u8f6c\u95ee\u9898\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u7684\u7cfb\u7edf\u5f00\u9500\u8f83\u5927\uff0c\u5bf9\u7cfb\u7edf\u7684\u54cd\u5e94\u6027\u80fd\u4f1a\u6709\u4e00\u5b9a\u5f71\u54cd\n\n#### \u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784\u4e0e\u54c8\u4f5b\u4f53\u7cfb\u7ed3\u6784\u7684\u533a\u522b\uff1f\n+ \u5b58\u50a8\u5668\u7ed3\u6784\uff1a\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784\u4e2d\u7a0b\u5e8f\u6307\u4ee4\u5b58\u50a8\u5668\u548c\u6570\u636e\u5b58\u50a8\u5668\u5171\u7528\u540c\u4e00\u4e2a\u5b58\u50a8\u4f53\uff0c\u800c\u54c8\u4f5b\u4f53\u7cfb\u7ed3\u6784\u4f7f\u7528\u4e24\u4e2a\u72ec\u7acb\u7684\u5b58\u50a8\u5668\u6a21\u5757\uff0c\u5206\u522b\u5b58\u50a8\u6307\u4ee4\u548c\u6570\u636e\uff1b\n+ \u4f4d\u5bbd\uff1a\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784\u4e2d\u7a0b\u5e8f\u6307\u4ee4\u548c\u6570\u636e\u5bbd\u5ea6\u76f8\u540c\uff0c\u800c\u54c8\u4f5b\u4f53\u7cfb\u7ed3\u6784\u53ef\u4ee5\u4e0d\u540c\uff1b\n+ \u603b\u7ebf\uff1a\u51af\u8bfa\u4f9d\u66fc\u4f53\u7cfb\u7ed3\u6784\u4f7f\u7528\u4e00\u6761\u603b\u7ebf\u4f20\u8f93\uff0c\u800c\u54c8\u4f5b\u4f53\u7cfb\u7ed3\u6784\u91c7\u7528\u4e24\u6761\u72ec\u7acb\u7684\u603b\u7ebf\uff0c\u4e92\u4e0d\u5f71\u54cd\u3002\n&lt;img src=\"https://lzhms.oss-cn-hangzhou.aliyuncs.com/images/blog/xdu/collaboration/20240823234756.png\"/&gt;\n\n#### \u7406\u89e3Load/Store\u7ed3\u6784\n+ \u5728\u901a\u7528\u5bc4\u5b58\u5668\u4e2d\u64cd\u4f5c\uff0c\u4ece\u5b58\u50a8\u5668\u4e2d\u8bfb\u67d0\u4e2a\u503c\u5230\u5bc4\u5b58\u5668\uff0c\u64cd\u4f5c\u5b8c\u518d\u5c06\u5176\u653e\u56de\u5b58\u50a8\u5668\u4e2d\n+ \u53ea\u6709Load\u548cStore\u6307\u4ee4\u5141\u8bb8\u76f4\u63a5\u5728\u5185\u5b58\u548c\u901a\u7528\u5bc4\u5b58\u5668\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u7684\u8bfb\u53d6\u548c\u5b58\u50a8\uff0c\u5176\u4ed6\u4f8b\u5982\u7b97\u6570\u548c\u903b\u8f91\u8fd0\u7b97\u6307\u4ee4\u4e3b\u8981\u5728\u901a\u7528\u5bc4\u5b58\u5668\u4e4b\u95f4\u8fdb\u884c\uff0c\u4e0d\u76f4\u63a5\u6d89\u53ca\u5185\u5b58\u3002\u6709\u52a9\u4e8e\u7b80\u5316\u6307\u4ee4\u96c6\u7ed3\u6784\uff0c\u63d0\u9ad8\u6307\u4ee4\u6267\u884c\u6548\u7387\n#### ARM\u6307\u4ee4\u7684\u4e09\u5730\u5740\u6307\u4ee4\u683c\u5f0f\u4e0e\u6761\u4ef6\u6267\u884c\n+ \u4e09\u5730\u5740\u6307\u4ee4\u683c\u5f0f\uff1aARM\u6307\u4ee4\u7684\u4e09\u5730\u5740\u683c\u5f0f\u662f\u6307\u6307\u4ee4\u4e2d\u542b\u6709\u76ee\u7684\u64cd\u4f5c\u6570\u5730\u5740\uff0c\u7b2c\u4e00\u6e90\u64cd\u4f5c\u6570\u5730\u5740\uff0c\u7b2c\u4e8c\u6e90\u64cd\u4f5c\u6570\u5730\u5740\uff0c\u6839\u636e\u6e90\u64cd\u4f5c\u6570\u5730\u5740\u5f97\u5230\u6e90\u64cd\u4f5c\u6570\u8fdb\u884c\u8fd0\u7b97\u518d\u5b58\u5230\u76ee\u7684\u64cd\u4f5c\u6570\u5730\u5740\uff1b\n+ \u6761\u4ef6\u6267\u884c\uff1aARM\u72b6\u6001\u4e0b\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u6307\u4ee4\u5747\u6309\u7167CPSR\u4e2d\u6761\u4ef6\u7801\u7684\u72b6\u6001\u4ee5\u53ca\u6307\u4ee4\u4e2d\u7684\u6761\u4ef6\u57df\u6709\u6761\u4ef6\u5730\u6267\u884c\uff1a\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0c\u6307\u4ee4\u6267\u884c\uff1b\u4e0d\u6ee1\u8db3\u65f6\uff0c\u6307\u4ee4\u88ab\u5ffd\u7565\u3002\n\n#### \u4ea4\u6362\u6307\u4ee4SWP\u7684\u7279\u6b8a\u6027\n+ \u529f\u80fd\u6982\u8ff0\uff1a\u4ea4\u6362\u6307\u4ee4\u80fd\u591f\u5728\u5b58\u50a8\u5668\u548c\u5bc4\u5b58\u5668\u4e4b\u95f4\u4ea4\u6362\u6570\u636e\uff0c\u5e38\u7528\u4e8e\u5b9e\u73b0\u4fe1\u53f7\u91cf\u64cd\u4f5c\uff0c\u89e3\u51b3\u8fdb\u7a0b\u4e4b\u95f4\u7684\u540c\u6b65\u4e0e\u4e92\u65a5\u5173\u7cfb\uff1b\n+ \u7279\u6b8a\u6027\u4f53\u73b0\uff1a\u4ea4\u6362\u6307\u4ee4\u662f\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\uff0c\u5728\u5e76\u53d1\u73af\u5883\u4e2d\u4e0d\u4f1a\u88ab\u4e2d\u65ad\uff0c\u56e0\u6b64\u5728\u89e3\u51b3\u4fe1\u53f7\u91cf\u8bbf\u95ee\u4ee5\u53ca\u4fee\u6539\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u7528\u4ea4\u6362\u6307\u4ee4\u66ff\u4ee3\u5173\u4e2d\u65ad\u673a\u5236\u5b9e\u73b0\u4fe1\u53f7\u91cf\u7684\u64cd\u4f5c\uff0c\u63d0\u5347\u64cd\u4f5c\u7cfb\u7edf\u7684\u6267\u884c\u6548\u7387\u3002\n\n#### \u7b80\u8ff0RISV-V\u7684\u4e3b\u8981\u7279\u5f81\nRISC-V\uff0c\u662f\u4e00\u79cd\u57fa\u4e8e\u201c\u7cbe\u7b80\u6307\u4ee4\u96c6\uff08RISC\uff09\u201d\u539f\u5219\u7684\u6307\u4ee4\u96c6\u67b6\u6784\uff0c\u5b83\u5177\u6709\u5f00\u6e90\u3001\u91cd\u65b0\u8bbe\u8ba1(\u540e\u53d1\u4f18\u52bf)\u3001\u7b80\u5355\u54f2\u5b66\u3001\u6a21\u5757\u5316\u6307\u4ee4\u96c6\u3001\u6307\u4ee4\u96c6\u53ef\u6269\u5c55\u7684\u7279\u70b9\u3002\n\n#### \u5d4c\u5165\u5f0f\u7cfb\u7edf\u6700\u5c0f\u7cfb\u7edf\u7684\u6784\u6210\nCPU\u80fd\u591f\u8fd0\u884c\u6240\u9700\u7684\u6a21\u5757\u6709\uff08\u6700\u5c0f\u7cfb\u7edf\uff09\uff1a\u7535\u6e90\u3001\u65f6\u949f\u3001\u590d\u4f4d\u3001\u5185\u5b58\u3001\u8c03\u8bd5\u63a5\u53e3\n\n#### \u7b80\u8ff0\u6676\u4f53\u4e0e\u6676\u632f\u7684\u533a\u522b\n\u65f6\u949f\u4e00\u822c\u7531\u6676\u4f53\u632f\u8361\u5668\u63d0\u4f9b\uff0c\u800c\u6676\u4f53\u548c\u6676\u632f\u662f\u6784\u6210\u6676\u4f53\u632f\u8361\u5668\u7684\u4e24\u79cd\u65b9\u5f0f:\n\n+ \u6676\u4f53(\u65e0\u6e90): \u5c01\u88c5\u5185\u90e8\u53ea\u542b\u6709\u6676\u4f53, \u6ca1\u6709\u5185\u90e8\u7535\u6e90, \u9a71\u52a8\u7535\u8def\u7531\u8bbe\u8ba1\u8005\u63d0\u4f9b;\n+ \u6676\u632f(\u6709\u6e90): \u5c01\u88c5\u4e2d\u5305\u542b\u4e86\u5b8c\u6574\u7684\u6676\u4f53\u632f\u8361\u5668\u7535\u8def, \u9700\u8981\u7535\u6e90\n\n#### \u7406\u89e3$\\mu$cos\u4e2d\u4efb\u52a1\u7ea7\u8c03\u5ea6\u4e0e\u4e2d\u65ad\u7ea7\u8c03\u5ea6\u4e4b\u95f4\u7684\u5173\u7cfb\n+ \u5173\u7cfb\uff1a$\\mu$cos\u5b9e\u73b0\u7684\u4efb\u52a1\u7ea7\u8c03\u5ea6\u4e0e\u4e2d\u65ad\u7ea7\u8c03\u5ea6\u662f\u4e24\u4e2a\u76f8\u4e92\u72ec\u7acb\u7684\u673a\u5236\uff0c\u4e92\u4e0d\u5f71\u54cd\uff1b\n\n\u3010\u4fdd\u62a4\u4efb\u52a1\u540c\u65f6\u53ef\u4ee5\u54cd\u5e94\u4e2d\u65ad\u3011\n\u901a\u8fc7\u7ed9\u4efb\u52a1\u8c03\u5ea6\u5668\u4e0a\u9501\u673a\u5236\uff0c\u4fdd\u8bc1\u4e2d\u65ad\u54cd\u5e94\u53ef\u4ee5\u6267\u884c\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\uff0c\u4f46\u662f\u5728\u4e2d\u65ad\u5904\u7406\u7ed3\u675f\u65f6\uff0c\u5982\u679c\u8c03\u5ea6\u5668\u5df2\u4e0a\u9501\uff0c\u4e0d\u4f1a\u8fdb\u884c\u6700\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u7684\u8c03\u5ea6\uff0c\u800c\u76f4\u63a5\u8fd4\u56de\u88ab\u4e2d\u65ad\u7684\u4efb\u52a1\u7ee7\u7eed\u6267\u884c\uff1b\u5426\u5219\u7531\u4e8e$\\mu$cos\u662f\u57fa\u4e8e\u62a2\u5360\u5f0f\u4e2d\u65ad\u8c03\u5ea6\u7684\uff0c\u4f1a\u8fdb\u884c\u6700\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u7684\u8c03\u5ea6\u3002\n\n### \u7a0b\u5e8f\u9898\n#### C \u7a0b\u5e8f\u4e0e\u6c47\u7f16\u7a0b\u5e8f\u6df7\u5408\u7f16\u7a0b\u2014\u2014\u5b57\u7b26\u4e32\u62f7\u8d1d\n```c\n#include&lt;stdio.h&gt;\nextern void strcopy(char *d, const char *s);\nint main()\n{\n    const char *srcstr = \"First string-source\";\n    char dststr[] = \"Second string-destination\";\n    printf(\"Before copying:\\n\");\n    printf(\"%s\\n%s\\n\", srcstr, dststr);\n    strcopy(dststr, srcstr);\n    printf(\"After copying:\\n\");\n    printf(\"%s\\n%s\\n\", srcstr, dststr);\n    return 0;\n}\n</code></pre> <pre><code>AREA scopy CODE, READONLY\nEXPORT strcopy\n; \u9ed8\u8ba4R0\u5b58\u50a8\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cR1\u5b58\u50a8\u7b2c\u4e8c\u4e2a\u53c2\u6570\nstrcopy\n    LDRB R2, [R1], #1     ; srcstr\n    STRB R2, [R0], #1     ; dststr\n    CMP R2, #0\n    BNE strcopy\n    MOV PC, LR\n    END\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#lcd","title":"LCD\u663e\u793a\u2014\u2014\u6c34\u5e73\u76f4\u7ebf","text":"<pre><code>//\u5df2\u77e5\u50cf\u7d20\u989c\u8272\u51fd\u6570\nvoid PutPixel(UINT16T x, UINT16T y, UINT16T c);\n</code></pre> <pre><code>void Lcd_Draw_HLine(INT16T usX0, INT16T usX1, INT16T usY0, UINT16T ucColor, UINT16T usWidth)\n{\n    INT16T usLen;\n\n    if( usX1 &lt; usX0 )\n    {\n        GUISWAP (usX1, usX0); // \u4fdd\u8bc1x0&lt;=x1,\u5426\u5219\u8f6f\u4e2d\u65ad\n    }\n\n    while( (usWidth--) &gt; 0 )   // \u7ed8\u5236\u50cf\u7d20\u70b9\u884c\u6570\n    {\n        usLen = usX1 - usX0 + 1;\n        while( (usLen--) &gt; 0 )    // \u7ed8\u5236\u50cf\u7d20\u70b9\u5217\u6570\n        {\n            PutPixel(usX0 + usLen, usY0, ucColor);\n        }\n        usY0++;                   // \u79fb\u81f3\u4e0b\u4e00\u884c\n    }\n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#mucos","title":"$\\mu$cos\u4fe1\u53f7\u91cf\u4efb\u52a1\u7ba1\u7406\u2014\u2014\u952e\u76d8\u8bc6\u522b\u663e\u793a","text":"<pre><code>// \u9884\u5b9a\u4e49\u51fd\u6570\nINT8U keyScan(void);     // \u8bc6\u522b\u6309\u952e\u4ee3\u53f7\nvoid keyPrint(INT8U x, INT8U y, INT8U c);  // \u663e\u793a\u6309\u952e\u4ee3\u53f7\n</code></pre> <pre><code>// \u952e\u76d8\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\nextern OS_EVENT *Keypad_Sem;\nvoid __KeyPad(void)\n{\n    INT8U err;\n    ClearPending(BIT_EINT1);  // \u6e05\u9664\u4e2d\u65ad\u6e90\n    err = OSSemPost(Keypad_Sem);  // \u91ca\u653e\u952e\u76d8\u4fe1\u53f7\u91cf\n}\n</code></pre> <pre><code>// \u952e\u76d8\u663e\u793a\u4efb\u52a1\nOS_EVENT *Keypad_Sem;\nvoid KeyTask(void *data)\n{\n    Keypad_Sem = OSSemCreate(0);\n    INT8U err, key, x = 100, y = 100; // \u663e\u793a\u5750\u6807\n    while(1){\n        OSSemPend(Keypad_Sem, 0, &amp;err);  // \u7533\u8bf7\u952e\u76d8\u4fe1\u53f7\u91cf\n        key = keyScan();     // \u83b7\u53d6\u4e2d\u65ad\u6309\u952e\n        keyPrint(x, y, key);\n    }\n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#swp","title":"\u57fa\u4e8eSWP\u6307\u4ee4\u7684\u4fe1\u53f7\u91cf\u8bbf\u95ee","text":"<pre><code>SEM EQU 0x20001000\nSEM_CHECK\n    MOV R1, #0\n    LDR R0, =SEM      ; \u4fe1\u53f7\u91cf\u5730\u5740\n    SWP R1, R1, [R0]  ; \u539f\u5b50\u64cd\u4f5c\uff0c\u8bbf\u95ee\u4fe1\u53f7\u91cf\n    CMP R1, #0\n    BEQ SEM_CHECK\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#ledgpiob","title":"LED\u2014\u2014\u57fa\u4e8eGPIOB\u53e3\u7684\u53d1\u5149\u4e8c\u6781\u7ba1\u8bbe\u8ba1","text":"<pre><code>#define rGPBCON (*(volatile unsigned *)0xCD74)  //\u63a7\u5236\u7aef\u53e3\u5730\u5740\n#define rGPBDAT (*(volatile unsigned *)0xCD78)  //\u6570\u636e\u7aef\u53e3\u5730\u5740\n#define rGPBUP  (*(volatile unsigned *)0xCD7C)  //\u4e0a\u62c9\u7535\u963b\u7aef\u53e3\u5730\u5740\nvoid led_on_off(void)\n{\n    rGPBCON = 0x15400;        //\u914d\u7f6e\u63a7\u5236\u7aef\u53e3\n    rGPBUP = 0x7FF;           //\u914d\u7f6e\u4e0a\u62c9\u7535\u963b\n    rGPBDAT = 0;              //\u914d\u7f6e\u6570\u636e\u7aef\u53e3\n    deLay(30);\n    rGPBDAT = 0x0010;\n    deLay(1000);\n}\nint main(void)\n{\n    sys_init();\n    while(1){\n        led_on_off();\n    }\n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#mucos_1","title":"$\\mu$cos\u4e92\u65a5\u7ba1\u7406\u2014\u2014\u4e32\u53e3\u8f93\u51fa\u4fe1\u606f","text":"<pre><code>OS_EVENT *UART_sem;\nvoid myTask(void *data)\n{\n    unsigned char err;\n    UART_sem = OSSemCreate(1);    // \u521b\u5efa\u4fe1\u53f7\u91cf\n    while(1){\n        OSSemPend(UART_sem, 0, &amp;err);\n        uart_sending(\"I'm running now!\");\n        OSTimDly(30);\n        OSSemPost(UART_sem);\n    }\n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#_37","title":"\u7a0b\u5e8f\u9898\u51c6\u5907\u90e8\u5206","text":""},{"location":"ComputerTheory/EmbeddedSystem/#_38","title":"\u591a\u4efb\u52a1\u5e94\u7528\u51fd\u6570","text":"<pre><code>/*-----------\u521b\u5efa\u4efb\u52a1\u7684\u5806\u6808------------- */\n#define STACKSIZE 256  // \u5806\u6808\u5927\u5c0f\nOS_STK Stack[STACKSIZE]; // \u5168\u5c40\u9759\u6001\u5206\u914d\nconst char Id = '1';   // \u4efb\u52a1\u6307\u9488\u53c2\u6570\n/*------------\u4efb\u52a1\u521b\u5efa\u51fd\u6570---------------*/\nINT8U OSTaskCreate (void (*task)(void *pd), void *pdata, OS_STK *ptos, INT8U prio);\n// task: \u6307\u5411\u4efb\u52a1\u4ee3\u7801\u7684\u6307\u9488; pdata: \u4efb\u52a1\u5f00\u59cb\u65f6\uff0c\u4f20\u9012\u7ed9\u4efb\u52a1\u7684\u6307\u9488\u53c2\u6570\n// ptos: \u4efb\u52a1\u7684\u5806\u6808\u6808\u9876\u6307\u9488; prio: \u4efb\u52a1\u7684\u4f18\u5148\u7ea7\n/*------------\u4efb\u52a1\u5220\u9664\u51fd\u6570---------------*/\nINT8U OSTaskDel(INT8U prio);\nOSTaskDel(OS_PRIO_SELF);    \n// OS_PRIO_SELF: \u5220\u9664\u5f53\u524d\u4efb\u52a1\u53ca\u5176\u521b\u5efa\u7684\u5b50\u4efb\u52a1\n/*------------\u5185\u6838\u542f\u52a8\u51fd\u6570---------------*/\nvoid OSStart (void);\n// \u521b\u5efa\u5b8c\u4efb\u52a1\u540e\u5fc5\u987b\u901a\u8fc7OSStart\u51fd\u6570\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fd0\u884c\u4efb\u52a1\n\n// \u5176\u4ed6\u51fd\u6570\n/*------------\u6539\u53d8\u4efb\u52a1\u4f18\u5148\u7ea7\u51fd\u6570---------------*/\nINT8U OSTaskChangePrio (INT8U oldprio, INT8U newprio);\n/*------------\u6302\u8d77\u4efb\u52a1\u51fd\u6570---------------*/\nINT8U OSTaskSuspend (INT8U prio);\n/*------------\u6062\u590d\u4efb\u52a1\u51fd\u6570---------------*/\nINT8U OSTaskResume (INT8U prio);\n/*------------\u65f6\u949f\u5ef6\u8fdf\u51fd\u6570---------------*/\nvoid OSTimeDly (INT16U ticks);\n/*------------\u65f6\u949f\u5ef6\u8fdf\u6062\u590d\u51fd\u6570---------------*/\nINT8U OSTimeDlyResume (INT8U prio);\n// \u63d0\u524d\u6062\u590d\u88ab\u5ef6\u65f6\u7684\u4efb\u52a1\n</code></pre> <pre><code>// \u521b\u5efa\u591a\u4efb\u52a1\u7684\u5b9e\u9a8c\nOS_EVENT *UART_sem;\nunsigned char err;     \n\n/* allocate memory for tasks' stacks */\n#define STACKSIZE 256\n\n/* Global Variable */\nOS_STK Stack1[STACKSIZE];\nOS_STK Stack2[STACKSIZE];\nOS_STK StackMain[STACKSIZE];\n\nconst char Id1 = '1';\nconst char Id2 = '2';\n\nvoid Task1(void *Id)\n{\n    while(1){\n        OSSemPend(UART_sem, 0, &amp;err);\n        uart_sendstring(\"Task1 Called.\\r\\n\");\n        OSTimeDly(50);\n        OSSemPost(UART_sem);\n    }\n}\n\nvoid Task2(void *Id)\n{\n    while(1)\n    {\n        OSSemPend(UART_sem, 0, &amp;err);\n        uart_sendstring(\"Task2 Called.\\r\\n\");\n        OSSemPost(UART_sem);\n    }\n}\n// \u542f\u52a8\u4efb\u52a1\u51fd\u6570\uff0cTaskStart\u4efb\u52a1\u4e2d\u521b\u5efa\u4e24\u4e2a\u5b50\u4efb\u52a1\nvoid TaskStart(void *Id)\n{\n     UART_sem = OSSemCreate(1);\n\n     OSTaskCreate(Task1, (void *)&amp;Id1, &amp;Stack1[STACKSIZE - 1], 2);\n     OSTaskCreate(Task2, (void *)&amp;Id2, &amp;Stack2[STACKSIZE - 1], 3);\n     OSTaskDel(OS_PRIO_SELF);   // Delete current task\u2014\u2014TaskStart\n}\n\nvoid Main (void)\n{\n    OSInit();\n    OSTimeSet(0);\n\n    /* create the start task */\n    OSTaskCreate(TaskStart,(void *)0, &amp;StackMain[STACKSIZE - 1], 0);\n\n    /* start the operating system */\n    OSStart(); \n}\n</code></pre> <pre><code>// \u521b\u5efa\u591a\u4efb\u52a1\u2014\u2014PPT\u5b9e\u4f8b\nINT8U Task1Data, Task2Data;\nINT8U Task1prio=1, Task2prio=2;\n#define STACKSIZE 256\nOS_STK Task1Stk[STACKSIZE];\nOS_STK Task1Stk[STACKSIZE];\nvoid Task1(void)\n{\n    while(1){\n        Task1Data++;\n        OSTimeDly(25);\n    }\n}\nvoid Task2(void)\n{\n    while(1)\n    {\n        Task2Data++;\n        OSTimeDly(50);\n    }\n}\nvoid main()\n{\n    OSInit ();    // \u5fc5\u8981\u7684\n    OSTaskCreate(Task1, (void*)&amp;Task1Data, (void *)&amp;Task1Stk[STACKSIZE-1], Task1prio);\n    OSTaskCreate(Task2, (void *)&amp;Task2Data, (void *)&amp;Task2Stk[STACKSIZE-1],Task2prio);\n    OSStart();    // \u5fc5\u8981\u7684\n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#_39","title":"\u4fe1\u53f7\u91cf\u5e94\u7528\u51fd\u6570","text":"<pre><code>OS_EVENT *pevent;   // \u521b\u5efa\u4e8b\u4ef6\u53d8\u91cf\nOS_EVENT *OSSemCreate(INT16U cnt); // \u4fe1\u53f7\u91cf\u521b\u5efa\u51fd\u6570\n// cnt = 0~65535\nvoid OSSemPend(OS_EVENT *pevent, INT16U timeout, INT8U *err);   // \u7b49\u5f85\u4fe1\u53f7\u91cf\u51fd\u6570\n// \u5982\u679ctimeout=0\u8868\u793a\u4e0d\u542f\u7528\u7b49\u5f85\u8d85\u65f6\nINT8U OSSemPost(OS_EVENT *pevent); // \u91ca\u653e\u4e00\u4e2a\u4fe1\u53f7\u91cf\n/*---------------\u5e38\u7528\u64cd\u4f5c--------------*/\nOS_EVENT *pevent;\nunsigned char err;\nOSSemPend(pevent, 0, &amp;err);    // P\u64cd\u4f5c\nerr = OSSemPost(pevent);       // V\u64cd\u4f5c\n</code></pre> <pre><code>// \u4fe1\u53f7\u91cf\u64cd\u4f5c\u7684\u5b9e\u9a8c\u2014\u2014\u4e24\u4e2a\u4efb\u52a1\u540c\u6b65\u5173\u7cfb\n// \u4ea4\u66ff\u6267\u884c\uff0c\u5411\u4e32\u53e3\u8f93\u51fa\u4fe1\u606f\n#define  TaskStkLeath 128\nOS_STK TestTask1Stk[TaskStkLeath];\nOS_STK TestTask2Stk[TaskStkLeath];\n\nOS_EVENT *sem1;\nOS_EVENT *sem2;\nunsigned char err;\n\nvoid Task1(void *pdata)\n{\n    while(1)\n    {\n        OSSemPend(sem1, 0, &amp;err);\n        uart_sendstring(\"Now task1 is running!\\r\\n\");\n        OSTimeDly(30);\n        uart_sendstring(\"Task1 resumed task2!\\r\\n\");\n        OSSemPost(sem2);\n    }\n}\n\nvoid Task2(void *pdata)\n{\n    while(1)\n    {\n        OSSemPend(sem2, 0, &amp;err);\n        uart_sendstring(\"Now task2 is running!\\r\\n\");\n        OSTimeDly(30);\n        uart_sendstring(\"Task2 resumed task1!\\r\\n\");\n        OSSemPost(sem1);\n    }\n}\n\nvoid Main (void)\n{\n    OSInit();\n    // \u521b\u5efa\u4fe1\u53f7\u91cf\n    sem1 = OSSemCreate(1);\n    sem2 = OSSemCreate(0);\n    // \u521b\u5efa\u4e24\u4e2a\u4efb\u52a1\n    OSTaskCreate(Task1,(void *)1,&amp;TestTask1Stk[TaskStkLeath-1],5);\n    OSTaskCreate(Task2,(void *)2,&amp;TestTask2Stk[TaskStkLeath-1],6);\n\n    OSStart();   \n}\n</code></pre> <pre><code>// \u4fe1\u53f7\u91cf\u64cd\u4f5c\u7684\u5b9e\u9a8c\u2014\u2014\u4e24\u4e2a\u4efb\u52a1\u4e92\u65a5\u5173\u7cfb\n// \u4efb\u52a1\u7684\u6302\u8d77\u4e0e\u6062\u590d\u673a\u5236\n#define  TaskStkLeath 128\nOS_EVENT *UART_sem;\nunsigned char err;\n\nOS_STK TestTask1Stk[TaskStkLeath];\nOS_STK TestTask2Stk[TaskStkLeath];\n\nvoid Task1(void *pdata)\n{\n    while(1)\n    {\n        OSSemPend(UART_sem, 0, &amp;err);\n        uart_sendstring(\"Task1: i will Suspend by myself\\r\\n\");\n        OSSemPost(UART_sem);\n\n        OSTaskSuspend(2);      // \u6302\u8d77\u4efb\u52a1 1\n\n        OSSemPend(UART_sem, 0, &amp;err);\n        uart_sendstring(\"Task1: i Resumed by Task2\\r\\n\");\n        OSSemPost(UART_sem);\n\n        OSTimeDly(10);\n    }\n}\n\nvoid Task2(void *pdata)\n{\n    while(1)\n    {\n        OSSemPend(UART_sem, 0, &amp;err);\n        uart_sendstring(\"Task2: i am executing\\r\\n\");\n        OSSemPost(UART_sem);  \n\n        if( OSTaskResume(2) == OS_ERR_NONE )   // \u5524\u9192\u4efb\u52a11\n        {\n            OSSemPend(UART_sem, 0, &amp;err);\n            uart_sendstring(\"Task2: i Resumed Task1\\n\");\n            OSSemPost(UART_sem);    \n        }\n        OSTimeDly(5);\n    }\n}\n\nvoid Main(void)\n{     \n    OSInit();\n    UART_sem = OSSemCreate(1);\n\n    OSTaskCreate(Task1,(void *)1,&amp;TestTask1Stk[TaskStkLeath-1],2);\n    OSTaskCreate(Task2,(void *)2,&amp;TestTask2Stk[TaskStkLeath-1],1);\n\n    OSStart();   \n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#_40","title":"\u4e92\u65a5\u578b\u4fe1\u53f7\u91cf\u5e94\u7528\u51fd\u6570","text":"<pre><code>OS_EVENT *pevent;   // \u521b\u5efa\u4e8b\u4ef6\u53d8\u91cf\nOS_EVENT *OSMutexCreate (INT8U prio, INT8U *err); // \u4e92\u65a5\u4fe1\u53f7\u91cf\u521b\u5efa\u51fd\u6570\n// prio \u4fdd\u7559\u4f18\u5148\u7ea7 PIP\nvoid OSMutexPend (OS_EVENT *pevent, INT16U timeout, INT8U *err);   // \u7b49\u5f85\u4e92\u65a5\u4fe1\u53f7\u91cf\u51fd\u6570\n// \u5982\u679ctimeout=0\u8868\u793a\u4e0d\u542f\u7528\u7b49\u5f85\u8d85\u65f6\nINT8U OSMutexPost (OS_EVENT *pevent); // \u91ca\u653e\u4e00\u4e2a\u4fe1\u53f7\u91cf\n/*---------------\u5e38\u7528\u64cd\u4f5c--------------*/\nOS_EVENT *pevent;\nINT8U err;\nprevent = OSMutexCreate(2, &amp;err);\nOSMutexPend(pevent, 0, &amp;err);    // P\u64cd\u4f5c\nerr = OSMutexPost(pevent);       // V\u64cd\u4f5c\n</code></pre> <pre><code>// \u4e92\u65a5\u578b\u4fe1\u53f7\u91cf\u64cd\u4f5c\u7684\u5b9e\u9a8c\u2014\u2014\u4e24\u4e2a\u4efb\u52a1\u4e92\u65a5\u5173\u7cfb\n#define  TaskStkLeath 128\nOS_EVENT *UART_sem;\nunsigned char err;\n\nOS_STK TestTask1Stk[TaskStkLeath];\nOS_STK TestTask2Stk[TaskStkLeath];\n\nvoid Task1(void *pdata)\n{\n    while(1)\n    {\n        OSMutexPend(UART_sem, 0, &amp;err);\n        uart_sendstring(\"Task1: i will Suspend by myself\\r\\n\");\n        OSMutexPost(UART_sem);\n\n        OSTimeDly(10);\n    }\n}\n\nvoid Task2(void *pdata)\n{\n    while(1)\n    {\n        OSMutexPend(UART_sem, 0, &amp;err);\n        uart_sendstring(\"Task2: i am executing\\r\\n\");\n        OSMutexPost(UART_sem);  \n\n        OSTimeDly(5);\n    }\n}\n\nvoid Main(void)\n{     \n    OSInit();\n    UART_sem = OSMutexCreate(1, &amp;err);\n\n    OSTaskCreate(Task1,(void *)1,&amp;TestTask1Stk[TaskStkLeath-1],2);\n    OSTaskCreate(Task2,(void *)2,&amp;TestTask2Stk[TaskStkLeath-1],3);\n\n    OSStart();   \n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#lcd_1","title":"LCD\u663e\u793a\u5c4f\u76f8\u5173\u51fd\u6570","text":"<pre><code>/***********************************************************\n* func:     \u6307\u5b9a\u989c\u8272\u586b\u5145\u533a\u57df\n* para:     usLeft,usTop,usRight,usBottom -- \u77e9\u5f62\u533a\u57df\u5750\u6807\n*           ucColor -- appointed color value\n* ret:      none\n***********************************************************/\nvoid lcd_clr_rect(INT16T usLeft, INT16T usTop, INT16T usRight, INT16T usBottom, UINT16T ucColor)\n{\n    UINT32T i, j;\n\n    for (i = usLeft; i &lt; usRight; i++)\n        for (j = usTop; j &lt; usBottom; j++)\n        {\n            PutPixel_16Bit_320240(i, j, ucColor);   // \u7ed8\u5236\u50cf\u7d20\u70b9\n        }\n}\n</code></pre> <pre><code>/***********************************************************\n* func:     \u6307\u5b9a\u989c\u8272\u7ed8\u5236\u6c34\u5e73\u76f4\u7ebf\n* para:     usX0,usY0 -- \u8d77\u70b9\u5750\u6807\n*           usX1 -- \u7ec8\u70b9x\u5750\u6807\n*           ucColor -- appointed color value\n*           usWidth -- line's width \n***********************************************************/\nvoid Lcd_Draw_HLine(INT16T usX0, INT16T usX1, INT16T usY0, UINT16T ucColor, UINT16T usWidth)\n{\n    INT16T usLen;\n\n    if( usX1 &lt; usX0 )\n    {\n        GUISWAP (usX1, usX0);\n    }\n\n    while( (usWidth--) &gt; 0 )\n    {\n        usLen = usX1 - usX0 + 1;\n        while( (usLen--) &gt; 0 )\n        {\n            PutPixel_16Bit_320240(usX0 + usLen, usY0, ucColor);\n        }\n        usY0++;\n    }\n}\n</code></pre> <pre><code>/***********************************************************\n* func:     \u6307\u5b9a\u989c\u8272\u7ed8\u5236\u5782\u76f4\u76f4\u7ebf\n* para:     usX0,usY0 -- \u8d77\u70b9\u5750\u6807\n*           usY1 -- \u7ec8\u70b9Y\u5750\u6807\n*           ucColor -- appointed color value\n*           usWidth -- line's width\n***********************************************************/\nvoid Lcd_Draw_VLine (INT16T usY0, INT16T usY1, INT16T usX0, UINT16T ucColor, UINT16T usWidth)\n{\n    INT16T usLen;\n\n    if( usY1 &lt; usY0 )\n    {\n        GUISWAP (usY1, usY0);\n    }\n\n    while( (usWidth--) &gt; 0 )\n    {\n        usLen = usY1 - usY0 + 1;\n        while( (usLen--) &gt; 0 )\n        {\n            PutPixel_16Bit_320240(usX0, usY0 + usLen, ucColor);\n        }\n        usX0++;\n    }\n}\n</code></pre> <pre><code>/***********************************************************\n* func:     \u6307\u5b9a\u989c\u8272\u7ed8\u5236\u77e9\u5f62\n* para:     usLeft,usTop,usRight,usBottom -- \u77e9\u5f62\u533a\u57df\u5750\u6807\n*           ucColor -- appointed color value\n* ret:      none\n***********************************************************/\nvoid Lcd_Draw_Box(INT16T usLeft, INT16T usTop, INT16T usRight, INT16T usBottom, UINT16T ucColor)\n{\n    Lcd_Draw_HLine(usLeft, usRight,  usTop,    ucColor, 1);\n    Lcd_Draw_HLine(usLeft, usRight,  usBottom, ucColor, 1);\n    Lcd_Draw_VLine(usTop,  usBottom, usLeft,   ucColor, 1);\n    Lcd_Draw_VLine(usTop,  usBottom, usRight,  ucColor, 1);\n}\n</code></pre> <pre><code>// \u5176\u4ed6\u51fd\u6570\n/**********************************************************\n* name:     Lcd_Draw_Line()\n* func:     \u6307\u5b9a\u989c\u8272\u7ed8\u5236\u76f4\u7ebf\n* para:     usX0,usY0 -- \u8d77\u70b9\u5750\u6807\n*           usX1,usY1 -- \u7ec8\u70b9\u5750\u6807\n*           ucColor -- appointed color value\n*           usWidth -- line's width \n***********************************************************/\nvoid Lcd_Draw_Line(INT16T usX0, INT16T usY0, INT16T usX1, INT16T usY1, UINT16T ucColor, UINT16T usWidth)\n{\n    INT16T usDx;\n    INT16T usDy;\n    INT16T y_sign;\n    INT16T x_sign;\n    INT16T decision;\n    INT16T wCurx, wCury, wNextx, wNexty, wpy, wpx;\n\n    if( usY0 == usY1 )\n    {\n        Lcd_Draw_HLine (usX0, usX1, usY0, ucColor, usWidth);\n        return;\n    }\n    if( usX0 == usX1 )\n    {\n        Lcd_Draw_VLine (usY0, usY1, usX0, ucColor, usWidth);\n        return;\n    }\n    usDx = abs(usX0 - usX1);\n    usDy = abs(usY0 - usY1);\n    if( ((usDx &gt;= usDy &amp;&amp; (usX0 &gt; usX1)) ||\n        ((usDy &gt; usDx) &amp;&amp; (usY0 &gt; usY1))) )\n    {\n        GUISWAP(usX1, usX0);\n        GUISWAP(usY1, usY0);\n    }\n    y_sign = (usY1 - usY0) / usDy;\n    x_sign = (usX1 - usX0) / usDx;\n\n    if( usDx &gt;= usDy )\n    {\n        for( wCurx = usX0, wCury = usY0, wNextx = usX1,\n             wNexty = usY1, decision = (usDx &gt;&gt; 1);\n             wCurx &lt;= wNextx; wCurx++, wNextx--, decision += usDy )\n        {\n            if( decision &gt;= usDx )\n            {\n                decision -= usDx;\n                wCury += y_sign;\n                wNexty -= y_sign;\n            }\n            for( wpy = wCury - usWidth / 2;\n                 wpy &lt;= wCury + usWidth / 2; wpy++ )\n            {\n                PutPixel_16Bit_320240(wCurx, wpy, ucColor);\n            }\n\n            for( wpy = wNexty - usWidth / 2;\n                 wpy &lt;= wNexty + usWidth / 2; wpy++ )\n            {\n                PutPixel_16Bit_320240(wNextx, wpy, ucColor);\n            }\n        }\n    }\n    else\n    {\n        for( wCurx = usX0, wCury = usY0, wNextx = usX1,\n             wNexty = usY1, decision = (usDy &gt;&gt; 1);\n             wCury &lt;= wNexty; wCury++, wNexty--, decision += usDx )\n        {\n            if( decision &gt;= usDy )\n            {\n                decision -= usDy;\n                wCurx += x_sign;\n                wNextx -= x_sign;\n            }\n            for( wpx = wCurx - usWidth / 2;\n                 wpx &lt;= wCurx + usWidth / 2; wpx++ )\n            {\n                PutPixel_16Bit_320240(wpx, wCury, ucColor);\n            }\n\n            for( wpx = wNextx - usWidth / 2;\n                 wpx &lt;= wNextx + usWidth / 2; wpx++ )\n            {\n                PutPixel_16Bit_320240(wpx, wNexty, ucColor);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#arm_12","title":"ARM\u6c47\u7f16\u7a0b\u5e8f\u8bbe\u8ba1","text":"<pre><code>//c\u7a0b\u5e8fg()\u8fd4\u56de5\u4e2a\u6574\u6570\u7684\u548c\nint g(int a, int b, int c, int d ,int e) \n{\n    return a + b + c + d + e\uff1b\n}\n</code></pre> <pre><code>; \u5229\u7528\u5806\u6808\u8fdb\u884c\u5b50\u7a0b\u5e8f\u8c03\u7528\u8fd4\u56de\nTITLE \u6c47\u7f16\u51fd\u6570\u4e2d\u8c03\u7528C\u51fd\u6570\u5b9e\u73b0\u52a0\uff1aa+2a+3a+4a+5a, a=12\nEXPORT f ; \u58f0\u660e\u7b26\u53f7f\u53ef\u88ab\u5176\u4ed6\u6587\u4ef6\u5f15\u7528\nAREA f, CODE, READONLY\nIMPORT g  ; \u4f7f\u7528\u4f2a\u64cd\u4f5cIMPORT\u58f0\u660eC\u7a0b\u5e8fg()\n    STR lr, [sp, #-4]!  ; \u4fdd\u5b58\u8fd4\u56de\u5730\u5740(\u5806\u6808\u6ee1\u9012\u51cf), \u88ab\u8c03\u7528, \u4fdd\u5b58\u7684\u5730\u5740\u4e3a\u8c03\u7528\u7a0b\u5e8f\u7684\u4e0b\u4e00\u6761\u6307\u4ee4\u5730\u5740\n    MOV r0, #12     ; a = 12\n    ADD r1, r0, r0  ; r1 = 2*r0\n    ADD r2\uff0cr1\uff0cr0  ; r2 = 3*r0\n    ADD r3\uff0cr1\uff0cr2  ; r3 = 5*r0\n    STR r3, [sp, #-4]! ; \u7b2c\u4e94\u4e2a\u53c2\u6570\u901a\u8fc7\u6570\u636e\u6808\u4f20\u9012\n    ADD r3, r1, r1   ; r3\u503c\u8bbe\u4e3a4\u00d7i\n    BL g  ; \u8c03\u7528C\u7a0b\u5e8f\n    ADD sp, sp, #4   ; \u8c03\u6574\u6570\u636e\u6808\u6307\u9488\uff0c\u51c6\u5907\u8fd4\u56de\n    LDR pc, [sp], #4  ; \u8fd4\u56de\nEND\n</code></pre> <pre><code>; \u5229\u7528LR\u8fdb\u884c\u5b50\u7a0b\u5e8f\u8c03\u7528\u8fd4\u56de\nTITLE \u5b50\u7a0b\u5e8f\u8c03\u7528\u793a\u4f8b\nAREA Init, CODE, READONLY\nENTRY\nstart \n    MOV R0, #10\n    MOV R1, #30 \n    BL subname ; \u8c03\u7528\u5b50\u7a0b\u5e8fsubname\nreturn\n    MOV R2, R0\n    ...\nsubname \n    ADD R0, R0, R1 ; \u5b50\u7a0b\u5e8f\n    MOV PC, LR     ; \u4ece\u5b50\u7a0b\u5e8f\u8fd4\u56de\nEND\n</code></pre> <pre><code>// \u6c42\u6700\u5927\u516c\u7ea6\u6570\nint gcd (int a , int b)\n{\n    while (a!=b){\n        if (a&gt;b) \n            a=a-b;\n        else \n            b=b-a;\n    }\n    return a;\n}\n</code></pre> <pre><code>TITLE \u6c42\u6700\u5927\u516c\u7ea6\u6570\u2014\u2014Version1\nAREA gcd, CODE, READONLY ALIGN=3\nENTRY\nstart \n    CMP R0, R1\n    BEQ stop\n    BLT less\n    SUB R0, R0, R1\n    B start\nless \n    SUB R1, R1, R0\n    B start\nstop \n    NOP\n    MOV PC, LR\n</code></pre> <pre><code>TITLE \u6c42\u6700\u5927\u516c\u7ea6\u6570\u2014\u2014Version2[\u6761\u4ef6\u6267\u884c]\nAREA gcd, CODE, READONLY ALIGN=3\nENTRY\nstart\n    CMP R0, R1   ; \u6bd4\u8f83a\u548cb\u5927\u5c0f\n    SUBGT R0, R0, R1 ; if(a&gt;b) a=a-b\n    SUBLT R1, R1, R0 ; if(a&lt;b) b=b-a\n    BNE start        ; if(a!=b) \u8df3\u8f6c\uff0c\u7ee7\u7eed\n    MOV PC, LR\n</code></pre> <pre><code>if (a==0 || b==1)\n    c = d + e;\n</code></pre> <pre><code>; \u6761\u4ef6\u5224\u65ad\u7684\u7b49\u4ef7\u5199\u6cd5\nCMP R0, #0\nCMPNE R1, #1\nADDEQ R2, R3, R4\n</code></pre> <pre><code>TITLE \u6570\u636e\u5757\u590d\u5236\nAREA Block, CODE, READONLY ; \u8bbe\u7f6e\u672c\u6bb5\u7a0b\u5e8f\u7684\u540d\u79f0(Block)\u53ca\u5c5e\u6027\nnum EQU 20 ; \u8bbe\u7f6e\u5c06\u8981\u590d\u5236\u7684\u5b57\u6570\nENTRY\nstart \n    LDR r0, =src  ; r0\u5bc4\u5b58\u5668\u6307\u5411\u6e90\u6570\u636e\u533asrc\n    LDR r1, =dst  ; r1\u5bc4\u5b58\u5668\u6307\u5411\u76ee\u6807\u6570\u636e\u533adst\n    MOV r2, #num  ; r2\u6307\u5b9a\u5c06\u8981\u590d\u5236\u7684\u5b57\u6570\n    MOV sp, #0x400  ; \u8bbe\u7f6e\u6570\u636e\u6808\u6307\u9488(r13), \u7528\u4e8e\u4fdd\u5b58\u5de5\u4f5c\u5bc4\u5b58\u5668\u6570\u503c\nBlockcopy   ; \u8fdb\u884c\u4ee58\u4e2a\u5b57\u4e3a\u5355\u4f4d\u7684\u6570\u636e\u590d\u5236\n    MOVS r3, r2, LSR #3 ; \u9700\u8981\u8fdb\u884c\u7684\u4ee58\u4e2a\u5b57\u4e3a\u5355\u4f4d\u7684\u590d\u5236\u6b21\u6570\n    BEQ Copywords       ; \u5bf9\u4e8e\u5269\u4e0b\u4e0d\u8db38\u4e2a\u5b57\u7684\u6570\u636e, \u8df3\u8f6c\u5230copywords\uff0c\u4ee5\u5b57\u4e3a\u5355\u4f4d\u590d\u5236\n    STMFD sp!, {r4-r11} ; \u4fdd\u5b58\u5de5\u4f5c\u5bc4\u5b58\u5668\nOctcopy\n    LDMIA r0!, {r4-r11} ; \u4ece\u6e90\u6570\u636e\u533a\u8bfb\u53d68\u4e2a\u5b57\u7684\u6570\u636e, \u653e\u52308\u4e2a\u5bc4\u5b58\u5668\u4e2d, \u5e76\u66f4\u65b0\u6e90\u6570\u636e\u533a\u6307\u9488r0\n    STMIA r1!\uff0c{r4-r11} ; \u5c06\u8fd98\u4e2a\u5b57\u6570\u636e\u5199\u5165\u5230\u76ee\u6807\u6570\u636e\u533a\u4e2d, \u5e76\u66f4\u65b0\u76ee\u6807\u6570\u636e\u533a\u6307\u9488r1\n    SUBS r3, r3, #1     ; \u5c06\u5757\u590d\u5236\u6b21\u6570\u51cf1\n    BNE Octcopy         ; \u5faa\u73af, \u76f4\u5230\u5b8c\u6210\u4ee58\u4e2a\u5b57\u4e3a\u5355\u4f4d\u7684\u5757\u590d\u5236\n    LDMFD sp!, {r4-r11} ; \u6062\u590d\u5de5\u4f5c\u5bc4\u5b58\u5668\u503c\nCopywords\n    ANDS r2, r2, #7     ; \u5269\u4e0b\u4e0d\u8db38\u4e2a\u5b57\u7684\u6570\u636e\u7684\u5b57\u6570\n    BEQ Stop            ; \u6570\u636e\u590d\u5236\u5b8c\u6210\nWordcopy\n    LDR r3, [r0], #4    ; \u4ece\u6e90\u6570\u636e\u533a\u8bfb\u53d61\u4e2a\u5b57\u7684\u6570\u636e, \u653e\u5230r3\u5bc4\u5b58\u5668\u4e2d\u5e76\u66f4\u65b0\u76ee\u6807\u6570\u636e\u533a\u6307\u9488r0\n    STR r3, [r1], #4    ; \u5c06\u8fd9r3\u4e2d\u6570\u636e\u5199\u5165\u5230\u76ee\u6807\u6570\u636e\u533a\u4e2d, \u5e76\u66f4\u65b0\u76ee\u6807\u6570\u636e\u533a\u6307\u9488r1\n    SUBS r2, r2, #1     ; \u5c06\u5b57\u6570\u51cf1\n    BNE Wordcopy        ; \u5faa\u73af\uff0c\u76f4\u5230\u5b8c\u6210\u4ee5\u5b57\u4e3a\u5355\u4f4d\u7684\u6570\u636e\u590d\u5236\nStop\n    MOV r0, #0x18      ; \u7a0b\u5e8f\u9000\u51fa\n    LDR r1, =0x20026\n    SWI 0x123456\n\nAREA BlockData, DATA, READWRITE ; \u5b9a\u4e49\u6570\u636e\u533a\n    Src DCD 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4 \n    ; \u5b9a\u4e49\u6e90\u6570\u636e\u533asrc\n    Dst DCD 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 \n    ; \u5b9a\u4e49\u76ee\u6807\u6570\u636e\u533adst\nEND ;\u7ed3\u675f\u6c47\u7f16\n</code></pre> <pre><code>TITLE \u8df3\u8f6c\u8868\u5b9e\u73b0\u7a0b\u5e8f\u8df3\u8f6c\nAREA Jump, CODE, READONLY ; \u8bbe\u7f6e\u672c\u6bb5\u7a0b\u5e8f\u7684\u540d\u79f0(Jump)\u53ca\u5c5e\u6027\nnum EQU 2 ; \u8df3\u8f6c\u8868\u4e2d\u7684\u5b50\u7a0b\u5e8f\u4e2a\u6570\nENTRY ; \u7a0b\u5e8f\u6267\u884c\u7684\u5165\u53e3\u70b9\nStart\n    MOV r0, #0 ; \u8bbe\u7f6e3\u4e2a\u53c2\u6570\uff0c\u7136\u540e\u8c03\u7528\u5b50\u7a0b\u5e8farithfunc\uff0c\u8fdb\u884c\u7b97\u672f\u8fd0\u7b97\n    MOV r1, #3 \n    MOV r2, #2\n    BL arithfunc ; \u8c03\u7528\u5b50\u7a0b\u5e8farithfunc\nStop\n    MOV r0, #0x18    ; \u7a0b\u5e8f\u9000\u51fa\n    LDR r1, =0x20026\n    SWI 0x123456\n\nArithfunc ; \u5b50\u7a0b\u5e8farithfunc\u5165\u53e3\u70b9\n    CMP r0, #num ; \u5224\u65ad\u9009\u62e9\u5b50\u7a0b\u5e8f\u7684\u53c2\u6570\u662f\u5426\u5728\u6709\u6548\u8303\u56f4\u4e4b\u5185\n    MOVHS pc, lr ; \u82e5\u4e0d\u5728\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\n    ADR r3, JumpTable   ; \u8bfb\u53d6\u8df3\u8f6c\u8868\u7684\u57fa\u5730\u5740(ADR\u662f\u4f2a\u6307\u4ee4)\n    LDR pc, [r3, r0, LSL #2] ; \u6839\u636e\u53c2\u6570r0\u7684\u503c\u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u5b50\u7a0b\u5e8f\nJumpTable\n    DCD DoAdd\n    DCD DoSub\nDoAdd ; \u5b50\u7a0b\u5e8fDoAdd\u6267\u884c\u52a0\u6cd5\u64cd\u4f5c\n    ADD r0, r1, r2\n    MOV pc, lr\nDoSub ; \u5b50\u7a0b\u5e8fDoSub\u6267\u884c\u51cf\u6cd5\u64cd\u4f5c\n    SUB r0, r1, r2\n    MOV pc, lr\nEND ; \u7ed3\u675f\u6c47\u7f16\n</code></pre>"},{"location":"ComputerTheory/EmbeddedSystem/#contributors","title":"Contributors","text":"<ul> <li>Zhihao Li</li> <li>Jiawei Hu</li> </ul>"},{"location":"Home/Introduction/","title":"\u5199\u5728\u524d\u9762\u7684\u8bdd","text":""},{"location":"Mathematics/","title":"Math","text":""}]}